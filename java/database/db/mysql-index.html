<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://x.app/java/database/db/mysql-index.html"><meta property="og:site_name" content="doc"><meta property="og:title" content="索引及优化"><meta property="og:description" content="SQL调优理论基础 索引数据结构 数据库索引是提高数据库查询性能的关键技术之一。索引类似于书籍的目录，通过索引可以快速定位到所需的数据，而不需要扫描整个表。 数据库索引的优缺点 索引的优点 提高查询速度：通过索引，数据库引擎可以快速定位到所需的数据，而不需要扫描整个表。 提高排序和分组效率：索引可以加速排序和分组操作。 唯一性约束：唯一索引可以确保数据..."><meta property="og:type" content="article"><meta property="og:image" content="https://image.ventix.top/java/image-20220324204029868.png"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2025-01-19T15:33:28.000Z"><meta property="article:author" content="ventixy"><meta property="article:modified_time" content="2025-01-19T15:33:28.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"索引及优化","image":["https://image.ventix.top/java/image-20220324204029868.png","https://image.ventix.top/java/image-20220324205314504.png","https://image.ventix.top/java/image-20220324204347069.png","https://image.ventix.top/java/image-20220324204721606.png","https://image.ventix.top/java/image-20220324204910192.png","https://image.ventix.top/java/image-20220325121029629.png","https://image.ventix.top/java/image-20220325121053355.png","https://image.ventix.top/java/image-20220326090301653.png","https://image.ventix.top/java/image-20220326090335787.png","https://image.ventix.top/java/image-20220326090348362.png"],"dateModified":"2025-01-19T15:33:28.000Z","author":[{"@type":"Person","name":"ventixy","url":"https://www.ventix.top"}]}</script><link rel="icon" href="/jav.ico"><title>索引及优化 | doc</title><meta name="description" content="SQL调优理论基础 索引数据结构 数据库索引是提高数据库查询性能的关键技术之一。索引类似于书籍的目录，通过索引可以快速定位到所需的数据，而不需要扫描整个表。 数据库索引的优缺点 索引的优点 提高查询速度：通过索引，数据库引擎可以快速定位到所需的数据，而不需要扫描整个表。 提高排序和分组效率：索引可以加速排序和分组操作。 唯一性约束：唯一索引可以确保数据...">
    <link rel="preload" href="/assets/style-DlWEdz0Y.css" as="style"><link rel="stylesheet" href="/assets/style-DlWEdz0Y.css">
    <link rel="modulepreload" href="/assets/app-D2UzjgoV.js"><link rel="modulepreload" href="/assets/mysql-index.html-Bc_g4DS6.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-ML-BuCWl.js" as="script"><link rel="prefetch" href="/assets/blog.html-BM4rx6lN.js" as="script"><link rel="prefetch" href="/assets/intro.html-rXO04VU-.js" as="script"><link rel="prefetch" href="/assets/index.html-C_ZDEQNb.js" as="script"><link rel="prefetch" href="/assets/index.html-DuUjuIj7.js" as="script"><link rel="prefetch" href="/assets/资源分享.html-DEmgkP4G.js" as="script"><link rel="prefetch" href="/assets/index.html-Cpn5qjGZ.js" as="script"><link rel="prefetch" href="/assets/index.html-B59x6lqN.js" as="script"><link rel="prefetch" href="/assets/Gradle.html-Bo41lGyG.js" as="script"><link rel="prefetch" href="/assets/index.html-DOesi0hZ.js" as="script"><link rel="prefetch" href="/assets/maven.html-KKDl7nvE.js" as="script"><link rel="prefetch" href="/assets/theme.html-D2Q5RYac.js" as="script"><link rel="prefetch" href="/assets/index.html-CZRXDOPY.js" as="script"><link rel="prefetch" href="/assets/index.html-CyngytpU.js" as="script"><link rel="prefetch" href="/assets/index.html-DLhWW3KA.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-lCkaQB8t.js" as="script"><link rel="prefetch" href="/assets/mysql.html-BSKAVmZs.js" as="script"><link rel="prefetch" href="/assets/redis.html-Cth0LTfe.js" as="script"><link rel="prefetch" href="/assets/security.html-QGQNqnns.js" as="script"><link rel="prefetch" href="/assets/spring.html-BJB_ZLM8.js" as="script"><link rel="prefetch" href="/assets/springboot.html-CrfxogVl.js" as="script"><link rel="prefetch" href="/assets/index.html-DjwseTAF.js" as="script"><link rel="prefetch" href="/assets/base.html-BgNoqxhq.js" as="script"><link rel="prefetch" href="/assets/collect.html-BGKg7Ai-.js" as="script"><link rel="prefetch" href="/assets/concurrency.html-CuXvZTDL.js" as="script"><link rel="prefetch" href="/assets/jvm.html-DhhED59P.js" as="script"><link rel="prefetch" href="/assets/index.html-l8Jhu4rs.js" as="script"><link rel="prefetch" href="/assets/es.html-CeoUfwsI.js" as="script"><link rel="prefetch" href="/assets/rocketmq.html-254cJ-7D.js" as="script"><link rel="prefetch" href="/assets/sys.html-CRBffh_T.js" as="script"><link rel="prefetch" href="/assets/index.html-BYZzLqu6.js" as="script"><link rel="prefetch" href="/assets/index.html-DCjRxje9.js" as="script"><link rel="prefetch" href="/assets/index.html-BFCUUjZA.js" as="script"><link rel="prefetch" href="/assets/index.html-DRSetkRn.js" as="script"><link rel="prefetch" href="/assets/index.html-BXoqPJEX.js" as="script"><link rel="prefetch" href="/assets/idea.html-YBuDJ4zO.js" as="script"><link rel="prefetch" href="/assets/mac.html-BJ-27qYt.js" as="script"><link rel="prefetch" href="/assets/picgo.html-Mq9VMg2A.js" as="script"><link rel="prefetch" href="/assets/website.html-BstC3dr2.js" as="script"><link rel="prefetch" href="/assets/windows.html-DR9dUgYv.js" as="script"><link rel="prefetch" href="/assets/index.html-DJxomfVv.js" as="script"><link rel="prefetch" href="/assets/encoding.html-N5JdGAWN.js" as="script"><link rel="prefetch" href="/assets/harddisk.html-BKqAk44d.js" as="script"><link rel="prefetch" href="/assets/index.html-COp4e3IO.js" as="script"><link rel="prefetch" href="/assets/mysql-binlog.html-B0n_FsNF.js" as="script"><link rel="prefetch" href="/assets/mysql-lock.html-DlyDmLKQ.js" as="script"><link rel="prefetch" href="/assets/mysql.html-E81Pq1QE.js" as="script"><link rel="prefetch" href="/assets/index.html-BUd619aI.js" as="script"><link rel="prefetch" href="/assets/env.html-LInMK5Yf.js" as="script"><link rel="prefetch" href="/assets/history.html-CEjjmxRX.js" as="script"><link rel="prefetch" href="/assets/jar.html-C7ntNHrR.js" as="script"><link rel="prefetch" href="/assets/index.html-Dzhp92MI.js" as="script"><link rel="prefetch" href="/assets/k8s.html-C5P9SFZh.js" as="script"><link rel="prefetch" href="/assets/ks-install.html-CCsGBdu7.js" as="script"><link rel="prefetch" href="/assets/vm.html-ELSQAqQy.js" as="script"><link rel="prefetch" href="/assets/index.html-CtJsxRbo.js" as="script"><link rel="prefetch" href="/assets/springboot.html-BNnwu94_.js" as="script"><link rel="prefetch" href="/assets/index.html-BljmwcfF.js" as="script"><link rel="prefetch" href="/assets/index.html-eyLjfAS3.js" as="script"><link rel="prefetch" href="/assets/begin.html-DiR4hQ5E.js" as="script"><link rel="prefetch" href="/assets/index.html-CrGGn4r0.js" as="script"><link rel="prefetch" href="/assets/index.html-ifzfpraU.js" as="script"><link rel="prefetch" href="/assets/index.html-CyIuc0Fj.js" as="script"><link rel="prefetch" href="/assets/pywin32.html-D8bK9Y0D.js" as="script"><link rel="prefetch" href="/assets/index.html-BE3QjSYf.js" as="script"><link rel="prefetch" href="/assets/damb.html-DXa9328s.js" as="script"><link rel="prefetch" href="/assets/sd.html-Cku43dnc.js" as="script"><link rel="prefetch" href="/assets/yolo.html-BB_QEIdv.js" as="script"><link rel="prefetch" href="/assets/index.html-CjchiMDf.js" as="script"><link rel="prefetch" href="/assets/env.html-Ui8Cw2a4.js" as="script"><link rel="prefetch" href="/assets/Linux.html-CtnGWWmQ.js" as="script"><link rel="prefetch" href="/assets/index.html-W7UOaesY.js" as="script"><link rel="prefetch" href="/assets/file.html-CoykoWNv.js" as="script"><link rel="prefetch" href="/assets/setting.html-BWEVQlbg.js" as="script"><link rel="prefetch" href="/assets/shell.html-BNDCji1a.js" as="script"><link rel="prefetch" href="/assets/Docker.html-Degzh-rh.js" as="script"><link rel="prefetch" href="/assets/index.html-si29VxvT.js" as="script"><link rel="prefetch" href="/assets/k8s.html-95X2NOTe.js" as="script"><link rel="prefetch" href="/assets/index.html-HqWoCLBm.js" as="script"><link rel="prefetch" href="/assets/git.html-CEhzqQvv.js" as="script"><link rel="prefetch" href="/assets/gitlab.html-BxQyyqaT.js" as="script"><link rel="prefetch" href="/assets/jenkins.html-BiIFbw0H.js" as="script"><link rel="prefetch" href="/assets/index.html-CKCgrubA.js" as="script"><link rel="prefetch" href="/assets/index.html-xHIM_sU1.js" as="script"><link rel="prefetch" href="/assets/index.html-JcPmHZ0j.js" as="script"><link rel="prefetch" href="/assets/index.html-58PWV9T0.js" as="script"><link rel="prefetch" href="/assets/Architecture.html-CqeGjseT.js" as="script"><link rel="prefetch" href="/assets/index.html-DCjaBvvo.js" as="script"><link rel="prefetch" href="/assets/Transaction.html-C5YXSwg3.js" as="script"><link rel="prefetch" href="/assets/redis-java.html-CQjSVfaU.js" as="script"><link rel="prefetch" href="/assets/redis.html-FwmwgzbK.js" as="script"><link rel="prefetch" href="/assets/sql.html-BR2G6mc-.js" as="script"><link rel="prefetch" href="/assets/Hibernate.html-C2M-ME3i.js" as="script"><link rel="prefetch" href="/assets/index.html-CoYNYkp0.js" as="script"><link rel="prefetch" href="/assets/generator.html-Bsn6lG4_.js" as="script"><link rel="prefetch" href="/assets/mybatis-resource.html-90X90sMa.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-C6FdUyJT.js" as="script"><link rel="prefetch" href="/assets/tk-mybatis.html-CLMQwhmX.js" as="script"><link rel="prefetch" href="/assets/index.html-jv8oFTRD.js" as="script"><link rel="prefetch" href="/assets/Servlet.html-BRNo38qd.js" as="script"><link rel="prefetch" href="/assets/http.html-zwU3zaVU.js" as="script"><link rel="prefetch" href="/assets/jsp.html-DVXUzXE1.js" as="script"><link rel="prefetch" href="/assets/mvc.html-8PCnUUOv.js" as="script"><link rel="prefetch" href="/assets/nginx.html-tenxYHTQ.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-By4q6wG8.js" as="script"><link rel="prefetch" href="/assets/index.html-CD6pbIie.js" as="script"><link rel="prefetch" href="/assets/crossDomain.html-l6inFE2x.js" as="script"><link rel="prefetch" href="/assets/excel.html-DZjImlsW.js" as="script"><link rel="prefetch" href="/assets/log.html-5cy2RU2-.js" as="script"><link rel="prefetch" href="/assets/shiro.html-p3n-py8L.js" as="script"><link rel="prefetch" href="/assets/index.html-BZ_xo4yh.js" as="script"><link rel="prefetch" href="/assets/design.html-BNVQdxOP.js" as="script"><link rel="prefetch" href="/assets/life.html-R4HbJFdd.js" as="script"><link rel="prefetch" href="/assets/mvc-core.html-p61ve4pI.js" as="script"><link rel="prefetch" href="/assets/sec.html-Clc8yNMt.js" as="script"><link rel="prefetch" href="/assets/spring.html-SAmp_x7E.js" as="script"><link rel="prefetch" href="/assets/springboot.html-CrFNjfEK.js" as="script"><link rel="prefetch" href="/assets/springmvc.html-BE7I_rXL.js" as="script"><link rel="prefetch" href="/assets/transaction.html-DAYL7Qi8.js" as="script"><link rel="prefetch" href="/assets/index.html-DaOKxV0O.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-B7ToYJKR.js" as="script"><link rel="prefetch" href="/assets/RockMQ.html-Bp-rJaJi.js" as="script"><link rel="prefetch" href="/assets/Sentinel.html-DuEq6Iwz.js" as="script"><link rel="prefetch" href="/assets/dubbo.html-QKo6X-ok.js" as="script"><link rel="prefetch" href="/assets/es.html-A1d7cXTY.js" as="script"><link rel="prefetch" href="/assets/eureka.html-BhXHOE3M.js" as="script"><link rel="prefetch" href="/assets/gateway.html-CTc91Ebf.js" as="script"><link rel="prefetch" href="/assets/hystrix.html-CIaVZ0lC.js" as="script"><link rel="prefetch" href="/assets/kafka.html-DeDYmOUp.js" as="script"><link rel="prefetch" href="/assets/nacos.html-D4lZU-18.js" as="script"><link rel="prefetch" href="/assets/zookeeper.html-CiFoFS11.js" as="script"><link rel="prefetch" href="/assets/index.html-B9PxZ8uk.js" as="script"><link rel="prefetch" href="/assets/cron.html-3PybyKrs.js" as="script"><link rel="prefetch" href="/assets/db.html-btf15nAt.js" as="script"><link rel="prefetch" href="/assets/dup.html-BvPfe052.js" as="script"><link rel="prefetch" href="/assets/lock.html-Dq8en9vn.js" as="script"><link rel="prefetch" href="/assets/redis.html-gRhAUOAY.js" as="script"><link rel="prefetch" href="/assets/transac.html-BaIYVH4d.js" as="script"><link rel="prefetch" href="/assets/walk.html-CqzY4NSk.js" as="script"><link rel="prefetch" href="/assets/HashMap源码分析.html-BgU6aGvg.js" as="script"><link rel="prefetch" href="/assets/Java基础.html-Bit-IfIY.js" as="script"><link rel="prefetch" href="/assets/Java常用类库.html-QhrE3Jm6.js" as="script"><link rel="prefetch" href="/assets/Java面向对象.html-D88tc2S_.js" as="script"><link rel="prefetch" href="/assets/index.html-C4oY4N5d.js" as="script"><link rel="prefetch" href="/assets/collection.html-CEKc-SAk.js" as="script"><link rel="prefetch" href="/assets/generics.html-DILiTjjQ.js" as="script"><link rel="prefetch" href="/assets/javaIO.html-D8nqWKaA.js" as="script"><link rel="prefetch" href="/assets/set和map.html-bUdobcQi.js" as="script"><link rel="prefetch" href="/assets/数组和字符串.html-CoXvgey6.js" as="script"><link rel="prefetch" href="/assets/index.html-B0Yn98Lb.js" as="script"><link rel="prefetch" href="/assets/netty.html-BGc3ITsL.js" as="script"><link rel="prefetch" href="/assets/nio.html-CJLr3zKd.js" as="script"><link rel="prefetch" href="/assets/socket.html-9SdcB3Ew.js" as="script"><link rel="prefetch" href="/assets/theory.html-KRV52McE.js" as="script"><link rel="prefetch" href="/assets/Annotation.html-BGKufqr_.js" as="script"><link rel="prefetch" href="/assets/Enum.html-Bxjo7uYN.js" as="script"><link rel="prefetch" href="/assets/Jvm内存管理.html-DMtituYL.js" as="script"><link rel="prefetch" href="/assets/Jvm类加载.html-DZ00a81g.js" as="script"><link rel="prefetch" href="/assets/Lambda.html-DxcW-DQ3.js" as="script"><link rel="prefetch" href="/assets/index.html-d8y8esvq.js" as="script"><link rel="prefetch" href="/assets/Reflection.html-CAbcVr0c.js" as="script"><link rel="prefetch" href="/assets/Stream.html-BzbAH9uL.js" as="script"><link rel="prefetch" href="/assets/bytecode.html-CwBhNqG4.js" as="script"><link rel="prefetch" href="/assets/pt.html-Bd_TEqXh.js" as="script"><link rel="prefetch" href="/assets/index.html-DuWSIPi4.js" as="script"><link rel="prefetch" href="/assets/lock.html-DZPWkugY.js" as="script"><link rel="prefetch" href="/assets/pool.html-779rh1bn.js" as="script"><link rel="prefetch" href="/assets/thread.html-CRJnnKnr.js" as="script"><link rel="prefetch" href="/assets/tool.html-HZIHDNBE.js" as="script"><link rel="prefetch" href="/assets/index.html-C-6GFMWc.js" as="script"><link rel="prefetch" href="/assets/base.html-CmCWEVyg.js" as="script"><link rel="prefetch" href="/assets/numpy.html-D-K_6yrB.js" as="script"><link rel="prefetch" href="/assets/opencv.html-Cpa736y9.js" as="script"><link rel="prefetch" href="/assets/pillow.html-BH5_biAN.js" as="script"><link rel="prefetch" href="/assets/python.html-FjYijfw6.js" as="script"><link rel="prefetch" href="/assets/index.html-BrQDnjli.js" as="script"><link rel="prefetch" href="/assets/base.html-3Dvtq4Zr.js" as="script"><link rel="prefetch" href="/assets/data.html-Cs-oYTYL.js" as="script"><link rel="prefetch" href="/assets/file.html-BQPEqM3d.js" as="script"><link rel="prefetch" href="/assets/function.html-DKQM9cuB.js" as="script"><link rel="prefetch" href="/assets/oop.html-C8A0VQqy.js" as="script"><link rel="prefetch" href="/assets/index.html-BodXb2o_.js" as="script"><link rel="prefetch" href="/assets/numpy.html-Cw5bNhTp.js" as="script"><link rel="prefetch" href="/assets/pandas.html-D6gp3GWg.js" as="script"><link rel="prefetch" href="/assets/index.html-D0FUvOsd.js" as="script"><link rel="prefetch" href="/assets/css.html-C4Ml9DQY.js" as="script"><link rel="prefetch" href="/assets/css2.html-BDLlgl_L.js" as="script"><link rel="prefetch" href="/assets/css3.html-D7Zyj7bX.js" as="script"><link rel="prefetch" href="/assets/css4.html-ref8HU2G.js" as="script"><link rel="prefetch" href="/assets/index.html-C35P3OeR.js" as="script"><link rel="prefetch" href="/assets/html.html-DWW-NT8U.js" as="script"><link rel="prefetch" href="/assets/html5.html-D2sWT2_a.js" as="script"><link rel="prefetch" href="/assets/index.html-D16MABeZ.js" as="script"><link rel="prefetch" href="/assets/dom.html-CExTIAyB.js" as="script"><link rel="prefetch" href="/assets/es6.html-BBkOZWMF.js" as="script"><link rel="prefetch" href="/assets/js.html-L9V1GSEM.js" as="script"><link rel="prefetch" href="/assets/js2.html-BlRALKv3.js" as="script"><link rel="prefetch" href="/assets/index.html-GO87K-iS.js" as="script"><link rel="prefetch" href="/assets/ts.html-DdZuk6Db.js" as="script"><link rel="prefetch" href="/assets/ts2.html-Dc3edFsA.js" as="script"><link rel="prefetch" href="/assets/index.html-BWIxAt05.js" as="script"><link rel="prefetch" href="/assets/react.html-Db29lVpW.js" as="script"><link rel="prefetch" href="/assets/ui.html-D5BWHaxv.js" as="script"><link rel="prefetch" href="/assets/vue.html-BDeKBx1H.js" as="script"><link rel="prefetch" href="/assets/index.html-BmIwRWpl.js" as="script"><link rel="prefetch" href="/assets/build.html-DSZGHG9Y.js" as="script"><link rel="prefetch" href="/assets/format.html-BOabBD8o.js" as="script"><link rel="prefetch" href="/assets/node.html-oHitbCae.js" as="script"><link rel="prefetch" href="/assets/index.html-DWYTTu15.js" as="script"><link rel="prefetch" href="/assets/index.html-C9UeyX1s.js" as="script"><link rel="prefetch" href="/assets/index.html-CzJvJNbz.js" as="script"><link rel="prefetch" href="/assets/baz.html-BQODcKRn.js" as="script"><link rel="prefetch" href="/assets/index.html-mLC5o5xk.js" as="script"><link rel="prefetch" href="/assets/ray.html-Bo_Qum2c.js" as="script"><link rel="prefetch" href="/assets/404.html-D-INJ6np.js" as="script"><link rel="prefetch" href="/assets/index.html-Bf1RPzba.js" as="script"><link rel="prefetch" href="/assets/index.html-CBJA7pK2.js" as="script"><link rel="prefetch" href="/assets/index.html-DsIY6lTH.js" as="script"><link rel="prefetch" href="/assets/index.html-d_EvZkau.js" as="script"><link rel="prefetch" href="/assets/index.html-DN_qFa1H.js" as="script"><link rel="prefetch" href="/assets/index.html-BnEJ0Hu_.js" as="script"><link rel="prefetch" href="/assets/index.html-DkG9K5UZ.js" as="script"><link rel="prefetch" href="/assets/index.html-6l5V53QI.js" as="script"><link rel="prefetch" href="/assets/index.html-DhfvKgaH.js" as="script"><link rel="prefetch" href="/assets/index.html-l1Zi-hwo.js" as="script"><link rel="prefetch" href="/assets/index.html-CoiTTzFp.js" as="script"><link rel="prefetch" href="/assets/index.html-C6m12Nbn.js" as="script"><link rel="prefetch" href="/assets/index.html-Bx3HHks8.js" as="script"><link rel="prefetch" href="/assets/index.html-Dm1GxRKS.js" as="script"><link rel="prefetch" href="/assets/index.html-DuK0_aGq.js" as="script"><link rel="prefetch" href="/assets/index.html-LTq5D6aj.js" as="script"><link rel="prefetch" href="/assets/index.html-8W7JxYcD.js" as="script"><link rel="prefetch" href="/assets/index.html-D-soegSc.js" as="script"><link rel="prefetch" href="/assets/index.html-DBRKQHzF.js" as="script"><link rel="prefetch" href="/assets/index.html-BTcYN7DF.js" as="script"><link rel="prefetch" href="/assets/index.html-CAsHHKfF.js" as="script"><link rel="prefetch" href="/assets/index.html-Cqv63s1w.js" as="script"><link rel="prefetch" href="/assets/index.html-7e2pjUxR.js" as="script"><link rel="prefetch" href="/assets/index.html-Bs0ssAUD.js" as="script"><link rel="prefetch" href="/assets/index.html-dI3IkaoV.js" as="script"><link rel="prefetch" href="/assets/index.html-BwxQZL3n.js" as="script"><link rel="prefetch" href="/assets/index.html-DVOzYM0e.js" as="script"><link rel="prefetch" href="/assets/index.html-D2i0Tqlk.js" as="script"><link rel="prefetch" href="/assets/index.html-BhN6X72j.js" as="script"><link rel="prefetch" href="/assets/index.html-D2DNLJz9.js" as="script"><link rel="prefetch" href="/assets/index.html-CslUQCXL.js" as="script"><link rel="prefetch" href="/assets/index.html-BfIYNd9t.js" as="script"><link rel="prefetch" href="/assets/index.html-D-xOWu5w.js" as="script"><link rel="prefetch" href="/assets/index.html-CIvTzxd4.js" as="script"><link rel="prefetch" href="/assets/index.html-BpFZZHzu.js" as="script"><link rel="prefetch" href="/assets/index.html-MgWd7i17.js" as="script"><link rel="prefetch" href="/assets/index.html-duK40Pcp.js" as="script"><link rel="prefetch" href="/assets/index.html-Bp7bcxnD.js" as="script"><link rel="prefetch" href="/assets/index.html-hLePwBdq.js" as="script"><link rel="prefetch" href="/assets/index.html-CjLGi012.js" as="script"><link rel="prefetch" href="/assets/index.html-DqPMC7hH.js" as="script"><link rel="prefetch" href="/assets/index.html-rO596til.js" as="script"><link rel="prefetch" href="/assets/index.html-ng13swwR.js" as="script"><link rel="prefetch" href="/assets/index.html-DbHywA6g.js" as="script"><link rel="prefetch" href="/assets/index.html-CXXh7nQt.js" as="script"><link rel="prefetch" href="/assets/index.html-BB_Dd0dL.js" as="script"><link rel="prefetch" href="/assets/index.html-CibeoWDS.js" as="script"><link rel="prefetch" href="/assets/index.html-B2wUiKxi.js" as="script"><link rel="prefetch" href="/assets/index.html-B-P89Tie.js" as="script"><link rel="prefetch" href="/assets/index.html-BIinfKB1.js" as="script"><link rel="prefetch" href="/assets/index.html-CDgTlD2N.js" as="script"><link rel="prefetch" href="/assets/index.html-AcY86fwa.js" as="script"><link rel="prefetch" href="/assets/index.html-CtEDt4BO.js" as="script"><link rel="prefetch" href="/assets/index.html-Bl-hNB9A.js" as="script"><link rel="prefetch" href="/assets/index.html-CNeZXo2I.js" as="script"><link rel="prefetch" href="/assets/index.html-CDfzqCFb.js" as="script"><link rel="prefetch" href="/assets/index.html-CEnTeF0Q.js" as="script"><link rel="prefetch" href="/assets/index.html-BlNt9GMf.js" as="script"><link rel="prefetch" href="/assets/index.html-D50WmBBE.js" as="script"><link rel="prefetch" href="/assets/giscus-_nrdy_5Y.js" as="script"><link rel="prefetch" href="/assets/flowchart-CAFN9Lqb.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-Bp1GearE.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-CMg0yb1C.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">doc</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog.html" aria-label="Blog"><!--[--><span class="font-icon icon iconfont icon-blog" style=""></span><!--]-->Blog<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/java/" aria-label="Java"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span><!--]-->Java<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/project/" aria-label="Project"><!--[--><span class="font-icon icon iconfont icon-app" style=""></span><!--]-->Project<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/web/" aria-label="Web"><!--[--><span class="font-icon icon iconfont icon-net" style=""></span><!--]-->Web<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/python/" aria-label="Python"><!--[--><span class="font-icon icon iconfont icon-python" style=""></span><!--]-->Python<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Other"><!--[--><span class="font-icon icon iconfont icon-project" style=""></span>Other<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/interview/" aria-label="Java面试题库"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span><!--]-->Java面试题库<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/tool/theme.html" aria-label="Theme-Hope"><!--[--><span class="font-icon icon iconfont icon-web-design" style=""></span><!--]-->Theme-Hope<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/ventixy/notebook" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable active"><span class="font-icon icon iconfont icon-java" style=""></span><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/java/" aria-label="Java Programming"><!---->Java Programming<!----></a><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon iconfont icon-app" style=""></span><span class="vp-sidebar-title">Java基础及核心特性</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java基础语法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">进阶语法和JVM</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">网络编程与高性能IO</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java并发编程</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon iconfont icon-net" style=""></span><span class="vp-sidebar-title">JavaWeb及常用框架</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Web基础与常用服务器</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spring Framework</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">其他常用工具和框架</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon iconfont icon-db" style=""></span><span class="vp-sidebar-title">数据库与ORM框架</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">常用数据库</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/java/database/db/sql.html" aria-label="MySQL数据库"><!---->MySQL数据库<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/java/database/db/Architecture.html" aria-label="MySQL体系架构"><!---->MySQL体系架构<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/java/database/db/Transaction.html" aria-label="事务与锁机制"><!---->事务与锁机制<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/java/database/db/mysql-index.html" aria-label="索引及优化"><!---->索引及优化<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/java/database/db/redis.html" aria-label="Redis数据缓存"><!---->Redis数据缓存<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/java/database/db/redis-java.html" aria-label="Java操作Redis"><!---->Java操作Redis<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ORM框架</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon iconfont icon-microservice" style=""></span><span class="vp-sidebar-title">分布式与微服务架构</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">微服务框架和中间件</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">分布式系统问题解决方案</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->索引及优化</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://www.ventix.top" target="_blank" rel="noopener noreferrer">ventixy</a></span><span property="author" content="ventixy"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2025-01-10T15:19:41.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 23 min</span><meta property="timeRequired" content="PT23M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#sql调优理论基础">SQL调优理论基础</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#索引数据结构">索引数据结构</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#b-树索引">B+树索引</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#回表-覆盖索引">回表/覆盖索引</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#最左前缀原则">最左前缀原则</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#数据库查询优化">数据库查询优化</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#mysql数据库调优">MySQL数据库调优</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#索引及文件位置">索引及文件位置</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mysql存储引擎">MySQL存储引擎</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#索引的分类和创建">索引的分类和创建</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#使用explain">使用EXPLAIN</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#开启慢查询日志">开启慢查询日志</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#索引常见问题汇总">索引常见问题汇总</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#使用自增主键">使用自增主键</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#索引越多越好">索引越多越好？</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h2 id="sql调优理论基础" tabindex="-1"><a class="header-anchor" href="#sql调优理论基础"><span>SQL调优理论基础</span></a></h2><h3 id="索引数据结构" tabindex="-1"><a class="header-anchor" href="#索引数据结构"><span>索引数据结构</span></a></h3><p>数据库索引是提高数据库查询性能的关键技术之一。索引类似于书籍的目录，通过索引可以快速定位到所需的数据，而不需要扫描整个表。</p><details class="hint-container details"><summary>数据库索引的优缺点</summary><h4 id="索引的优点" tabindex="-1"><a class="header-anchor" href="#索引的优点"><span>索引的优点</span></a></h4><ol><li><strong>提高查询速度</strong>：通过索引，数据库引擎可以快速定位到所需的数据，而不需要扫描整个表。</li><li><strong>提高排序和分组效率</strong>：索引可以加速排序和分组操作。</li><li><strong>唯一性约束</strong>：唯一索引可以确保数据的唯一性，防止重复数据的插入。</li></ol><h4 id="索引的缺点" tabindex="-1"><a class="header-anchor" href="#索引的缺点"><span>索引的缺点</span></a></h4><ol><li><strong>增加存储空间</strong>：索引需要额外的存储空间，尤其是大型表和多列索引。</li><li><strong>降低写操作性能</strong>：插入、更新和删除操作需要维护索引，增加了这些操作的开销。</li><li><strong>复杂性</strong>：过多的索引会使数据库设计和维护变得复杂。</li></ol></details><p>为什么索引就更快呢? 这就要探究索引使用的数据结构了</p><div class="hint-container info"><p class="hint-container-title">常见的可作为索引的数据结构</p><h4 id="_1-数组和链表" tabindex="-1"><a class="header-anchor" href="#_1-数组和链表"><span>1. 数组和链表</span></a></h4><figure><img src="https://image.ventix.top/java/image-20220324204029868.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_2-hash表" tabindex="-1"><a class="header-anchor" href="#_2-hash表"><span>2. hash表</span></a></h4><figure><img src="https://image.ventix.top/java/image-20220324205314504.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="_3-二叉树" tabindex="-1"><a class="header-anchor" href="#_3-二叉树"><span>3. 二叉树</span></a></h4><figure><img src="https://image.ventix.top/java/image-20220324204347069.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>可以适当的帮助我们提高查询单个值的效率</li><li>可以适当的帮助我们提高查询范围值的效率</li></ul><p>二叉树（包括AVL树、红黑树）对于提升查询效率的帮助是十分有限的。为什么呢？</p><p>因为这些树只有两个“叉”，当数据变多的时候，树的层高会急剧上升，这就会导致搜索的困难增加，效率会明显降低。</p><h4 id="_4-b树和b-树" tabindex="-1"><a class="header-anchor" href="#_4-b树和b-树"><span>4. B树和B+树</span></a></h4><figure><img src="https://image.ventix.top/java/image-20220324204721606.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><br><figure><img src="https://image.ventix.top/java/image-20220324204910192.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><ul><li>在数据库中B+树的高度一般都在2～4层，也就是说查找某一行记录时最多只需要2到4次IO</li><li>B+树索引的主要特点在于： <ul><li><mark>非叶子节点只存储关键字和子节点指针</mark>：非叶子节点用于引导查找，存储关键字和指向子节点的指针，但不存储数据记录。</li><li><mark>所有叶子节点包含关键字和数据指针</mark>：在 B+树中，所有的数据记录都存储在叶子节点中，而非叶子节点只存储关键字和指向子节点的指针。</li><li><mark>所有叶子节点通过指针链接在一起</mark>：叶子节点之间通过指针链接，形成一个双向链表，便于范围查询。</li></ul></li></ul><h3 id="b-树索引" tabindex="-1"><a class="header-anchor" href="#b-树索引"><span>B+树索引</span></a></h3><p>B+树（B+ Tree）是一种广泛应用于数据库和文件系统中的数据结构，特别适合于磁盘存储和检索大量数据。B+树的设计目标是减少磁盘 I/O 操作次数，从而提高数据检索的效率。B+树的特点：</p><ol><li><strong>高度平衡</strong>：B+树是高度平衡的树，所有叶子节点都在同一层，保证了查找、插入和删除操作的时间复杂度为 <code>O(log n)</code>。</li><li><strong>高效的空间利用率</strong>：每个节点可以存储多个关键字和指针，减少了磁盘 I/O 操作次数。</li><li><strong>支持范围查询</strong>：由于叶子节点通过指针链接在一起，B+树非常适合进行范围查询。</li><li><strong>数据集中存储</strong>：所有数据记录都存储在叶子节点中，非叶子节点只用于引导查找，提高了查找效率。</li></ol><div class="hint-container info"><p class="hint-container-title">B+树的节点结构</p><ol><li><p><strong>内部节点（非叶子节点）</strong>：</p><ul><li>存储关键字和指向子节点的指针。</li><li>关键字用于引导查找，指针指向子节点。</li><li>每个内部节点最多有 M 个子节点，最少有 M/2 个子节点（其中M是节点的最大度数）。</li></ul></li><li><p><strong>叶子节点</strong>：</p><ul><li>存储关键字和数据记录（或数据记录的指针）。</li><li>通过指针链接在一起，形成一个双向链表。</li><li>每个叶子节点最多有 L个关键字，最少有 L/2个关键字（其中L是节点的最大容量）。</li></ul></li></ol></div><details class="hint-container details"><summary>B+树的插入与删除</summary><h4 id="插入操作" tabindex="-1"><a class="header-anchor" href="#插入操作"><span>插入操作</span></a></h4><ol><li><strong>查找插入位置</strong>：从根节点开始，根据关键字递归查找插入位置，直到找到合适的叶子节点。</li><li><strong>插入关键字和数据</strong>：在叶子节点中插入关键字和数据记录。</li><li><strong>分裂节点</strong>：如果叶子节点已满，需要分裂节点，将一半的关键字和数据记录移到新节点中，并在父节点中插入新的关键字和指针。</li><li><strong>更新父节点</strong>：如果父节点也满了，继续向上分裂，直到根节点或某个节点不再需要分裂。</li></ol><h4 id="删除操作" tabindex="-1"><a class="header-anchor" href="#删除操作"><span>删除操作</span></a></h4><ol><li><strong>查找删除位置</strong>：从根节点开始，根据关键字递归查找删除位置，直到找到合适的叶子节点。</li><li><strong>删除关键字和数据</strong>：在叶子节点中删除关键字和数据记录。</li><li><strong>合并节点</strong>：如果叶子节点中的关键字数量少于最小值，需要从兄弟节点借关键字或合并节点。</li><li><strong>更新父节点</strong>：如果父节点中的关键字数量少于最小值，继续向上合并，直到根节点或某个节点不再需要合并。</li></ol></details><p>B+树索引可以分为聚集索引（clustered inex）和 非聚集索引（secondary index，辅助索引）</p><div class="hint-container tip"><p class="hint-container-title">聚集索引（clustered inex） 和 非聚集索引（secondary index）</p><p>聚集索引（Clustered Index）和非聚集索引（Secondary Index）是数据库中两种重要的索引类型，它们在数据存储和查询性能方面有着显著的区别。</p><h4 id="聚集索引-clustered-index" tabindex="-1"><a class="header-anchor" href="#聚集索引-clustered-index"><span>聚集索引（Clustered Index）</span></a></h4><p>聚集索引（clustered index）就是按照每张表的主键构造一棵B+树，同时叶子节点中存放的即为整张表的行记录数据，也将聚集索引的叶子节点称为数据页。</p><ul><li><p>数据页上存放的是完整的每行的记录，而在非数据页的索引页中，存放的仅仅是键值及指向数据页的偏移量，而不是一个完整的行记录。聚集索引的这个特性决定了索引组织表中数据也是索引的一部分。同B+树数据结构一样，每个数据页都通过一个双向链表来进行链接。</p></li><li><p>聚集索引的一个好处就是，它对于主键的排序查找和范围查找速度非常快。叶子节点的数据就是用户所要查询的数据。</p></li><li><p>由于实际的数据页只能按照一棵B+树进行排序，因此每张表只能拥有一个聚集索引。<mark>主键通常用作聚集索引，因为主键是唯一的，适合按主键顺序存储数据</mark>。</p></li><li><p>在多数情况下，查询优化器倾向于采用聚集索引。因为聚集索引能够在B+树索引的叶子节点上直接找到数据。此外，由于定义了数据的逻辑顺序，聚集索引能够特别快地访问针对范围值的查询。</p></li></ul><h4 id="非聚集索引-secondary-index" tabindex="-1"><a class="header-anchor" href="#非聚集索引-secondary-index"><span>非聚集索引（Secondary Index）</span></a></h4><p>辅助索引（Secondary Index），也称非聚集索引（non-clustered index）。其叶子节点并不包含行记录的全部数据。叶子节点除了包含键值以外，每个叶子节点中的索引行中还包含了一个书签（bookmark）</p><p>示例:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> employees</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    employee_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,      </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 聚集索引</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    first_name </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    last_name </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    hire_date </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_last_name (last_name),  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 非聚集索引</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_hire_date (hire_date)   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 非聚集索引</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>聚集索引 vs 非聚集索引</strong></p><table><thead><tr><th>特点</th><th>聚集索引（Clustered Index）</th><th>非聚集索引（Secondary Index）</th></tr></thead><tbody><tr><td><strong>物理存储</strong></td><td>数据行按索引键顺序存储</td><td>索引键和指向数据行的指针</td></tr><tr><td><strong>数量限制</strong></td><td>一个表只能有一个聚集索引</td><td>一个表可以有多个非聚集索引</td></tr><tr><td><strong>查询性能</strong></td><td>范围查询和排序查询性能高</td><td>需要额外的 I/O 操作，但灵活性高</td></tr><tr><td><strong>插入和更新开销</strong></td><td>插入和更新可能导致数据行重新排序</td><td>插入和更新开销相对较小</td></tr><tr><td><strong>应用场景</strong></td><td>主键索引、范围查询、排序查询</td><td>多列查询、覆盖索引、辅助查询</td></tr></tbody></table></div><p>【注】许多数据库的文档会这样告诉读者：聚集索引按照顺序物理地存储数据。但是试想一下，如果聚集索引必须按照特定顺序存放物理记录，则维护成本显得非常之高。所以，聚集索引的存储并不是物理上连续的，而是逻辑上连续的。这其中有两点：</p><ul><li><p>一是页通过双向链表链接，页按照主键的顺序排序；</p></li><li><p>另一点是每个页中的记录也是通过双向链表进行维护的，物理存储上可以同样不按照主键存储。</p></li></ul><div class="hint-container info"><p class="hint-container-title">B+树索引的应用场景</p><ol><li><strong>数据库索引</strong>：B+树广泛用于数据库的索引结构，如 MySQL 的 InnoDB 存储引擎。</li><li><strong>文件系统</strong>：B+树用于文件系统的目录结构，如 NTFS 文件系统。</li><li><strong>搜索引擎</strong>：B+树用于索引大量的文档和网页，支持高效的检索操作。</li><li><strong>内存数据库</strong>：B+树也用于内存数据库中，如 Redis 的有序集合。</li></ol></div><h3 id="回表-覆盖索引" tabindex="-1"><a class="header-anchor" href="#回表-覆盖索引"><span>回表/覆盖索引</span></a></h3><p><strong>回表（Table Lookup）</strong> 是指在使用非聚集索引（Secondary Index）进行查询时，数据库引擎需要先通过非聚集索引找到数据行的指针，然后再访问实际的数据行的过程(即需要再返回到主键索引树查询一次)。</p><div class="hint-container tip"><p class="hint-container-title">如何避免回表呢？</p><ol><li><p>尽量避免写 <code>select *</code> ，仅查询需要的字段，如果这些字段均包含在索引字段内且符合最左前缀原则，就可以不用回表了</p></li><li><p>合理设计索引，可以考虑使用联合索引</p></li></ol></div><p><strong>联合索引</strong>：针对多列值来构建B+树。（若查询的所有列是一个联合索引，则使用非聚集索引一次就可以查询到数据），也可以称这种方式为：<mark>覆盖索引</mark> （即将被查询的字段建立到联合索引中）</p><div class="hint-container info"><p class="hint-container-title">覆盖索引</p><p>最左前缀原则的一个重要应用是覆盖索引（Covering Index）。覆盖索引是指查询条件和返回结果都在索引列中，数据库引擎可以直接从索引中获取数据，而不需要访问实际的数据行。</p><p>示例: 假设有一个表 <code>orders</code>，并且在 <code>(customer_id, order_date, order_amount)</code> 上创建了一个组合索引：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> orders</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    order_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    customer_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    order_date </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    order_amount </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DECIMAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_customer_order (customer_id, order_date, order_amount)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下查询可以利用覆盖索引：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> order_date, order_amount </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orders </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> customer_id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 123</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个查询的条件 <code>customer_id</code> 是索引的最左列，返回的结果 <code>order_date</code> 和 <code>order_amount</code> 也在索引列中，因此可以利用覆盖索引，提高查询性能。</p></div><h3 id="最左前缀原则" tabindex="-1"><a class="header-anchor" href="#最左前缀原则"><span>最左前缀原则</span></a></h3><p>最左前缀原则指的是在组合索引中，查询条件必须从索引的最左边的列开始匹配，才能有效利用索引。换句话说，查询条件中的列必须是索引列的前缀，这样才能利用索引进行快速查找。</p><div class="hint-container tip"><p class="hint-container-title">原理解释</p><p>组合索引是一个多列索引，索引的顺序决定了数据的存储顺序。数据库引擎在查找数据时，会按照索引列的顺序进行匹配。如果查询条件中的列不是索引列的前缀，那么数据库引擎无法利用索引进行快速查找，只能进行全表扫描。</p></div><p>示例：假设有一个表 <code>employees</code>，并且在 <code>(last_name, first_name, hire_date)</code> 上创建了一个组合索引：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> employees</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    employee_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    last_name </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    first_name </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    hire_date </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    INDEX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idx_last_first_hire (last_name, first_name, hire_date)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>有效利用索引的查询</strong>:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 1. 完全匹配索引列 这个查询完全匹配了组合索引的所有列，可以充分利用索引。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> last_name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Smith&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                        AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> first_name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;John&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> hire_date </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2020-01-01&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 2. 部分匹配索引列  这个查询匹配了组合索引的前两列，也可以充分利用索引。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> last_name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Smith&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> first_name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;John&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 3. 仅匹配最左列（也可以充分利用索引）</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> last_name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Smith&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>无法有效利用索引的查询</strong>：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 跳过最左列 这个查询跳过了组合索引的第一列 `last_name`，无法有效利用索引，会导致全表扫描。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> first_name </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;John&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AND</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> hire_date </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;2020-01-01&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>总结</strong>:</p><ul><li><strong>最左前缀原则</strong>：查询条件必须从组合索引的最左边的列开始匹配，才能有效利用索引。</li><li><strong>有效利用索引的查询</strong>：完全匹配索引列、部分匹配索引列、仅匹配最左列。</li><li><strong>无法有效利用索引的查询</strong>：跳过最左列、仅匹配非最左列、不按顺序匹配。</li><li><strong>覆盖索引</strong>：查询条件和返回结果都在索引列中，可以提高查询性能。</li></ul><p>通过合理设计组合索引和遵循最左前缀原则，可以显著提高数据库的查询性能。</p><h3 id="数据库查询优化" tabindex="-1"><a class="header-anchor" href="#数据库查询优化"><span>数据库查询优化</span></a></h3><ul><li><p>对查询进行优化，要尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引</p></li><li><p>应避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫 描，</p><p>如： select id from t where num is null 最好不要给数据库留NULL，尽可能的使用 NOT NULL填充数据库</p><p>备注、描述、评论之类的可以设置为 NULL，其他的，最好不要使用NULL。</p></li><li><p>应避免在 where 子句中使用 != 或 &lt;&gt; 操作符，否则引擎将放弃使用索引而进行全表扫描。 -</p></li><li><p>应避免在 where 子句中使用or来连接条件，如果一个字段有索引,一个字段没有索引，将导致引擎放弃使用索引而进行全表扫描</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># 如：</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> num</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> or</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> Name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;admin&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"># 可以这样查询：</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> num </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">union all</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> Name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;admin&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>in 和 not in 也要慎用，否则会导致全表扫描，如：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> num </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>对于连续的数值，能用 between 就不要用 in 了：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> num </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">between</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> and</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>很多时候用 exists 代替 in 是一个好的选择</p></li></ul><h2 id="mysql数据库调优" tabindex="-1"><a class="header-anchor" href="#mysql数据库调优"><span>MySQL数据库调优</span></a></h2><h3 id="索引及文件位置" tabindex="-1"><a class="header-anchor" href="#索引及文件位置"><span>索引及文件位置</span></a></h3><p>MySQL默认使用主键列作为索引（若不设置主键、mysql会自动设置一个隐藏列作为索引）</p><div class="hint-container tip"><p class="hint-container-title">数据和索引的存储位置</p><p>对于mac系统默认在 <code>/usr/local/mysql</code> 文件夹中，对于win系统默认在：<code>c:/programdata/mysql</code> (隐藏文件夹).</p><p>不在默认位置的情况下，一般是安装时初始化MySQL自定义了数据文件的存放位置，比如修改为安装目录的 data 目录下</p></div><p>存储文件的详细说明：</p><ul><li>InnoDB存储引擎的表∶将索引和数据存放在同一个文件里。<code> *.ibd</code></li><li>MyISAM存储引擎的表:索引和数据分开两个文件来存储。索引: <code> *.MYI</code> ; 数据: <code>.MYD</code></li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">使用InnoDB存储引擎的创建的表会生成两个文件：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 一个</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">.frm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 结尾的表结构定义文件，</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 一个存放数据和索引的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">.ibd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 文件</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">而使用MyISAM存储引擎的创建的表会生成三个文件：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 一个</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">.frm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 结尾的表结构定义文件，</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 一个存放数据的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">.myd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">	-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 一个存放索引的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">.myi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mysql存储引擎" tabindex="-1"><a class="header-anchor" href="#mysql存储引擎"><span>MySQL存储引擎</span></a></h3><p>MySQL支持多种存储引擎。其中最常用的两种存储引擎是 InnoDB 和 MyISAM。</p><div class="hint-container info"><p class="hint-container-title">MySQL存储引擎：InnoDB和MyISAM</p><h4 id="innodb索引" tabindex="-1"><a class="header-anchor" href="#innodb索引"><span>InnoDB索引</span></a></h4><figure><img src="https://image.ventix.top/java/image-20220325121029629.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="myisam索引" tabindex="-1"><a class="header-anchor" href="#myisam索引"><span>MyISAM索引</span></a></h4><figure><img src="https://image.ventix.top/java/image-20220325121053355.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><p>InnoDB和MyISAM有什么区别？什么情况下使用MyISAM？</p><div class="hint-container tip"><p class="hint-container-title">InnoDB和MyISAM的区别</p><ol><li><p>InnoDB 支持事务，MyISAM不支持事务，对于 InnoDB，每条SQL语句都自动封装成事务，自动提交，影响速度</p></li><li><p>InnoDB 支持外键，MyISAM不支持外键</p></li><li><p>InnoDB 的主键索引是聚集索引，数据文件和索引存储在一起。MyISAM则全是非聚集索引，索引和数据文件是分离的<br> InnoDB 的存储文件是 frm 和 ibd，而MyISAM是 frm、myd、myi 三个文件。</p></li><li><p>InnoDB 不保存表的行数，<code>查询某张表的行数</code>时会全表扫描。MyISAM会保存整个表的行数，执行速度很快</p></li><li><p>InnoDB 支持表锁和行锁（默认），而 MyISAM支持表锁。<br> 行锁是指：锁的对象是一行数据、 表锁是指：锁的对象是一整张表<br> 行锁的效率比表锁的效率要高。锁的粒度越细，锁的效率越高。</p></li><li><p>InnoDB 表必须要有一个主键（如果用户不设置，那么引擎会自行设定一列[隐藏列]当做主键），MyISAM 则可以没有</p></li></ol><p>如何选择存储引擎？</p><ul><li><p>是否需要事务？如果不需要（如历史记录数据），则可以使用MyISAM 。绝大多数操作是否是查询？如果是，可以选择MyISAM，</p></li><li><p>有读也有写，则选择 InnoDB</p></li></ul></div><p>MySQL如何指定存储引擎？</p><ol><li>创建表时指定存储引擎</li></ol><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> employees</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    employee_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    -- ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) ENGINE </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> InnoDB;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>修改现有表的存储引擎</li></ol><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees ENGINE </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> MyISAM;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>设置默认存储引擎<br> 在 MySQL 的配置文件（通常是 my.cnf 或 my.ini）中设置默认的存储引擎</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[mysqld]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">default-storage-engine</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> InnoDB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以通过 SQL 语句设置默认存储引擎: <code>SET GLOBAL default_storage_engine = InnoDB;</code></p><div class="hint-container info"><p class="hint-container-title">查看默认存储引擎</p><p>可以使用 SHOW VARIABLES 语句来查看当前的默认存储引擎</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW VARIABLES </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LIKE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;default_storage_engine&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可以使用 SHOW CREATE TABLE 语句来查看特定表的存储引擎</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SHOW</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CREATE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TABLE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><h3 id="索引的分类和创建" tabindex="-1"><a class="header-anchor" href="#索引的分类和创建"><span>索引的分类和创建</span></a></h3><ul><li><p>主键索引: 主键自带索引效果，也就意味着通过主键来查询表中的记录，性能是非常好的</p></li><li><p>普通索引:为普通列创建的索引。创建索引的命令∶</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> index</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 索引名称</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 表名(列名) </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> index</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>唯一索引∶ 就像是唯一列，列中的数据是唯一的。比普通索引的性能要好</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> unique index</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 索引名称</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 表名(列名)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> unique index</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_unique_name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>联合索引(组合索引)∶ 一次性为表中的多个字段一起创建索引(一个联合索引建议不要超过5个列)</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> index</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 索引名称</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 表(列1,列2,列3, ...)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> index</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> idx_name_age_position</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> employees(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, age, position);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>全文索引：进行查询的时候，数据源可能来自于不同的字段或者不同的表。MyISAM存储引擎支持全文索引</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">注意：在实际生产环境中，并不会使用MySQL提供的MyISAM存储引擎的全文索引功能来是实现全文查找。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">而是会使用第三方的搜索引擎中间件比如</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> `</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ElasticSearch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">推荐</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">、</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Solr</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 等。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><div class="hint-container info"><p class="hint-container-title">MySQL中创建/删除索引的方式</p><p>创建索引的三种方式：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 第一种方式：在执行create table时创建索引 </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> user_index</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> auto_increment </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">primary key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,    </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 主键索引</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    first_name </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">varchar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">16</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    last_name </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">varchar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">16</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id_card </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">varchar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">18</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    information </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">225</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    key</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(first_name,last_name),     </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 联合索引 （索引名为第一列的列名）</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    unique</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(id_card),                </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 唯一索引 （只有一列时索引名与列名一致）</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    fulltext</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(information)           </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 全文索引</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    -- 还可以用如下方式：</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    index</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> index_first_name(first_name) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">using</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> btree </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 第二种方式：使用Alter table命令去增加索引</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">alter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_name </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">add</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> index</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  index_name(column_list);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 第三种方式：使用create index命令来创建</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> index</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> index_name</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_name(column_list);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>删除索引可以通过 <code>DROP INDEX</code> 语句或 <code>alter table</code>来完成：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">DROP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> INDEX</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> index_name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ON</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">alter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表名</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  drop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> index</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 索引名</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看表的全部索引</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">show</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> index</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表名</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="使用explain" tabindex="-1"><a class="header-anchor" href="#使用explain"><span>使用EXPLAIN</span></a></h3><p>在 SQL语句 前面加上 <code>explain</code> 关键字，MySQL 就不会真正去执行这条语句，而是模拟优化器执行 SQL 查询语句，最后会输出一系列的指标告诉我们这条语句的性能如何。</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EXPLAIN </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[EXTENDED]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> query;   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- `EXPLAIN`：显示查询的执行计划。 </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                            -- `EXTENDED`：可选参数，显示更详细的执行计划信息。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">EXPLAIN 输出的字段及其含义</p><ol><li><p><strong>id</strong>：查询的标识符，表示查询的顺序。</p><ul><li>ID 越大的组，其执行优先级越高。ID 相同的为一组，其执行优先级按照其顺序由上到下</li><li>如果一个查询中有子查询，每个子查询会有一个独立的 id。</li></ul></li><li><p><strong>select_type</strong>：查询的类型，常见的值包括：</p><ul><li><code>SIMPLE</code>：简单查询，不包含子查询或 UNION。</li><li><code>PRIMARY</code>：最外层的查询。最外层查询会被标记为主查询</li><li><code>SUBQUERY</code>：子查询中的第一个 SELECT。</li><li><code>DERIVED</code>：派生表中的第一个 SELECT（即在 FROM 子句中出现的子查询）。</li><li><code>UNION</code>：UNION 中的第二个或后面的 SELECT。</li><li><code>DEPENDENT UNION</code>：依赖于外部查询的 UNION 中的第二个或后面的 SELECT。</li><li><code>UNCACHEABLE SUBQUERY</code>：不可缓存的子查询。</li></ul></li><li><p><strong>table</strong>：当前查询引用的表名。</p></li><li><p><strong>partitions</strong>：匹配的分区（如果表被分区）。</p></li><li><p><strong>type</strong>：访问类型，表示 MySQL 使用的连接类型，常见的值包括：</p><ul><li><code>system</code>：表只有一行记录，这是常量表。</li><li><code>const</code>：表最多只有一个匹配行，读取常数次，通常用于主键或唯一索引。</li><li><code>eq_ref</code>：唯一索引扫描，通常用于主键或唯一索引。</li><li><code>ref</code>：非唯一索引扫描，返回所有匹配某个值的行。</li><li><code>range</code>：索引范围扫描，例如 <code>BETWEEN</code>、<code>&gt;</code> 等。</li><li><code>index</code>：索引扫描。</li><li><code>index_merge</code>: 索引合并,指对多个索引分别进行条件扫描,然后将它们各自的结果进行合并</li><li><code>ALL</code>：全表扫描。</li><li><code>null</code>： 表示 MySQL 能够在优化阶段分解查询语句，在执行阶段用不着再访问表或索引</li></ul></li><li><p><strong>possible_keys</strong>：可能使用的索引列表。</p></li><li><p><strong>key</strong>：实际使用的索引。</p></li><li><p><strong>key_len</strong>：使用索引的长度。长度越短，索引越有效。</p></li><li><p><strong>ref</strong>：与索引比较的列或常量。</p></li><li><p><strong>rows</strong>：根据表统计信息和索引选择情况，估算出的访问行数。</p></li><li><p><strong>filtered</strong>： 表示通过索引过滤后的行数占总行数的百分比。</p></li><li><p><strong>Extra</strong>：包含额外的信息，常见的值包括：</p><ul><li><code>Using where</code>：使用 WHERE 子句进行过滤。</li><li><code>Using index</code>：使用覆盖索引，不需要回表。</li><li><code>Using temporary</code>：使用临时表。</li><li><code>Using filesort</code>：使用文件排序。</li><li><code>Using join buffer</code>：使用连接缓冲区。</li><li><code>Impossible WHERE</code>：WHERE 子句总是返回 FALSE，不会有任何结果。</li><li><code>No tables used</code>：查询中没有表，例如 <code>SELECT 1</code>。</li></ul></li></ol></div><p>通过 <code>EXPLAIN</code> 工具，可以深入了解查询的执行计划，从而优化查询性能。<br> 更多更详细的信息参考：<a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html" target="_blank" rel="noopener noreferrer">EXPLAIN</a></p><h3 id="开启慢查询日志" tabindex="-1"><a class="header-anchor" href="#开启慢查询日志"><span>开启慢查询日志</span></a></h3><p>MySQL 的慢查询日志（Slow Query Log）是一个非常有用的工具，可以帮助你识别那些执行时间较长的查询，从而优化数据库性能。</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-956-0" aria-selected="true">通过配置文件开启</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-956-1" aria-selected="false">通过动态配置开启</button></div><!--[--><div class="vp-tab active" id="tab-956-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">通过配置文件开启</div><!--[--><p>编辑 MySQL 的配置文件（通常是 <code>my.cnf</code> 或 <code>my.ini</code>），添加或修改以下配置项：</p><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" data-title="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[mysqld]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 开启慢查询日志</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">slow_query_log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 指定慢查询日志文件的路径</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">slow_query_log_file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> /var/log/mysql/slow-query.log</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置慢查询的阈值（单位：秒，默认为10s）</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">long_query_time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 记录不使用索引的查询</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">log_queries_not_using_indexes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>保存配置文件后，重启 MySQL 服务使配置生效：</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mysql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-956-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">通过动态配置开启</div><!--[--><p>如果你不想重启 MySQL 服务，可以通过动态配置来开启慢查询日志。登录到 MySQL 并执行以下命令：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 开启慢查询日志</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> slow_query_log </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ON&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 指定慢查询日志文件的路径</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> slow_query_log_file </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/var/log/mysql/slow-query.log&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 设置慢查询的阈值（单位：秒）</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> long_query_time </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 记录不使用索引的查询</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> log_queries_not_using_indexes </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>慢查询日志文件通常是一个文本文件，你可以使用文本编辑器或命令行工具来查看。</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">less</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/log/mysql/slow-query.log</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 或者使用 `tail` 命令查看最近的慢查询记录：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tail</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/log/mysql/slow-query.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>MySQL 提供了一个工具 <code>mysqldumpslow</code> 来分析慢查询日志。这个工具可以帮助你汇总和分析慢查询日志，找出最耗时的查询。</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mysqldumpslow</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/log/mysql/slow-query.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>也可以使用第三方工具如 <code>pt-query-digest</code>（Percona Toolkit 的一部分）来分析慢查询日志：</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pt-query-digest</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/log/mysql/slow-query.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="索引常见问题汇总" tabindex="-1"><a class="header-anchor" href="#索引常见问题汇总"><span>索引常见问题汇总</span></a></h2><h3 id="使用自增主键" tabindex="-1"><a class="header-anchor" href="#使用自增主键"><span>使用自增主键</span></a></h3><p>数据库为什么定义主键，并且在MySQL中使用推荐使用主键自增的策略？</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">为什么要自定义主键：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">因为假如不自定义主键，那么在InnoDB中，也会维护一个隐藏的列来当做主键，这样就丢失了主键索引树的性能。</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">为什么要使用主键自增的策略呢？</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">因为在插入的过程中，需要经过 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`分类、提取`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (树的旋转) 等步骤，如果使用主键自增的策略，那么永远只会影响到索引树右边的结构，这样对整个B+树的结构影响是有限的，可以提高插入的效率</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="索引越多越好" tabindex="-1"><a class="header-anchor" href="#索引越多越好"><span>索引越多越好？</span></a></h3><p>索引性能这么好，是不是一个表建立的索引越多越好？</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">不是。一个表中的索引建立多了会影响增删改的性能。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">在企业中，对于单表来说，建立几个索引是合适的呢？不同的企业可能有不同的规范，一般默认不超过五个。即默认声明的索引列不超过五列。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">. innodb 默认页大小</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">. 非聚集索引中、非唯一列的 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 只包含当前列信息吗？ </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">根据 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`show index from table_name;`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 的查询结果来看确实如此，那这个索引列有多个重复值时，是如何存储的呢？</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">我原本的猜测是叶子结点存储了多个相关的主键信息</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">但有的书中有这样的描述：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    对于二级非唯一索引而言，因为只有索引列本身再加上主键列才能保证索引记录是唯一的，</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    所以这二者合起来才能构成我们所说的“键”，而“值”就为空了，</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    也就是说，二级非唯一索引中，在记录构成方面，非叶子节点只是比叶子节点多了一个PageNo指针信息。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">也就是说 主键 + 这个索引列 一起构成了 索引树中的 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ？....</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">. innodb中为什么要采用 聚集索引 ，这样导致回表时的性能消耗（虽然能通过联合索引避免回表、但这样做本身也需要权衡相关查询语句的使用频率和索引带来影响）和MyISAM中（单独存储数据）必然进行一次IO的消耗相比，差距大吗？</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">有相关解释是说MyISAM中的这种方式必然会进行一次IO, 是这样吗？</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">复杂点的情形下，当非聚集索引命中多条记录时：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	Innodb：可能导致回表，会根据主键进行多次聚集索引查询</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	MyISAM: 多次的随机IO?</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">innodb这样的策略是在 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`可能导致回表`</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 和 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`必然进行IO 之中的选择吗？</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://image.ventix.top/java/image-20220326090301653.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://image.ventix.top/java/image-20220326090335787.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://image.ventix.top/java/image-20220326090348362.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/ventixy/notebook/edit/main/src/java/database/db/mysql-index.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: msdrizzle@outlook.com">drizzle</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/java/database/db/Transaction.html" aria-label="事务与锁机制"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->事务与锁机制</div></a><a class="route-link auto-link next" href="/java/database/db/redis.html" aria-label="Redis数据缓存"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Redis数据缓存<!----></div></a></nav><div id="vp-comment" class="giscus-wrapper input-top" style="display:block;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Default footer</div><div class="vp-copyright">Copyright © 2025 ventixy </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-D2UzjgoV.js" defer></script>
  </body>
</html>
