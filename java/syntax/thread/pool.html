<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://x.app/java/syntax/thread/pool.html"><meta property="og:site_name" content="doc"><meta property="og:title" content="Javaçº¿ç¨‹æ± "><meta property="og:description" content="Javaçº¿ç¨‹æ± æ¡†æ¶ çº¿ç¨‹æ± æ˜¯ä¸€ç§é¢„å…ˆåˆ›å»ºä¸€å®šæ•°é‡çº¿ç¨‹çš„æœºåˆ¶ï¼Œè¿™äº›çº¿ç¨‹åœ¨éœ€è¦æ—¶å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œè€Œä¸æ˜¯æ¯æ¬¡ä»»åŠ¡æ¥ä¸´æ—¶éƒ½åˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚çº¿ç¨‹æ± ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œå‡å°‘äº†åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ï¼ŒåŒæ—¶å¯ä»¥æ§åˆ¶å¹¶å‘çš„æ•°é‡ï¼Œé¿å…è¿‡å¤šçº¿ç¨‹å¸¦æ¥çš„èµ„æºç«äº‰å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ã€‚ Executor Java 5ä¸­å¼•å…¥äº†Executoræ¡†æ¶ï¼Œå…¶å†…éƒ¨ä½¿ç”¨äº†çº¿ç¨‹æ± æœºåˆ¶ï¼Œå®ƒåœ¨java.uti..."><meta property="og:type" content="article"><meta property="og:image" content="https://image.ventix.top/java/image-20220224084847444.png"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2025-01-10T15:19:41.000Z"><meta property="article:author" content="ventixy"><meta property="article:modified_time" content="2025-01-10T15:19:41.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Javaçº¿ç¨‹æ± ","image":["https://image.ventix.top/java/image-20220224084847444.png","https://image.ventix.top/java/image-20220224083333946.png","https://image.ventix.top/java/image-20220224083833100.png"],"dateModified":"2025-01-10T15:19:41.000Z","author":[{"@type":"Person","name":"ventixy","url":"https://www.ventix.top"}]}</script><link rel="icon" href="/jav.ico"><title>Javaçº¿ç¨‹æ±  | doc</title><meta name="description" content="Javaçº¿ç¨‹æ± æ¡†æ¶ çº¿ç¨‹æ± æ˜¯ä¸€ç§é¢„å…ˆåˆ›å»ºä¸€å®šæ•°é‡çº¿ç¨‹çš„æœºåˆ¶ï¼Œè¿™äº›çº¿ç¨‹åœ¨éœ€è¦æ—¶å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œè€Œä¸æ˜¯æ¯æ¬¡ä»»åŠ¡æ¥ä¸´æ—¶éƒ½åˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚çº¿ç¨‹æ± ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œå‡å°‘äº†åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ï¼ŒåŒæ—¶å¯ä»¥æ§åˆ¶å¹¶å‘çš„æ•°é‡ï¼Œé¿å…è¿‡å¤šçº¿ç¨‹å¸¦æ¥çš„èµ„æºç«äº‰å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ã€‚ Executor Java 5ä¸­å¼•å…¥äº†Executoræ¡†æ¶ï¼Œå…¶å†…éƒ¨ä½¿ç”¨äº†çº¿ç¨‹æ± æœºåˆ¶ï¼Œå®ƒåœ¨java.uti...">
    <link rel="preload" href="/assets/style-DlWEdz0Y.css" as="style"><link rel="stylesheet" href="/assets/style-DlWEdz0Y.css">
    <link rel="modulepreload" href="/assets/app-BIf1prCB.js"><link rel="modulepreload" href="/assets/pool.html-C4l96kNF.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-D_Gccf0O.js" as="script"><link rel="prefetch" href="/assets/blog.html-Gm1y7FKT.js" as="script"><link rel="prefetch" href="/assets/intro.html-DQrqJB7l.js" as="script"><link rel="prefetch" href="/assets/index.html-Bu-JCK_K.js" as="script"><link rel="prefetch" href="/assets/èµ„æºåˆ†äº«.html-DSx2kyWQ.js" as="script"><link rel="prefetch" href="/assets/index.html-ZRA65c_j.js" as="script"><link rel="prefetch" href="/assets/index.html-B48ENSGZ.js" as="script"><link rel="prefetch" href="/assets/index.html-C-mZ-QpM.js" as="script"><link rel="prefetch" href="/assets/Gradle.html-C3ZICehV.js" as="script"><link rel="prefetch" href="/assets/index.html-DMrBut2w.js" as="script"><link rel="prefetch" href="/assets/maven.html-BJtlpsIF.js" as="script"><link rel="prefetch" href="/assets/theme.html-BzGLYrPl.js" as="script"><link rel="prefetch" href="/assets/index.html-C38kk6Ap.js" as="script"><link rel="prefetch" href="/assets/index.html-7ql2OhlE.js" as="script"><link rel="prefetch" href="/assets/index.html-C8AMgYuR.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-B-Tzf-Jt.js" as="script"><link rel="prefetch" href="/assets/mysql.html-Dhme7L6a.js" as="script"><link rel="prefetch" href="/assets/redis.html-DJdk4I_X.js" as="script"><link rel="prefetch" href="/assets/security.html-CQiT75OC.js" as="script"><link rel="prefetch" href="/assets/spring.html-D2sM1_DW.js" as="script"><link rel="prefetch" href="/assets/springboot.html-Awz7aKZ0.js" as="script"><link rel="prefetch" href="/assets/index.html-CV1PIKyG.js" as="script"><link rel="prefetch" href="/assets/base.html-XV6qELre.js" as="script"><link rel="prefetch" href="/assets/collect.html-1OoB3E_k.js" as="script"><link rel="prefetch" href="/assets/concurrency.html-rYLBh7xx.js" as="script"><link rel="prefetch" href="/assets/jvm.html-CFGQPaY-.js" as="script"><link rel="prefetch" href="/assets/index.html-VHpZSUBp.js" as="script"><link rel="prefetch" href="/assets/es.html-DLOE_wtH.js" as="script"><link rel="prefetch" href="/assets/rocketmq.html-rmRgeAML.js" as="script"><link rel="prefetch" href="/assets/sys.html-DJhKkOyc.js" as="script"><link rel="prefetch" href="/assets/index.html-D4W6EmjA.js" as="script"><link rel="prefetch" href="/assets/idea.html-CT1QYrdh.js" as="script"><link rel="prefetch" href="/assets/mac.html-D4rWdMGH.js" as="script"><link rel="prefetch" href="/assets/picgo.html-BHpWNbs5.js" as="script"><link rel="prefetch" href="/assets/website.html-DbLD_mix.js" as="script"><link rel="prefetch" href="/assets/windows.html-DNpDYj74.js" as="script"><link rel="prefetch" href="/assets/index.html-BdDhDVAX.js" as="script"><link rel="prefetch" href="/assets/encoding.html-Bi1AG84R.js" as="script"><link rel="prefetch" href="/assets/harddisk.html-DiAIfoUK.js" as="script"><link rel="prefetch" href="/assets/index.html-CEpsSMjb.js" as="script"><link rel="prefetch" href="/assets/mysql-binlog.html-rVxrf5kg.js" as="script"><link rel="prefetch" href="/assets/mysql-lock.html-BlNPYVJc.js" as="script"><link rel="prefetch" href="/assets/mysql.html-DARJe7CI.js" as="script"><link rel="prefetch" href="/assets/index.html-C1wPAhfz.js" as="script"><link rel="prefetch" href="/assets/env.html-DVCmlUT7.js" as="script"><link rel="prefetch" href="/assets/history.html-dmTAbhc6.js" as="script"><link rel="prefetch" href="/assets/jar.html-SnPs_QGV.js" as="script"><link rel="prefetch" href="/assets/index.html-CoIw9hhh.js" as="script"><link rel="prefetch" href="/assets/k8s.html-CsAd0rs-.js" as="script"><link rel="prefetch" href="/assets/ks-install.html-DmBemnYO.js" as="script"><link rel="prefetch" href="/assets/vm.html-CnjRO9J2.js" as="script"><link rel="prefetch" href="/assets/index.html-COzkiiu9.js" as="script"><link rel="prefetch" href="/assets/index.html-orKQKkXq.js" as="script"><link rel="prefetch" href="/assets/index.html-ZouV_Uw0.js" as="script"><link rel="prefetch" href="/assets/index.html-B9ssFl0q.js" as="script"><link rel="prefetch" href="/assets/index.html-Ck4Is5-m.js" as="script"><link rel="prefetch" href="/assets/springboot.html-ChIHS02F.js" as="script"><link rel="prefetch" href="/assets/index.html-CLwxX5fe.js" as="script"><link rel="prefetch" href="/assets/index.html-DK5Lw6Va.js" as="script"><link rel="prefetch" href="/assets/begin.html-mEL_tNuA.js" as="script"><link rel="prefetch" href="/assets/index.html-CcmgPOr8.js" as="script"><link rel="prefetch" href="/assets/index.html-BzCxz3TA.js" as="script"><link rel="prefetch" href="/assets/index.html-DRlpWxpI.js" as="script"><link rel="prefetch" href="/assets/pywin32.html-DMn1pm0_.js" as="script"><link rel="prefetch" href="/assets/index.html-CI-sTSo0.js" as="script"><link rel="prefetch" href="/assets/damb.html-CLxiyc_S.js" as="script"><link rel="prefetch" href="/assets/sd.html-DyoblTAV.js" as="script"><link rel="prefetch" href="/assets/yolo.html-D_HM0S8T.js" as="script"><link rel="prefetch" href="/assets/index.html-SKgO_RTS.js" as="script"><link rel="prefetch" href="/assets/env.html-COLrb2A-.js" as="script"><link rel="prefetch" href="/assets/Linux.html-BRPwySMT.js" as="script"><link rel="prefetch" href="/assets/index.html-BJ29meyg.js" as="script"><link rel="prefetch" href="/assets/file.html-1xmGj074.js" as="script"><link rel="prefetch" href="/assets/setting.html-C2i9PPMl.js" as="script"><link rel="prefetch" href="/assets/shell.html-D-MtHBc5.js" as="script"><link rel="prefetch" href="/assets/Docker.html-Hv5vk9U-.js" as="script"><link rel="prefetch" href="/assets/index.html-BeUMrlPm.js" as="script"><link rel="prefetch" href="/assets/k8s.html-CwPBOzIw.js" as="script"><link rel="prefetch" href="/assets/index.html-BpSv7SdT.js" as="script"><link rel="prefetch" href="/assets/git.html-7_H9HzHe.js" as="script"><link rel="prefetch" href="/assets/gitlab.html-DBl7AURq.js" as="script"><link rel="prefetch" href="/assets/jenkins.html-CDIfjOgP.js" as="script"><link rel="prefetch" href="/assets/index.html-78H7DxJJ.js" as="script"><link rel="prefetch" href="/assets/index.html-CRwM--a4.js" as="script"><link rel="prefetch" href="/assets/index.html-Cz4N558o.js" as="script"><link rel="prefetch" href="/assets/index.html-DZiZ_73j.js" as="script"><link rel="prefetch" href="/assets/Architecture.html-S8vhJ1sc.js" as="script"><link rel="prefetch" href="/assets/index.html-D9SRBgmh.js" as="script"><link rel="prefetch" href="/assets/Transaction.html-GwcGDMVd.js" as="script"><link rel="prefetch" href="/assets/mysql-index.html-DipJZC_B.js" as="script"><link rel="prefetch" href="/assets/redis-java.html-CP6ONSGC.js" as="script"><link rel="prefetch" href="/assets/redis.html-BJUhI-CC.js" as="script"><link rel="prefetch" href="/assets/sql.html-BAU83QOo.js" as="script"><link rel="prefetch" href="/assets/Hibernate.html-D-RWn4cd.js" as="script"><link rel="prefetch" href="/assets/index.html-ar6mcGfa.js" as="script"><link rel="prefetch" href="/assets/generator.html-dwcdXAmV.js" as="script"><link rel="prefetch" href="/assets/mybatis-resource.html-DA196CJX.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-DmsLVINq.js" as="script"><link rel="prefetch" href="/assets/tk-mybatis.html-Ct01VF4J.js" as="script"><link rel="prefetch" href="/assets/index.html-DTWnLCWG.js" as="script"><link rel="prefetch" href="/assets/Servlet.html-WqqvWUrK.js" as="script"><link rel="prefetch" href="/assets/http.html-CFU2AdXv.js" as="script"><link rel="prefetch" href="/assets/jsp.html-BzXdiRJt.js" as="script"><link rel="prefetch" href="/assets/mvc.html-B8wcZt8V.js" as="script"><link rel="prefetch" href="/assets/nginx.html-Zi_TFA2z.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-BlY4N1_q.js" as="script"><link rel="prefetch" href="/assets/index.html-DXKBqPSG.js" as="script"><link rel="prefetch" href="/assets/crossDomain.html-CHMIIqPG.js" as="script"><link rel="prefetch" href="/assets/excel.html-Mt6-0Al6.js" as="script"><link rel="prefetch" href="/assets/log.html-Ds1b1bXh.js" as="script"><link rel="prefetch" href="/assets/shiro.html-sySYEzX_.js" as="script"><link rel="prefetch" href="/assets/index.html-D2exUOBk.js" as="script"><link rel="prefetch" href="/assets/design.html-C13gW5qP.js" as="script"><link rel="prefetch" href="/assets/life.html-BUT_NCWx.js" as="script"><link rel="prefetch" href="/assets/mvc-core.html-HFxDT06X.js" as="script"><link rel="prefetch" href="/assets/sec.html-DNcGaiQU.js" as="script"><link rel="prefetch" href="/assets/spring.html-D_K6qOL4.js" as="script"><link rel="prefetch" href="/assets/springboot.html-B7R_h8FR.js" as="script"><link rel="prefetch" href="/assets/springmvc.html-zgTctACZ.js" as="script"><link rel="prefetch" href="/assets/transaction.html-0iS4b50w.js" as="script"><link rel="prefetch" href="/assets/index.html-BdBaiFtR.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-18y5dZ9s.js" as="script"><link rel="prefetch" href="/assets/RockMQ.html-BmHwKX3Q.js" as="script"><link rel="prefetch" href="/assets/Sentinel.html-RLKoqp8e.js" as="script"><link rel="prefetch" href="/assets/dubbo.html-BTRSyPT_.js" as="script"><link rel="prefetch" href="/assets/es.html-TRo124K9.js" as="script"><link rel="prefetch" href="/assets/eureka.html-BcoIiEOZ.js" as="script"><link rel="prefetch" href="/assets/gateway.html-ZtQC7Fuv.js" as="script"><link rel="prefetch" href="/assets/hystrix.html-DyEAB2--.js" as="script"><link rel="prefetch" href="/assets/kafka.html-Dd92dr8J.js" as="script"><link rel="prefetch" href="/assets/nacos.html-C4wk2gi7.js" as="script"><link rel="prefetch" href="/assets/zookeeper.html-Agvz_WJw.js" as="script"><link rel="prefetch" href="/assets/index.html-DwOSOO-V.js" as="script"><link rel="prefetch" href="/assets/cron.html-B2Wb7Shj.js" as="script"><link rel="prefetch" href="/assets/db.html-C7Cu8gpM.js" as="script"><link rel="prefetch" href="/assets/dup.html-BJL2Y2Hm.js" as="script"><link rel="prefetch" href="/assets/lock.html-CS6UO0OY.js" as="script"><link rel="prefetch" href="/assets/redis.html-CegFqUtW.js" as="script"><link rel="prefetch" href="/assets/transac.html-fxhw1l3j.js" as="script"><link rel="prefetch" href="/assets/walk.html-D0j-OdFT.js" as="script"><link rel="prefetch" href="/assets/HashMapæºç åˆ†æ.html-DpjFfYfA.js" as="script"><link rel="prefetch" href="/assets/JavaåŸºç¡€.html-CJ4FxTzh.js" as="script"><link rel="prefetch" href="/assets/Javaå¸¸ç”¨ç±»åº“.html-DJl2Pqrj.js" as="script"><link rel="prefetch" href="/assets/Javaé¢å‘å¯¹è±¡.html-4WouPUjO.js" as="script"><link rel="prefetch" href="/assets/index.html-a4Flj1cQ.js" as="script"><link rel="prefetch" href="/assets/collection.html-CiP4UG5J.js" as="script"><link rel="prefetch" href="/assets/generics.html-Cx9fCtWL.js" as="script"><link rel="prefetch" href="/assets/javaIO.html-BhX2Nre5.js" as="script"><link rel="prefetch" href="/assets/setå’Œmap.html-BYv07YdS.js" as="script"><link rel="prefetch" href="/assets/æ•°ç»„å’Œå­—ç¬¦ä¸².html-DKR_6Nyi.js" as="script"><link rel="prefetch" href="/assets/index.html-Cdgq6HE5.js" as="script"><link rel="prefetch" href="/assets/netty.html-DeN55czi.js" as="script"><link rel="prefetch" href="/assets/nio.html-CxHRdZeF.js" as="script"><link rel="prefetch" href="/assets/socket.html-eoFo_dhp.js" as="script"><link rel="prefetch" href="/assets/theory.html-BYiknKmu.js" as="script"><link rel="prefetch" href="/assets/Annotation.html-DYGSSLbY.js" as="script"><link rel="prefetch" href="/assets/Enum.html-Dau7i0sE.js" as="script"><link rel="prefetch" href="/assets/Jvmå†…å­˜ç®¡ç†.html-Bxa49wtM.js" as="script"><link rel="prefetch" href="/assets/Jvmç±»åŠ è½½.html-C4UbBON2.js" as="script"><link rel="prefetch" href="/assets/Lambda.html-DxwdBfj3.js" as="script"><link rel="prefetch" href="/assets/index.html-c7e_yLJ8.js" as="script"><link rel="prefetch" href="/assets/Reflection.html-CCjCSTPK.js" as="script"><link rel="prefetch" href="/assets/Stream.html-Bv6w0XVw.js" as="script"><link rel="prefetch" href="/assets/bytecode.html-CyBpVnDD.js" as="script"><link rel="prefetch" href="/assets/pt.html-BzKSfhzT.js" as="script"><link rel="prefetch" href="/assets/index.html-DAemcJyL.js" as="script"><link rel="prefetch" href="/assets/lock.html-DdVg6rSs.js" as="script"><link rel="prefetch" href="/assets/thread.html-D67w-7Cv.js" as="script"><link rel="prefetch" href="/assets/tool.html-Dj4KmJAZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DYw8VBFs.js" as="script"><link rel="prefetch" href="/assets/base.html-BEzzNiOi.js" as="script"><link rel="prefetch" href="/assets/numpy.html-kWX133y0.js" as="script"><link rel="prefetch" href="/assets/opencv.html-1iEfyJaR.js" as="script"><link rel="prefetch" href="/assets/pillow.html-DOYw3QQb.js" as="script"><link rel="prefetch" href="/assets/python.html-DYxzcaP5.js" as="script"><link rel="prefetch" href="/assets/index.html-BbTTaslr.js" as="script"><link rel="prefetch" href="/assets/base.html-Cii6Df7I.js" as="script"><link rel="prefetch" href="/assets/data.html-B0tuVj_B.js" as="script"><link rel="prefetch" href="/assets/file.html-DtJwtVS7.js" as="script"><link rel="prefetch" href="/assets/function.html-CgUZzewS.js" as="script"><link rel="prefetch" href="/assets/oop.html-DNB99fRU.js" as="script"><link rel="prefetch" href="/assets/index.html-BycKG-7U.js" as="script"><link rel="prefetch" href="/assets/numpy.html-BhCNB0Ge.js" as="script"><link rel="prefetch" href="/assets/pandas.html-FGh5q56X.js" as="script"><link rel="prefetch" href="/assets/index.html-Bt5qsVX_.js" as="script"><link rel="prefetch" href="/assets/css.html-D0E5lPbD.js" as="script"><link rel="prefetch" href="/assets/css2.html-Dlcn_hX-.js" as="script"><link rel="prefetch" href="/assets/css3.html-HfhJx88k.js" as="script"><link rel="prefetch" href="/assets/css4.html-Br8e7dzP.js" as="script"><link rel="prefetch" href="/assets/index.html-DobmO4B4.js" as="script"><link rel="prefetch" href="/assets/html.html-DEoMJtXt.js" as="script"><link rel="prefetch" href="/assets/html5.html-D49kAT9a.js" as="script"><link rel="prefetch" href="/assets/index.html-BZ6kRHf-.js" as="script"><link rel="prefetch" href="/assets/dom.html-BuLWK_rr.js" as="script"><link rel="prefetch" href="/assets/es6.html-BKm8FiA-.js" as="script"><link rel="prefetch" href="/assets/js.html-DjM_XKz1.js" as="script"><link rel="prefetch" href="/assets/js2.html-DDvArk3d.js" as="script"><link rel="prefetch" href="/assets/index.html-BRXij-mp.js" as="script"><link rel="prefetch" href="/assets/ts.html-Crv-5QXo.js" as="script"><link rel="prefetch" href="/assets/ts2.html-4eJvwZHf.js" as="script"><link rel="prefetch" href="/assets/index.html-CJUdiXst.js" as="script"><link rel="prefetch" href="/assets/index.html-BSNPbTy9.js" as="script"><link rel="prefetch" href="/assets/index.html-Cl_lOFhz.js" as="script"><link rel="prefetch" href="/assets/react.html-CSUwzF_6.js" as="script"><link rel="prefetch" href="/assets/ui.html-EmIZcLkw.js" as="script"><link rel="prefetch" href="/assets/vue.html-CUU3GUdf.js" as="script"><link rel="prefetch" href="/assets/index.html-Bk434cF9.js" as="script"><link rel="prefetch" href="/assets/build.html-kw4hoD2o.js" as="script"><link rel="prefetch" href="/assets/format.html-nhjELYtu.js" as="script"><link rel="prefetch" href="/assets/node.html-9S3KaAo2.js" as="script"><link rel="prefetch" href="/assets/index.html-Dy1GYHPs.js" as="script"><link rel="prefetch" href="/assets/baz.html-B2zf48T2.js" as="script"><link rel="prefetch" href="/assets/index.html-CvH2_Nsc.js" as="script"><link rel="prefetch" href="/assets/ray.html-BOeW9dRD.js" as="script"><link rel="prefetch" href="/assets/404.html-C5NgdJSl.js" as="script"><link rel="prefetch" href="/assets/index.html-g8GTW85p.js" as="script"><link rel="prefetch" href="/assets/index.html-BSjE_PPw.js" as="script"><link rel="prefetch" href="/assets/index.html-DF6B5wBW.js" as="script"><link rel="prefetch" href="/assets/index.html-CszHW6mw.js" as="script"><link rel="prefetch" href="/assets/index.html-Nnmsny1A.js" as="script"><link rel="prefetch" href="/assets/index.html-DXVxym4h.js" as="script"><link rel="prefetch" href="/assets/index.html-CSAb2eJE.js" as="script"><link rel="prefetch" href="/assets/index.html-BYkEv9Re.js" as="script"><link rel="prefetch" href="/assets/index.html-K1is7Nr2.js" as="script"><link rel="prefetch" href="/assets/index.html-DahDtuXB.js" as="script"><link rel="prefetch" href="/assets/index.html-B9L8pukw.js" as="script"><link rel="prefetch" href="/assets/index.html-mIAAo9mc.js" as="script"><link rel="prefetch" href="/assets/index.html-s8P1mw1W.js" as="script"><link rel="prefetch" href="/assets/index.html-CzLb8Rlm.js" as="script"><link rel="prefetch" href="/assets/index.html-m3E0l3EC.js" as="script"><link rel="prefetch" href="/assets/index.html-CCoCgUWY.js" as="script"><link rel="prefetch" href="/assets/index.html-abinHgjB.js" as="script"><link rel="prefetch" href="/assets/index.html-DD7i2sUC.js" as="script"><link rel="prefetch" href="/assets/index.html-DTzBCRTD.js" as="script"><link rel="prefetch" href="/assets/index.html--OzBmsFR.js" as="script"><link rel="prefetch" href="/assets/index.html-BeeR5gEP.js" as="script"><link rel="prefetch" href="/assets/index.html-CnV_xmpy.js" as="script"><link rel="prefetch" href="/assets/index.html-CCwcrakV.js" as="script"><link rel="prefetch" href="/assets/index.html-IY5IZELr.js" as="script"><link rel="prefetch" href="/assets/index.html-MNtzTva0.js" as="script"><link rel="prefetch" href="/assets/index.html-RXgOQ5KU.js" as="script"><link rel="prefetch" href="/assets/index.html-DmilU1Ng.js" as="script"><link rel="prefetch" href="/assets/index.html-jnggQ7JY.js" as="script"><link rel="prefetch" href="/assets/index.html-C9tQ-NO2.js" as="script"><link rel="prefetch" href="/assets/index.html-D8u1er2u.js" as="script"><link rel="prefetch" href="/assets/index.html-CZnqU6xN.js" as="script"><link rel="prefetch" href="/assets/index.html-CWeul6l1.js" as="script"><link rel="prefetch" href="/assets/index.html-BFkmR28t.js" as="script"><link rel="prefetch" href="/assets/index.html-DaqI2UXJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BsJloNjd.js" as="script"><link rel="prefetch" href="/assets/index.html-voO4SFFi.js" as="script"><link rel="prefetch" href="/assets/index.html-q7jMdPmB.js" as="script"><link rel="prefetch" href="/assets/index.html-CSLHekoN.js" as="script"><link rel="prefetch" href="/assets/index.html-seei2u96.js" as="script"><link rel="prefetch" href="/assets/index.html-DtTkByWH.js" as="script"><link rel="prefetch" href="/assets/index.html-hre5--u0.js" as="script"><link rel="prefetch" href="/assets/index.html-Ba7IA1MS.js" as="script"><link rel="prefetch" href="/assets/index.html-BNx0xS1_.js" as="script"><link rel="prefetch" href="/assets/index.html-BT8moX6A.js" as="script"><link rel="prefetch" href="/assets/index.html-CUwQokU9.js" as="script"><link rel="prefetch" href="/assets/index.html-CHda1JqK.js" as="script"><link rel="prefetch" href="/assets/index.html-DjobpcAv.js" as="script"><link rel="prefetch" href="/assets/index.html-DumV-EDI.js" as="script"><link rel="prefetch" href="/assets/index.html-DJ_IthGW.js" as="script"><link rel="prefetch" href="/assets/index.html-BTo5oPA4.js" as="script"><link rel="prefetch" href="/assets/index.html-CPHCR_KH.js" as="script"><link rel="prefetch" href="/assets/index.html-BN0PtDrx.js" as="script"><link rel="prefetch" href="/assets/index.html-D4yNlwd5.js" as="script"><link rel="prefetch" href="/assets/index.html-CcOIiwXM.js" as="script"><link rel="prefetch" href="/assets/index.html-aKNwBcTk.js" as="script"><link rel="prefetch" href="/assets/index.html-C5qC_olN.js" as="script"><link rel="prefetch" href="/assets/index.html-DMYU-YhT.js" as="script"><link rel="prefetch" href="/assets/index.html-DF1BlhQI.js" as="script"><link rel="prefetch" href="/assets/index.html-BnHvII77.js" as="script"><link rel="prefetch" href="/assets/giscus-_nrdy_5Y.js" as="script"><link rel="prefetch" href="/assets/flowchart-CAFN9Lqb.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-CfRxULIX.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-CMg0yb1C.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">doc</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog.html" aria-label="Blog"><!--[--><span class="font-icon icon iconfont icon-blog" style=""></span><!--]-->Blog<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/java/" aria-label="Java"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span><!--]-->Java<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/project/" aria-label="Project"><!--[--><span class="font-icon icon iconfont icon-app" style=""></span><!--]-->Project<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/web/" aria-label="Web"><!--[--><span class="font-icon icon iconfont icon-net" style=""></span><!--]-->Web<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/python/" aria-label="Python"><!--[--><span class="font-icon icon iconfont icon-python" style=""></span><!--]-->Python<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Other"><!--[--><span class="font-icon icon iconfont icon-project" style=""></span>Other<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/interview/" aria-label="Javaé¢è¯•é¢˜åº“"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span><!--]-->Javaé¢è¯•é¢˜åº“<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/tool/theme.html" aria-label="Theme-Hope"><!--[--><span class="font-icon icon iconfont icon-web-design" style=""></span><!--]-->Theme-Hope<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/ventixy/notebook" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable active"><span class="font-icon icon iconfont icon-java" style=""></span><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/java/" aria-label="Java Programming"><!---->Java Programming<!----></a><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon iconfont icon-app" style=""></span><span class="vp-sidebar-title">JavaåŸºç¡€åŠæ ¸å¿ƒç‰¹æ€§</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">JavaåŸºç¡€è¯­æ³•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">è¿›é˜¶è¯­æ³•å’ŒJVM</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç½‘ç»œç¼–ç¨‹ä¸é«˜æ€§èƒ½IO</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Javaå¹¶å‘ç¼–ç¨‹</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/java/syntax/thread/thread.html" aria-label="Javaå¤šçº¿ç¨‹åŸºç¡€"><!---->Javaå¤šçº¿ç¨‹åŸºç¡€<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/java/syntax/thread/pool.html" aria-label="Javaçº¿ç¨‹æ± "><!---->Javaçº¿ç¨‹æ± <!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/java/syntax/thread/lock.html" aria-label="çº¿ç¨‹åŒæ­¥ä¸é”æœºåˆ¶"><!---->çº¿ç¨‹åŒæ­¥ä¸é”æœºåˆ¶<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/java/syntax/thread/tool.html" aria-label="å¹¶å‘å·¥å…·ç±»"><!---->å¹¶å‘å·¥å…·ç±»<!----></a></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon iconfont icon-net" style=""></span><span class="vp-sidebar-title">JavaWebåŠå¸¸ç”¨æ¡†æ¶</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">WebåŸºç¡€ä¸å¸¸ç”¨æœåŠ¡å™¨</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spring Framework</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">å…¶ä»–å¸¸ç”¨å·¥å…·å’Œæ¡†æ¶</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon iconfont icon-db" style=""></span><span class="vp-sidebar-title">æ•°æ®åº“ä¸ORMæ¡†æ¶</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">å¸¸ç”¨æ•°æ®åº“</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ORMæ¡†æ¶</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon iconfont icon-microservice" style=""></span><span class="vp-sidebar-title">åˆ†å¸ƒå¼ä¸å¾®æœåŠ¡æ¶æ„</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">å¾®æœåŠ¡æ¡†æ¶å’Œä¸­é—´ä»¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">åˆ†å¸ƒå¼ç³»ç»Ÿé—®é¢˜è§£å†³æ–¹æ¡ˆ</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Javaçº¿ç¨‹æ± </h1><div class="page-info"><span class="page-author-info" aria-label="AuthorğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://www.ventix.top" target="_blank" rel="noopener noreferrer">ventixy</a></span><span property="author" content="ventixy"></span></span><!----><span class="page-date-info" aria-label="Writing DateğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2025-01-10T15:19:41.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 39 min</span><meta property="timeRequired" content="PT39M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#javaçº¿ç¨‹æ± æ¡†æ¶">Javaçº¿ç¨‹æ± æ¡†æ¶</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#executor">Executor</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#executors">Executors</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#çº¿ç¨‹æ± å¿«æ·åˆ›å»ºæ–¹å¼">çº¿ç¨‹æ± å¿«æ·åˆ›å»ºæ–¹å¼</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¼“å­˜çº¿ç¨‹æ± ">ç¼“å­˜çº¿ç¨‹æ± </a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®šé•¿çº¿ç¨‹æ± ">å®šé•¿çº¿ç¨‹æ± </a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å•çº¿ç¨‹çº¿ç¨‹æ± ">å•çº¿ç¨‹çº¿ç¨‹æ± </a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¯è°ƒåº¦çº¿ç¨‹æ± ">å¯è°ƒåº¦çº¿ç¨‹æ± </a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#threadpoolexecutor">ThreadPoolExecutor</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#çº¿ç¨‹æ± å‚æ•°">çº¿ç¨‹æ± å‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#é˜»å¡é˜Ÿåˆ—">é˜»å¡é˜Ÿåˆ—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ‹’ç»ç­–ç•¥">æ‹’ç»ç­–ç•¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è‡ªå®šä¹‰çº¿ç¨‹æ± ">è‡ªå®šä¹‰çº¿ç¨‹æ± </a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#forkjoinpool">ForkJoinPool</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#fork-joinæ¡†æ¶">Fork/Joinæ¡†æ¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¸¸ç”¨æ–¹æ³•">å¸¸ç”¨æ–¹æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨åŠä»£ç ç¤ºä¾‹">ä½¿ç”¨åŠä»£ç ç¤ºä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¦‚ä½•å…³é—­çº¿ç¨‹æ± ">å¦‚ä½•å…³é—­çº¿ç¨‹æ± </a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h2 id="javaçº¿ç¨‹æ± æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#javaçº¿ç¨‹æ± æ¡†æ¶"><span>Javaçº¿ç¨‹æ± æ¡†æ¶</span></a></h2><p>çº¿ç¨‹æ± æ˜¯ä¸€ç§é¢„å…ˆåˆ›å»ºä¸€å®šæ•°é‡çº¿ç¨‹çš„æœºåˆ¶ï¼Œè¿™äº›çº¿ç¨‹åœ¨éœ€è¦æ—¶å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œè€Œä¸æ˜¯æ¯æ¬¡ä»»åŠ¡æ¥ä¸´æ—¶éƒ½åˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚çº¿ç¨‹æ± ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œå‡å°‘äº†åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ï¼ŒåŒæ—¶å¯ä»¥æ§åˆ¶å¹¶å‘çš„æ•°é‡ï¼Œé¿å…è¿‡å¤šçº¿ç¨‹å¸¦æ¥çš„èµ„æºç«äº‰å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ã€‚</p><h3 id="executor" tabindex="-1"><a class="header-anchor" href="#executor"><span>Executor</span></a></h3><p>Java 5ä¸­å¼•å…¥äº†Executoræ¡†æ¶ï¼Œå…¶å†…éƒ¨ä½¿ç”¨äº†çº¿ç¨‹æ± æœºåˆ¶ï¼Œå®ƒåœ¨java.util.cocurrent åŒ…ä¸‹</p><ul><li><p>é€šè¿‡Executoræ¥å¯åŠ¨çº¿ç¨‹æ¯”ä½¿ç”¨Threadçš„startæ–¹æ³•æ›´å¥½ï¼Œæ›´æ˜“ç®¡ç†ï¼Œæ•ˆç‡æ›´å¥½ï¼ˆç”¨çº¿ç¨‹æ± å®ç°ï¼ŒèŠ‚çº¦å¼€é”€ï¼‰</p></li><li><p>Executorçš„å®ç°è¿˜æä¾›äº†å¯¹ç”Ÿå‘½å‘¨æœŸçš„æ”¯æŒï¼Œä»¥åŠç»Ÿè®¡ä¿¡æ¯æ”¶é›†ï¼Œåº”ç”¨ç¨‹åºç®¡ç†æœºåˆ¶å’Œæ€§èƒ½ç›‘è§†ç­‰æœºåˆ¶ã€‚</p></li><li><p>æœ‰åŠ©äºé¿å…thisé€ƒé€¸é—®é¢˜</p><p>thisé€ƒé€¸é—®é¢˜â€”â€”å¦‚æœæˆ‘ä»¬åœ¨æ„é€ å™¨ä¸­å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå› ä¸ºå¦ä¸€ä¸ªä»»åŠ¡å¯èƒ½ä¼šåœ¨æ„é€ å™¨ç»“æŸä¹‹å‰å¼€å§‹æ‰§è¡Œï¼Œæ­¤æ—¶å¯èƒ½ä¼šè®¿é—®åˆ°åˆå§‹åŒ–äº†ä¸€åŠçš„å¯¹è±¡</p></li></ul><img src="https://image.ventix.top/java/image-20211019165336109.png" alt="image-20211019165336109" style="zoom:50%;"><p><strong>Executor ã€ ExecutorService</strong>ï¼š</p><ul><li><p>ExecutorService æ¥å£ç»§æ‰¿äº† Executor æ¥å£ï¼Œæ˜¯ Executor çš„å­æ¥å£ï¼ŒExecutorService è¿˜æä¾›ç”¨æ¥æ§åˆ¶çº¿ç¨‹æ± çš„æ–¹æ³•</p><p>Executor æ¥å£å®šä¹‰äº† <code>execute()</code>æ–¹æ³•ç”¨æ¥æ¥æ”¶ä¸€ä¸ª<code>Runnable</code>æ¥å£çš„å¯¹è±¡ï¼Œ<code>execute()</code> æ–¹æ³•ä¸è¿”å›ä»»ä½•ç»“æœ</p><p>è€Œ ExecutorService æ¥å£ä¸­çš„ <code>submit()</code>æ–¹æ³•å¯ä»¥æ¥å—<code>Runnable</code>å’Œ<code>Callable</code>æ¥å£çš„å¯¹è±¡ï¼Œé€šè¿‡ä¸€ä¸ªFutureå¯¹è±¡è¿”å›è¿ç®—ç»“æœ</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Runnable</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ExecutorService</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Future</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Callable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Future</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Runnable</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Future</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Runnable</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              //å¯åŠ¨ä¸€æ¬¡é¡ºåºå…³é—­ï¼Œæ‰§è¡Œä»¥å‰æäº¤çš„ä»»åŠ¡ï¼Œä½†ä¸æ¥å—æ–°ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">	List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> shutdownNow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> //è¯•å›¾åœæ­¢æ‰€æœ‰æ­£åœ¨æ‰§è¡Œçš„æ´»åŠ¨ä»»åŠ¡ï¼Œæš‚åœå¤„ç†æ­£åœ¨ç­‰å¾…çš„ä»»åŠ¡ï¼Œå¹¶è¿”å›ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="executors" tabindex="-1"><a class="header-anchor" href="#executors"><span>Executors</span></a></h3><p><code>Executors</code> ç±»æä¾›å·¥å‚æ–¹æ³•ç”¨æ¥åˆ›å»ºä¸åŒç±»å‹çš„çº¿ç¨‹æ± ï¼Œä»¥ä¸‹ä¸ºjavaä¸­å¸¸è§çš„å››ç§çº¿ç¨‹æ± ï¼š</p><ul><li><code>Executors.newCachedThreadPool()</code> ï¼šç¼“å­˜çº¿ç¨‹æ± ï¼ˆé•¿åº¦æ— é™åˆ¶ï¼Œè‡ªåŠ¨åˆ›å»ºçº¿ç¨‹ï¼‰</li><li><code>Executors.newFixedThreadPool()</code> ï¼šå®šé•¿çº¿ç¨‹æ±  ï¼ˆçº¿ç¨‹æ± å·²æ»¡æ—¶éœ€è¦ç­‰å¾…ï¼‰</li><li><code>Executors.newSingleThreadExecutor()</code> ï¼šå•çº¿ç¨‹çº¿ç¨‹æ± ï¼ˆæ•ˆæœä¸å®šé•¿çº¿ç¨‹æ±  åˆ›å»ºæ—¶ä¼ å…¥æ•°å€¼1æ•ˆæœä¸€è‡´ï¼‰</li><li><code>Executors.newScheduledThreadPool()</code>ï¼šå‘¨æœŸæ€§ä»»åŠ¡å®šé•¿çº¿ç¨‹æ± </li></ul><h2 id="çº¿ç¨‹æ± å¿«æ·åˆ›å»ºæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ± å¿«æ·åˆ›å»ºæ–¹å¼"><span>çº¿ç¨‹æ± å¿«æ·åˆ›å»ºæ–¹å¼</span></a></h2><h3 id="ç¼“å­˜çº¿ç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#ç¼“å­˜çº¿ç¨‹æ± "><span>ç¼“å­˜çº¿ç¨‹æ± </span></a></h3><p>å¯ç¼“å­˜çº¿ç¨‹æ± ï¼ˆ<code>CachedThreadPool</code>ï¼‰æ˜¯Javaä¸­çš„Executoræ¡†æ¶æä¾›çš„ä¸€ä¸ªçº¿ç¨‹æ± å®ç°ï¼Œé€šè¿‡<code>Executors.newCachedThreadPool()</code>æ–¹æ³•åˆ›å»ºã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ExecutorService</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> newCachedThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MAX_VALUE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 60L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                                  new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SynchronousQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() )</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p><strong>çº¿ç¨‹æ•°é‡åŠ¨æ€è°ƒæ•´</strong>ï¼šå¯ç¼“å­˜çº¿ç¨‹æ± ä¼šæ ¹æ®ä»»åŠ¡çš„æäº¤æƒ…å†µåŠ¨æ€è°ƒæ•´çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡ã€‚å½“æœ‰æ–°ä»»åŠ¡æäº¤æ—¶ï¼Œå¦‚æœå½“å‰çº¿ç¨‹æ± ä¸­æœ‰ç©ºé—²çº¿ç¨‹ï¼Œåˆ™ä¼šå¤ç”¨è¿™äº›çº¿ç¨‹ï¼›å¦‚æœæ²¡æœ‰ç©ºé—²çº¿ç¨‹ï¼Œåˆ™ä¼šåˆ›å»ºæ–°çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ã€‚å½“çº¿ç¨‹ç©ºé—²ä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤60ç§’ï¼‰åï¼Œè¿™äº›çº¿ç¨‹ä¼šè¢«å›æ”¶ä»¥å‡å°‘èµ„æºå ç”¨ã€‚</p></li><li><p><strong>æ— ç•Œé˜Ÿåˆ—</strong>ï¼šå®é™…ä¸Šï¼Œå¯ç¼“å­˜çº¿ç¨‹æ± å¹¶æ²¡æœ‰ä½¿ç”¨å›ºå®šçš„ä»»åŠ¡é˜Ÿåˆ—æ¥å­˜å‚¨å¾…å¤„ç†çš„ä»»åŠ¡ï¼Œè€Œæ˜¯ç›´æ¥åˆ›å»ºæ–°çº¿ç¨‹æ¥å¤„ç†è¶…å‡ºå½“å‰æ´»åŠ¨çº¿ç¨‹æ•°çš„ä»»åŠ¡ï¼Œè¿™åœ¨æŸç§æ„ä¹‰ä¸Šå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ— ç•Œçš„ä»»åŠ¡é˜Ÿåˆ—ã€‚</p></li><li><p><strong>é€‚ç”¨çŸ­æœŸä»»åŠ¡</strong>ï¼šè®¾è®¡ä¸Šï¼Œå¯ç¼“å­˜çº¿ç¨‹æ± éå¸¸é€‚åˆæ‰§è¡Œå¤§é‡çŸ­ç”Ÿå‘½å‘¨æœŸçš„ä»»åŠ¡ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿè¿…é€Ÿåˆ›å»ºæ–°çº¿ç¨‹ä»¥åº”å¯¹ä»»åŠ¡é«˜å³°ï¼Œè€Œåœ¨ä»»åŠ¡è¾ƒå°‘æ—¶åˆèƒ½è‡ªåŠ¨å›æ”¶çº¿ç¨‹ä»¥èŠ‚çœèµ„æºã€‚</p></li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CachedThreadPoolDemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ExecutorService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> pool</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newCachedThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è®¡ç®— 1 + 2 + ... + 1000000 çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Callable</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Callable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> call</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i++) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    result </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Future</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">future</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> pool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> future</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Resultï¼š&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ExecutionException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // get() æ–¹æ³•ä¼šé˜»å¡åé¢çš„æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;After task!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        pool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://image.ventix.top/java/image-20220224084847444.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="hint-container info"><p class="hint-container-title">å¯ç¼“å­˜çº¿ç¨‹æ± çš„ä½¿ç”¨åœºæ™¯å’Œå¼Šç«¯</p><h4 id="ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li><strong>çŸ­æ—¶çªå‘ä»»åŠ¡</strong>ï¼šå½“åº”ç”¨éœ€è¦å¤„ç†å¤§é‡çš„çŸ­æš‚ä¸”çªå‘çš„ä»»åŠ¡ï¼Œä¸”ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿œå°äºåˆ›å»ºçº¿ç¨‹æ‰€éœ€æ—¶é—´æ—¶ï¼Œå¯ç¼“å­˜çº¿ç¨‹æ± èƒ½å¤Ÿé«˜æ•ˆåœ°åº”å¯¹ã€‚</li><li><strong>ä»»åŠ¡é‡ä¸å¯é¢„çŸ¥</strong>ï¼šåœ¨ä»»åŠ¡æ•°é‡ä¸ç¡®å®šï¼Œä¸”å¯èƒ½éšæ—¶é—´æ³¢åŠ¨è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œå¯ç¼“å­˜çº¿ç¨‹æ± èƒ½å¤Ÿè‡ªé€‚åº”åœ°è°ƒæ•´çº¿ç¨‹æ•°é‡ã€‚</li><li><strong>å¿«é€Ÿå“åº”</strong>ï¼šéœ€è¦å¿«é€Ÿå“åº”æ–°ä»»åŠ¡æäº¤çš„åœºæ™¯ï¼Œå¦‚ä¸€äº›äº‹ä»¶å¤„ç†ç³»ç»Ÿæˆ–é«˜ååé‡çš„æœåŠ¡ã€‚</li></ul><h4 id="å¼Šç«¯" tabindex="-1"><a class="header-anchor" href="#å¼Šç«¯"><span>å¼Šç«¯</span></a></h4><ol><li><strong>èµ„æºè€—å°½é£é™©</strong>ï¼šç”±äºå¯ç¼“å­˜çº¿ç¨‹æ± å¯¹çº¿ç¨‹æ•°é‡æ²¡æœ‰æ˜ç¡®çš„ä¸Šé™ï¼Œå¦‚æœæäº¤çš„ä»»åŠ¡æŒç»­ä¸æ–­ä¸”æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œå¯èƒ½ä¼šå¯¼è‡´åˆ›å»ºå¤§é‡çº¿ç¨‹ï¼Œæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œç”šè‡³å¼•èµ·èµ„æºè€—å°½ï¼ˆå¦‚è¾¾åˆ°æ“ä½œç³»ç»Ÿçº§åˆ«çš„çº¿ç¨‹é™åˆ¶ï¼‰ã€‚</li><li><strong>ç¨³å®šæ€§é—®é¢˜</strong>ï¼šå¤§é‡çº¿ç¨‹å¯èƒ½å¯¼è‡´å†…å­˜å ç”¨å¢åŠ ã€CPUä¸Šä¸‹æ–‡åˆ‡æ¢é¢‘ç¹ï¼Œè¿›è€Œå½±å“ç³»ç»Ÿæ•´ä½“æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</li><li><strong>ä¸é€‚åˆé•¿ä»»åŠ¡</strong>ï¼šç”±äºçº¿ç¨‹çš„åˆ›å»ºæˆæœ¬ç›¸å¯¹è¾ƒé«˜ï¼Œä¸”ç©ºé—²çº¿ç¨‹å›æ”¶æœ‰å»¶æ—¶ï¼Œå¦‚æœä»»åŠ¡æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œé¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè¿˜å¯èƒ½å¯¹ç³»ç»Ÿé€ æˆä¸å¿…è¦çš„å‹åŠ›ã€‚</li></ol></div><p>è™½ç„¶å¯ç¼“å­˜çº¿ç¨‹æ± åœ¨å¤„ç†å¤§é‡çŸ­æœŸä»»åŠ¡æ—¶éå¸¸é«˜æ•ˆï¼Œä½†åœ¨ä½¿ç”¨æ—¶éœ€è¦è°¨æ…è¯„ä¼°ä»»åŠ¡çš„æ€§è´¨å’Œæ½œåœ¨çš„èµ„æºæ¶ˆè€—ï¼Œé¿å…å› ä¸å½“ä½¿ç”¨è€Œå¯¼è‡´çš„ç³»ç»Ÿç¨³å®šæ€§é—®é¢˜ã€‚</p><h3 id="å®šé•¿çº¿ç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#å®šé•¿çº¿ç¨‹æ± "><span>å®šé•¿çº¿ç¨‹æ± </span></a></h3><p>å®šé•¿çº¿ç¨‹æ± ï¼ˆ<code>FixedThreadPool</code>ï¼‰é€šè¿‡<code>Executors.newFixedThreadPool(int nThreads)</code>æ–¹æ³•åˆ›å»º</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ExecutorService</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> newFixedThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> nThreads) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(nThreads</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> nThreads</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MILLISECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                                  new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LinkedBlockingQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() )</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p><strong>å›ºå®šçº¿ç¨‹æ•°é‡</strong>ï¼šå®šé•¿çº¿ç¨‹æ± çš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯çº¿ç¨‹æ•°é‡å›ºå®šã€‚åœ¨åˆ›å»ºçº¿ç¨‹æ± æ—¶ï¼Œéœ€è¦æŒ‡å®šçº¿ç¨‹æ± çš„å¤§å°ï¼Œä¹‹åæ— è®ºæäº¤å¤šå°‘ä»»åŠ¡ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡éƒ½ä¸ä¼šæ”¹å˜ã€‚å¦‚æœæŸä¸ªçº¿ç¨‹å› ä¸ºæ‰§è¡Œå¼‚å¸¸è€Œç»“æŸï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çº¿ç¨‹ã€‚</p></li><li><p><strong>ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼šè¶…å‡ºå½“å‰æ´»åŠ¨çº¿ç¨‹æ•°é‡çš„ä»»åŠ¡ä¼šè¢«æ”¾å…¥ä¸€ä¸ªæ— ç•Œçš„ä»»åŠ¡é˜Ÿåˆ—ï¼ˆé€šå¸¸æ˜¯<code>LinkedBlockingQueue</code>ï¼‰ä¸­ç­‰å¾…æ‰§è¡Œã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæ‰€æœ‰çº¿ç¨‹éƒ½åœ¨å¿™ç¢Œï¼Œæ–°ä»»åŠ¡ä¼šæ’é˜Ÿç­‰å¾…ï¼Œç›´åˆ°æœ‰çº¿ç¨‹ç©ºé—²ã€‚</p></li><li><p><strong>ä¿è¯èµ„æºæ§åˆ¶</strong>ï¼šç”±äºçº¿ç¨‹æ•°é‡å›ºå®šï¼Œå®šé•¿çº¿ç¨‹æ± æœ‰åŠ©äºæ§åˆ¶èµ„æºä½¿ç”¨ï¼Œé¿å…äº†çº¿ç¨‹çˆ†ç‚¸çš„é£é™©ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†ç³»ç»Ÿå¼€é”€å’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„é¢‘ç‡ã€‚</p></li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> FixedThreadPoolDemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ExecutorService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> pool</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newFixedThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Runnable</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i++) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;â€”â€”&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        pool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        pool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        pool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://image.ventix.top/java/image-20220224083333946.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="hint-container info"><p class="hint-container-title">å®šé•¿çº¿ç¨‹æ± çš„ä½¿ç”¨åœºæ™¯å’Œå¼Šç«¯</p><h4 id="ä½¿ç”¨åœºæ™¯-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-1"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li><strong>CPUå¯†é›†å‹ä»»åŠ¡</strong>ï¼šå½“ä»»åŠ¡ä¸»è¦æ˜¯è®¡ç®—å¯†é›†å‹ï¼Œå¯¹CPUä¾èµ–è¾ƒé«˜ï¼Œä¸”ä»»åŠ¡æ•°é‡ä¸æ˜¯éå¸¸å¤šæ—¶ï¼Œå›ºå®šå¤§å°çš„çº¿ç¨‹æ± èƒ½å……åˆ†åˆ©ç”¨CPUèµ„æºï¼Œé¿å…è¿‡å¤šçš„çº¿ç¨‹äº‰æŠ¢CPUæ—¶é—´ç‰‡ã€‚</li><li><strong>èµ„æºå—é™ç¯å¢ƒ</strong>ï¼šåœ¨èµ„æºæœ‰é™çš„ç¯å¢ƒä¸‹ï¼Œå°¤å…¶æ˜¯å¯¹çº¿ç¨‹æ•°é‡æœ‰ä¸¥æ ¼è¦æ±‚æ—¶ï¼Œä½¿ç”¨å®šé•¿çº¿ç¨‹æ± å¯ä»¥ç¡®ä¿ä¸ä¼šå› ä¸ºçº¿ç¨‹åˆ›å»ºè¿‡å¤šè€Œå¯¼è‡´èµ„æºè€—å°½ã€‚</li><li><strong>ç¨³å®šå“åº”æ—¶é—´</strong>ï¼šå¯¹äºé‚£äº›éœ€è¦ä¿æŒè¾ƒä¸ºç¨³å®šå“åº”æ—¶é—´çš„æœåŠ¡ï¼Œå›ºå®šæ•°é‡çš„çº¿ç¨‹æ± å¯ä»¥æä¾›è¾ƒä¸ºå¯é¢„æµ‹çš„æ‰§è¡Œæ€§èƒ½ã€‚</li></ul><h4 id="å¼Šç«¯-1" tabindex="-1"><a class="header-anchor" href="#å¼Šç«¯-1"><span>å¼Šç«¯</span></a></h4><ol><li><strong>é˜Ÿåˆ—æº¢å‡ºé£é™©</strong>ï¼šå¦‚æœä»»åŠ¡æäº¤é€Ÿç‡æŒç»­é«˜äºçº¿ç¨‹æ± å¤„ç†èƒ½åŠ›ï¼Œä¸”ä»»åŠ¡é˜Ÿåˆ—æ˜¯æ— ç•Œçš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´é˜Ÿåˆ—æ— é™å¢é•¿ï¼Œæœ€ç»ˆè€—å°½ç³»ç»Ÿå†…å­˜ã€‚</li><li><strong>æ— æ³•è‡ªé€‚åº”è´Ÿè½½å˜åŒ–</strong>ï¼šç”±äºçº¿ç¨‹æ•°é‡å›ºå®šï¼Œå®šé•¿çº¿ç¨‹æ± åœ¨é¢å¯¹ä»»åŠ¡æ•°é‡çš„çªå¢æˆ–çªå‡æ—¶ç¼ºä¹å¼¹æ€§ï¼Œæ— æ³•æ ¹æ®å®é™…å·¥ä½œè´Ÿè½½è‡ªåŠ¨è°ƒæ•´çº¿ç¨‹æ•°é‡ã€‚</li><li><strong>å¯èƒ½å¯¼è‡´é¥¥é¥¿</strong>ï¼šå¦‚æœå­˜åœ¨ä¼˜å…ˆçº§é«˜çš„é•¿ä»»åŠ¡ï¼Œä½ä¼˜å…ˆçº§çš„ä»»åŠ¡å¯èƒ½é•¿æ—¶é—´åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œå‡ºç°ä»»åŠ¡é¥¥é¥¿ç°è±¡ã€‚</li></ol></div><p>å®šé•¿çº¿ç¨‹æ± é€‚ç”¨äºä»»åŠ¡é‡ç›¸å¯¹ç¨³å®šã€å¯¹å“åº”æ—¶é—´å’Œèµ„æºæ§åˆ¶æœ‰ä¸¥æ ¼è¦æ±‚çš„åœºæ™¯ã€‚ç„¶è€Œï¼Œè®¾è®¡æ—¶éœ€è¦è€ƒè™‘ä»»åŠ¡é˜Ÿåˆ—çš„å¤§å°é™åˆ¶ï¼Œä»¥é˜²æ­¢å†…å­˜æº¢å‡ºï¼Œå¹¶ä¸”ç†è§£å…¶åœ¨è´Ÿè½½æ³¢åŠ¨è¾ƒå¤§æ—¶å¯èƒ½å­˜åœ¨çš„å±€é™æ€§ã€‚</p><h3 id="å•çº¿ç¨‹çº¿ç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#å•çº¿ç¨‹çº¿ç¨‹æ± "><span>å•çº¿ç¨‹çº¿ç¨‹æ± </span></a></h3><p>å•çº¿ç¨‹çº¿ç¨‹æ± ï¼ˆ<code>SingleThreadExecutor</code>ï¼‰é€šè¿‡<code>Executors.newSingleThreadExecutor()</code>æ–¹æ³•åˆ›å»º</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ExecutorService</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> newSingleThreadExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> FinalizableDelegatedExecutorService</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MILLISECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                                new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LinkedBlockingQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()) )</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p><strong>å•ä¸ªå·¥ä½œçº¿ç¨‹</strong>ï¼šé¡¾åæ€ä¹‰ï¼Œå•çº¿ç¨‹çº¿ç¨‹æ± ä¸­åªåŒ…å«ä¸€ä¸ªå·¥ä½œçº¿ç¨‹ã€‚æ‰€æœ‰æäº¤çš„ä»»åŠ¡éƒ½ä¼šæŒ‰ç…§æäº¤é¡ºåºä¾æ¬¡è¢«æ‰§è¡Œï¼Œå› æ­¤ä»»åŠ¡æ˜¯ä¸²è¡Œå¤„ç†çš„ã€‚</p></li><li><p><strong>ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼šä¸å®šé•¿çº¿ç¨‹æ± ç±»ä¼¼ï¼Œè¶…å‡ºå½“å‰çº¿ç¨‹å¤„ç†èƒ½åŠ›çš„ä»»åŠ¡ä¼šè¢«åŠ å…¥åˆ°ä¸€ä¸ªæ— ç•Œçš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œé€šå¸¸ä½¿ç”¨çš„æ˜¯<code>LinkedBlockingQueue</code>ã€‚</p></li><li><p><strong>åºåˆ—åŒ–æ‰§è¡Œ</strong>ï¼šç”±äºåªæœ‰ä¸€ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½å°†æŒ‰é¡ºåºæ‰§è¡Œï¼Œè¿™ä¿è¯äº†ä»»åŠ¡ä¹‹é—´çš„é¡ºåºæ€§ï¼Œå¯¹äºéœ€è¦ä¿è¯æ“ä½œé¡ºåºä¸€è‡´æ€§çš„åœºæ™¯éå¸¸æœ‰ç”¨ã€‚</p></li></ol><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>ä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œå•çº¿ç¨‹çº¿ç¨‹æ± å¯ä»¥è¢«è§†ä¸º<mark>å›ºå®šå¤§å°ä¸º1çš„å®šé•¿çº¿ç¨‹æ± </mark>çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚å®ƒç»§æ‰¿äº†å®šé•¿çº¿ç¨‹æ± çš„ä¸€äº›åŸºæœ¬ç‰¹æ€§ï¼Œæ¯”å¦‚çº¿ç¨‹æ•°é‡å›ºå®šã€ä½¿ç”¨æ— ç•Œä»»åŠ¡é˜Ÿåˆ—æ¥å­˜æ”¾è¶…å‡ºçº¿ç¨‹å¤„ç†èƒ½åŠ›çš„ä»»åŠ¡ç­‰ã€‚ä½†å•çº¿ç¨‹çº¿ç¨‹æ± æ›´åŠ ä¸“æ³¨äºå•ä¸€ä»»åŠ¡çš„ä¸²è¡Œæ‰§è¡Œï¼Œå¼ºè°ƒçš„æ˜¯ä»»åŠ¡çš„é¡ºåºå¤„ç†å’Œç®€åŒ–å¹¶å‘æ§åˆ¶çš„å¤æ‚åº¦ï¼Œè€Œéå¹¶è¡Œå¤„ç†èƒ½åŠ›ã€‚</p></div><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SingleThreadExecutorDemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ExecutorService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singleThreadExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newSingleThreadExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Runnable</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i++) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;â€”â€”&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        singleThreadExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        singleThreadExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        singleThreadExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://image.ventix.top/java/image-20220224083833100.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="hint-container info"><p class="hint-container-title">å•çº¿ç¨‹çº¿ç¨‹æ± çš„ä½¿ç”¨åœºæ™¯å’Œå¼Šç«¯</p><h4 id="ä½¿ç”¨åœºæ™¯-2" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-2"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li><strong>æ— éœ€å¹¶å‘</strong>ï¼šå¯¹äºé‚£äº›é€»è¾‘ä¸Šä¸éœ€è¦å¹¶å‘æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæˆ–è€…å¹¶å‘æ‰§è¡Œåè€Œä¼šå¼•èµ·é—®é¢˜çš„åœºæ™¯ï¼Œå¦‚æŸäº›èµ„æºçš„å†™æ“ä½œï¼Œå•çº¿ç¨‹æ‰§è¡Œå¯ä»¥ç®€åŒ–ç¼–ç¨‹æ¨¡å‹ï¼Œé¿å…å¹¶å‘æ§åˆ¶çš„å¤æ‚æ€§ã€‚</li><li><strong>åºåˆ—åŒ–å¤„ç†</strong>ï¼šå½“ä»»åŠ¡ä¹‹é—´å­˜åœ¨ä¾èµ–ï¼Œæˆ–è€…éœ€è¦ç»´æŒç‰¹å®šçš„æ‰§è¡Œé¡ºåºæ—¶ï¼Œå•çº¿ç¨‹æ‰§è¡Œå¯ä»¥è‡ªç„¶åœ°ä¿æŒä»»åŠ¡çš„é¡ºåºã€‚</li><li><strong>ç®€å•åå°ä»»åŠ¡</strong>ï¼šå¯¹äºç®€å•çš„åå°å¤„ç†ä»»åŠ¡ï¼Œå¦‚æ—¥å¿—è®°å½•ã€å®šæ—¶ä»»åŠ¡ç­‰ï¼Œå•çº¿ç¨‹å¯ä»¥æœ‰æ•ˆå‡å°‘èµ„æºæ¶ˆè€—ï¼ŒåŒæ—¶ç®€åŒ–é”™è¯¯å¤„ç†å’Œè°ƒè¯•è¿‡ç¨‹ã€‚</li></ul><h4 id="å¼Šç«¯-2" tabindex="-1"><a class="header-anchor" href="#å¼Šç«¯-2"><span>å¼Šç«¯</span></a></h4><ol><li><strong>æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šå•çº¿ç¨‹å¤„ç†æ‰€æœ‰ä»»åŠ¡ï¼Œæ„å‘³ç€å³ä½¿ç³»ç»Ÿæœ‰å¤šä¸ªå¤„ç†å™¨æ ¸å¿ƒï¼Œä¹Ÿæ— æ³•å……åˆ†åˆ©ç”¨ç¡¬ä»¶çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œè¿™åœ¨å¤„ç†å¤§é‡ä»»åŠ¡æˆ–è®¡ç®—å¯†é›†å‹ä»»åŠ¡æ—¶ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</li><li><strong>å“åº”å»¶è¿Ÿ</strong>ï¼šå¦‚æœæœ‰é«˜ä¼˜å…ˆçº§æˆ–ç´§æ€¥ä»»åŠ¡éœ€è¦å¤„ç†ï¼Œå•çº¿ç¨‹æ¨¡å‹ä¼šå¯¼è‡´è¿™äº›ä»»åŠ¡å¿…é¡»ç­‰å¾…å½“å‰ä»»åŠ¡å®Œæˆåæ‰èƒ½å¼€å§‹ï¼Œå¢åŠ äº†å“åº”å»¶è¿Ÿã€‚</li><li><strong>æ•…éšœæ•æ„Ÿ</strong>ï¼šå•å·¥ä½œçº¿ç¨‹æ„å‘³ç€å¦‚æœè¿™ä¸ªçº¿ç¨‹å› ä¸ºå¼‚å¸¸ç»ˆæ­¢ï¼Œé‚£ä¹ˆæ•´ä¸ªçº¿ç¨‹æ± å°†åœæ­¢å¤„ç†ä»»ä½•ä»»åŠ¡ï¼Œç›´åˆ°çº¿ç¨‹è¢«é‡æ–°åˆ›å»ºæˆ–çº¿ç¨‹æ± è¢«é‡å¯ã€‚</li></ol></div><p>å•çº¿ç¨‹çº¿ç¨‹æ± åœ¨å¤„ç†ç‰¹å®šç±»å‹çš„ä»»åŠ¡æ—¶æœ‰å…¶ç‹¬ç‰¹ä¼˜åŠ¿ï¼Œç‰¹åˆ«æ˜¯éœ€è¦ä»»åŠ¡é¡ºåºæ‰§è¡Œæˆ–é¿å…å¹¶å‘å†²çªçš„åœºæ™¯ã€‚ç„¶è€Œï¼Œå®ƒä¸é€‚åˆé«˜æ€§èƒ½æˆ–éœ€è¦å¹¶è¡Œå¤„ç†çš„åœºåˆï¼Œä¸”åœ¨å¤„ç†é•¿æ—¶é—´è¿è¡Œä»»åŠ¡æ—¶å¯èƒ½ä¼šå¯¼è‡´å…¶ä»–ä»»åŠ¡å»¶è¿Ÿã€‚</p><h3 id="å¯è°ƒåº¦çº¿ç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#å¯è°ƒåº¦çº¿ç¨‹æ± "><span>å¯è°ƒåº¦çº¿ç¨‹æ± </span></a></h3><p><code>newScheduledThreadPool</code>å·¥å‚æ–¹æ³•å¯ä»¥åˆ›å»ºä¸€ä¸ªæ‰§è¡Œ<code>å»¶æ—¶</code>å’Œ<code>å‘¨æœŸæ€§</code>ä»»åŠ¡çš„å¯è°ƒåº¦çº¿ç¨‹æ± </p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ScheduledExecutorService</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> newScheduledThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> corePoolSize) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ScheduledThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(corePoolSize)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ScheduledThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> corePoolSize) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // super: ThreadPoolExecutor</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    super</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(corePoolSize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MAX_VALUE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> NANOSECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">          new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DelayedWorkQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() )</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p><strong>å®šæ—¶ä¸å‘¨æœŸæ€§æ‰§è¡Œ</strong>ï¼š<code>ScheduledThreadPoolExecutor</code>å…è®¸ä½ å®‰æ’ä»»åŠ¡åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´ç‚¹æ‰§è¡Œä¸€æ¬¡ï¼Œæˆ–è€…ä»¥å›ºå®šçš„å»¶è¿Ÿï¼ˆdelayï¼‰æˆ–å›ºå®šçš„å‘¨æœŸï¼ˆintervalï¼‰é‡å¤æ‰§è¡Œã€‚</p></li><li><p><strong>çµæ´»çš„è°ƒåº¦ç­–ç•¥</strong>ï¼šæä¾›äº†çµæ´»çš„APIæ¥æ§åˆ¶ä»»åŠ¡çš„è°ƒåº¦ï¼ŒåŒ…æ‹¬<code>schedule()</code>, <code>scheduleAtFixedRate()</code>, å’Œ <code>scheduleWithFixedDelay()</code>æ–¹æ³•ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„è°ƒåº¦ç­–ç•¥ã€‚</p></li><li><p><strong>åŠ¨æ€çº¿ç¨‹æ•°é‡</strong>ï¼šå°½ç®¡å¯ä»¥è®¾å®šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œä½†æ ¹æ®ä»»åŠ¡çš„è°ƒåº¦æƒ…å†µï¼Œçº¿ç¨‹æ± çš„å¤§å°å¯ä»¥åŠ¨æ€è°ƒæ•´ï¼Œä»¥é€‚åº”ä»»åŠ¡è°ƒåº¦çš„éœ€è¦ã€‚æœªä½¿ç”¨çš„çº¿ç¨‹ä¼šåœ¨ä¸€æ®µæ—¶é—´åè¢«å›æ”¶ï¼Œä»¥å‡å°‘èµ„æºå ç”¨ã€‚</p></li></ol><p><strong>å¯è°ƒåº¦çº¿ç¨‹æ± çš„ä½¿ç”¨åœºæ™¯</strong>:</p><ul><li><strong>å®šæ—¶ä»»åŠ¡</strong>ï¼šå¦‚å®šæ—¶æ•°æ®åŒæ­¥ã€å®šæœŸæ•°æ®åº“ç»´æŠ¤ã€å®šæ—¶æŠ¥å‘Šç”Ÿæˆç­‰ï¼Œéœ€è¦åœ¨ç‰¹å®šæ—¶é—´ç‚¹æ‰§è¡Œçš„æ“ä½œã€‚</li><li><strong>å‘¨æœŸæ€§ä»»åŠ¡</strong>ï¼šå¦‚å¿ƒè·³æ£€æµ‹ã€ç›‘æ§æ•°æ®é‡‡é›†ã€å®šæœŸæ¸…ç†ç¼“å­˜ç­‰éœ€è¦å‘¨æœŸæ€§é‡å¤æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li><li><strong>åå°å¤„ç†</strong>ï¼šåœ¨ä¸å¹²æ‰°ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œåå°çš„å®šæ—¶æˆ–å‘¨æœŸæ€§ä½œä¸šï¼Œå¦‚å®šæ—¶æ£€æŸ¥ç³»ç»ŸçŠ¶æ€ã€æ›´æ–°ç¼“å­˜ç­‰ã€‚</li></ul><p>æ‰§è¡Œæµç¨‹ï¼š</p><ol><li>åˆ¤æ–­çº¿ç¨‹æ± æ˜¯å¦å­˜åœ¨ç©ºé—²çº¿ç¨‹</li><li>å­˜åœ¨åˆ™ä½¿ç”¨</li><li>ä¸å­˜åœ¨ç©ºé—²çº¿ç¨‹,ä¸”çº¿ç¨‹æ± æœªæ»¡çš„æƒ…å†µä¸‹,åˆ™åˆ›å»ºçº¿ç¨‹ å¹¶æ”¾å…¥çº¿ç¨‹æ± , ç„¶åä½¿ç”¨</li><li>ä¸å­˜åœ¨ç©ºé—²çº¿ç¨‹,ä¸”çº¿ç¨‹æ± å·²æ»¡çš„æƒ…å†µä¸‹,åˆ™ç­‰å¾…çº¿ç¨‹æ± å­˜åœ¨ç©ºé—²çº¿ç¨‹</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ScheduledThreadPoolDemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ScheduledExecutorService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> scheduledExecutorService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newScheduledThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å®šæ—¶ä»»åŠ¡ï¼šï¼ˆ5ç§’åæ‰§è¡Œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        scheduledExecutorService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">schedule</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å‘¨æœŸä»»åŠ¡ (5ç§’åå¼€å§‹æ‰§è¡Œï¼Œé—´éš”2ç§’é‡å¤æ‰§è¡Œ)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        scheduledExecutorService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scheduleAtFixedRate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(()</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¯è°ƒåº¦çº¿ç¨‹æ± çš„å¼Šç«¯</strong>:</p><ol><li><strong>èµ„æºç®¡ç†</strong>ï¼šè™½ç„¶çº¿ç¨‹æ± å¤§å°å¯ä»¥åŠ¨æ€è°ƒæ•´ï¼Œä½†å¦‚æœè°ƒåº¦çš„ä»»åŠ¡é¢‘ç¹ä¸”å‘¨æœŸè¾ƒçŸ­ï¼Œå¯èƒ½ä¼šå¯¼è‡´çº¿ç¨‹æ± ç»´æŒå¤§é‡æ´»è·ƒçº¿ç¨‹ï¼Œæ¶ˆè€—è¾ƒå¤šç³»ç»Ÿèµ„æºï¼ŒåŒ…æ‹¬CPUå’Œå†…å­˜ã€‚</li><li><strong>ä»»åŠ¡å †ç§¯</strong>ï¼šåœ¨ä»»åŠ¡æäº¤é€Ÿç‡è¶…è¿‡çº¿ç¨‹æ± å¤„ç†èƒ½åŠ›æ—¶ï¼Œè™½ç„¶ä»»åŠ¡ä¼šè¢«æ’é˜Ÿç­‰å¾…ï¼Œä½†æ— ç•Œçš„ä»»åŠ¡é˜Ÿåˆ—å¯èƒ½å¯¼è‡´å†…å­˜æŒç»­å¢é•¿ï¼Œæœ€ç»ˆå¯èƒ½å¼•å‘å†…å­˜æº¢å‡ºã€‚</li><li><strong>å¤æ‚æ€§</strong>ï¼šç›¸æ¯”æ™®é€šçº¿ç¨‹æ± ï¼Œè°ƒåº¦çº¿ç¨‹æ± çš„ä½¿ç”¨å’Œé…ç½®æ›´ä¸ºå¤æ‚ï¼Œéœ€è¦ä»”ç»†è°ƒæ•´æ ¸å¿ƒçº¿ç¨‹æ•°ã€é˜Ÿåˆ—å¤§å°ã€æ‹’ç»ç­–ç•¥ç­‰å‚æ•°ï¼Œä»¥é¿å…èµ„æºè€—å°½æˆ–æ€§èƒ½é—®é¢˜ã€‚</li><li><strong>å®šæ—¶ç²¾åº¦é—®é¢˜</strong>ï¼šç”±äºJVMçš„çº¿ç¨‹è°ƒåº¦ã€åƒåœ¾å›æ”¶ç­‰å› ç´ ï¼Œå®šæ—¶ä»»åŠ¡çš„å®é™…æ‰§è¡Œæ—¶é—´å¯èƒ½ä¼šæœ‰æ‰€åå·®ï¼Œå¯¹äºå¯¹æ—¶é—´ç²¾åº¦è¦æ±‚æé«˜çš„åœºæ™¯å¯èƒ½ä¸å¤ªé€‚ç”¨ã€‚</li></ol><div class="hint-container info"><p class="hint-container-title">scheduledExecutorServiceçš„å¸¸ç”¨æ–¹æ³•</p><h4 id="_1-schedule-runnable-command-long-delay-timeunit-unit" tabindex="-1"><a class="header-anchor" href="#_1-schedule-runnable-command-long-delay-timeunit-unit"><span>1. <code>schedule(Runnable command, long delay, TimeUnit unit)</code></span></a></h4><ul><li><p><strong>å‚æ•°å«ä¹‰</strong>ï¼š</p><ul><li><code>command</code>ï¼šè¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¿…é¡»å®ç° <code>Runnable</code> æ¥å£ã€‚</li><li><code>delay</code>ï¼šä»ç°åœ¨å¼€å§‹åˆ°ä»»åŠ¡æ‰§è¡Œçš„å»¶è¿Ÿæ—¶é—´ã€‚</li><li><code>unit</code>ï¼š<code>delay</code> å‚æ•°çš„æ—¶é—´å•ä½ï¼Œä¾‹å¦‚ <code>TimeUnit.SECONDS</code> è¡¨ç¤ºç§’ï¼Œ<code>TimeUnit.MILLISECONDS</code> è¡¨ç¤ºæ¯«ç§’ç­‰ã€‚</li></ul></li><li><p><strong>åŠŸèƒ½</strong>ï¼šæ­¤æ–¹æ³•ç”¨äºåœ¨æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´ä¹‹åï¼Œåªæ‰§è¡Œä¸€æ¬¡ç»™å®šçš„ä»»åŠ¡ã€‚</p></li></ul><h4 id="_2-schedule-callable-v-callable-long-delay-timeunit-unit" tabindex="-1"><a class="header-anchor" href="#_2-schedule-callable-v-callable-long-delay-timeunit-unit"><span>2. <code>schedule(Callable&lt;V&gt; callable, long delay, TimeUnit unit)</code></span></a></h4><ul><li><p><strong>å‚æ•°å«ä¹‰</strong>ï¼š</p><ul><li><code>callable</code>ï¼šè¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¿…é¡»å®ç° <code>Callable</code> æ¥å£ï¼Œå¹¶èƒ½è¿”å›ä¸€ä¸ªç»“æœã€‚</li><li><code>delay</code> å’Œ <code>unit</code>ï¼šå«ä¹‰åŒä¸Šã€‚</li></ul></li><li><p><strong>åŠŸèƒ½</strong>ï¼šä¸ä¸Šé¢çš„ <code>schedule(Runnable command, long delay, TimeUnit unit)</code> ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå®ƒæ¥å—ä¸€ä¸ªæœ‰è¿”å›å€¼çš„ä»»åŠ¡ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ <code>Future</code> è·å–è¿™ä¸ªè¿”å›å€¼ã€‚</p></li></ul><h4 id="_3-scheduleatfixedrate-runnable-command-long-initialdelay-long-period-timeunit-unit" tabindex="-1"><a class="header-anchor" href="#_3-scheduleatfixedrate-runnable-command-long-initialdelay-long-period-timeunit-unit"><span>3. <code>scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit)</code></span></a></h4><ul><li><p><strong>å‚æ•°å«ä¹‰</strong>ï¼š</p><ul><li><code>command</code>ï¼šè¦å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li><li><code>initialDelay</code>ï¼šé¦–æ¬¡æ‰§è¡Œå‰çš„å»¶è¿Ÿæ—¶é—´ã€‚</li><li><code>period</code>ï¼šè¿ç»­æ‰§è¡Œä¹‹é—´çš„å‘¨æœŸæ—¶é—´ã€‚</li><li><code>unit</code>ï¼š<code>initialDelay</code> å’Œ <code>period</code> çš„æ—¶é—´å•ä½ã€‚</li></ul></li><li><p><strong>åŠŸèƒ½</strong>ï¼šæŒ‰ç…§å›ºå®šçš„å‘¨æœŸæ‰§è¡Œä»»åŠ¡ï¼Œé¦–æ¬¡æ‰§è¡Œå°†åœ¨åˆå§‹å»¶è¿Ÿåå¼€å§‹ï¼Œåç»­æ‰§è¡Œåœ¨å‰ä¸€æ¬¡æ‰§è¡Œç»“æŸåˆ°ä¸‹ä¸€æ¬¡å¼€å§‹ä¹‹é—´å§‹ç»ˆä¿æŒç€å›ºå®šçš„å‘¨æœŸã€‚å®ƒå†³å®šäº†ä»»åŠ¡æ‰§è¡Œçš„é¢‘ç‡ï¼Œ<mark>ä¸è€ƒè™‘ä»»åŠ¡å®é™…æ‰§è¡Œæ‰€éœ€æ—¶é—´</mark>ã€‚</p></li></ul><h4 id="_4-schedulewithfixeddelay-runnable-command-long-initialdelay-long-delay-timeunit-unit" tabindex="-1"><a class="header-anchor" href="#_4-schedulewithfixeddelay-runnable-command-long-initialdelay-long-delay-timeunit-unit"><span>4. <code>scheduleWithFixedDelay(Runnable command, long initialDelay, long delay, TimeUnit unit)</code></span></a></h4><ul><li><p><strong>å‚æ•°å«ä¹‰</strong>ï¼š</p><ul><li><code>command</code>ï¼šè¦å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li><li><code>initialDelay</code>ï¼šé¦–æ¬¡æ‰§è¡Œå‰çš„å»¶è¿Ÿæ—¶é—´ã€‚</li><li><code>delay</code>ï¼šè¿ç»­æ‰§è¡Œä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´ã€‚</li><li><code>unit</code>ï¼šæ—¶é—´å•ä½ã€‚</li></ul></li><li><p><strong>åŠŸèƒ½</strong>ï¼šä¹Ÿæ˜¯å‘¨æœŸæ€§åœ°æ‰§è¡Œä»»åŠ¡ï¼Œä½†ä¸ <code>scheduleAtFixedRate</code> ä¸åŒï¼Œå®ƒæ˜¯åœ¨æ¯æ¬¡æ‰§è¡Œç»“æŸåå†ç»è¿‡æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´æ‰å¼€å§‹ä¸‹ä¸€æ¬¡æ‰§è¡Œã€‚delayæ˜¯<mark>åŸºäºå‰ä¸€æ¬¡ä»»åŠ¡å®Œæˆæ—¶é—´æ¥è®¡ç®—çš„</mark>ã€‚</p></li></ul><h4 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹"><span>æ³¨æ„äº‹é¡¹</span></a></h4><ul><li>åœ¨ä½¿ç”¨è¿™äº›æ–¹æ³•æ—¶ï¼Œéœ€è¦æ³¨æ„å¼‚å¸¸å¤„ç†ã€‚å¦‚æœä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºæœªæ•è·çš„å¼‚å¸¸ï¼Œæ ¹æ®é…ç½®çš„ <code>RejectedExecutionHandler</code>ï¼ˆæ‹’ç»ç­–ç•¥ï¼‰ï¼Œä»»åŠ¡å¯èƒ½ä¼šè¢«æ”¾å¼ƒï¼Œçº¿ç¨‹å¯èƒ½ä¼šç»ˆæ­¢ï¼Œæˆ–è€…å¼‚å¸¸å¯èƒ½ä¼šè¢«ä¼ æ’­ã€‚</li><li>å¯¹äºå‘¨æœŸæ€§ä»»åŠ¡ï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨ <code>scheduleAtFixedRate</code> æ—¶ï¼Œè¦è€ƒè™‘ä»»åŠ¡æ‰§è¡Œæ—¶é—´æ˜¯å¦å¯èƒ½è¶…è¿‡å‘¨æœŸé—´éš”ï¼Œä»¥å…ä»»åŠ¡é€æ¸ç´¯ç§¯å¯¼è‡´ç³»ç»Ÿèµ„æºè€—å°½ã€‚</li><li>ä½¿ç”¨ <code>ScheduledExecutorService</code> å‰ï¼Œé€šå¸¸éœ€è¦é€šè¿‡ <code>Executors.newScheduledThreadPool(int corePoolSize)</code> åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå…¶ä¸­ <code>corePoolSize</code> æŒ‡å®šçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°ã€‚</li></ul></div><h2 id="threadpoolexecutor" tabindex="-1"><a class="header-anchor" href="#threadpoolexecutor"><span>ThreadPoolExecutor</span></a></h2><p>è™½ç„¶ <code>Executors</code> ç±»æä¾›äº†ä¾¿æ·çš„é™æ€æ–¹æ³•æ¥åˆ›å»ºä¸åŒç±»å‹ï¼ˆå¦‚ <code>newFixedThreadPool</code>, <code>newCachedThreadPool</code> ç­‰ï¼‰çš„çº¿ç¨‹æ± ï¼Œä½†è¿™äº›æ–¹æ³•å¾€å¾€ä½¿ç”¨äº†è¾ƒä¸ºç®€åŒ–çš„é…ç½®ï¼Œä¾‹å¦‚ä½¿ç”¨æ— ç•Œé˜Ÿåˆ—ï¼ˆå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼æˆ–OOMï¼‰ï¼Œæˆ–å›ºå®šå¤§å°çº¿ç¨‹æ± ï¼ˆå¯èƒ½å¯¼è‡´ä»»åŠ¡å †ç§¯æˆ–èµ„æºæµªè´¹ï¼‰ã€‚è¿™äº›ç®€åŒ–çš„é…ç½®åœ¨æŸäº›åœºæ™¯ä¸‹å¯èƒ½ä¸é€‚åˆï¼Œå®¹æ˜“å¯¼è‡´æ€§èƒ½é—®é¢˜æˆ–èµ„æºç®¡ç†ä¸å½“ã€‚æ‰€ä»¥æ›´æ¨èä½¿ç”¨ <code>ThreadPoolExecutor</code> è‡ªå®šä¹‰çº¿ç¨‹æ± ã€‚</p><h3 id="çº¿ç¨‹æ± å‚æ•°" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ± å‚æ•°"><span>çº¿ç¨‹æ± å‚æ•°</span></a></h3><p><code>ThreadPoolExecutor</code> æ˜¯ Java ä¸­ç”¨äºåˆ›å»ºè‡ªå®šä¹‰çº¿ç¨‹æ± çš„æ ¸å¿ƒç±»ï¼Œå®ƒæä¾›äº†é«˜åº¦çš„çµæ´»æ€§æ¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚è°ƒæ•´çº¿ç¨‹æ± çš„è¡Œä¸ºã€‚</p><ol><li><p><strong>corePoolSize</strong>: æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± çš„åŸºæœ¬å¤§å°ã€‚å³ä½¿æ²¡æœ‰ä»»åŠ¡æ‰§è¡Œï¼Œè¿™äº›çº¿ç¨‹ä¹Ÿä¼šä¸€ç›´å­˜æ´»ã€‚åªæœ‰å½“çº¿ç¨‹æ•°å°äºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œæ–°çš„ä»»åŠ¡æ‰ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œã€‚</p></li><li><p><strong>maximumPoolSize</strong>: çº¿ç¨‹æ± èƒ½å¤Ÿå®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•°ï¼ŒåŒ…æ‹¬æ ¸å¿ƒçº¿ç¨‹å’Œéæ ¸å¿ƒçº¿ç¨‹ã€‚</p></li><li><p><strong>keepAliveTime</strong>: éæ ¸å¿ƒçº¿ç¨‹é—²ç½®æ—¶çš„è¶…æ—¶æ—¶é•¿ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œéæ ¸å¿ƒçº¿ç¨‹å°†è¢«ç»ˆæ­¢ã€‚å¦‚æœè®¾ç½®ä¸º0ï¼Œéæ ¸å¿ƒçº¿ç¨‹ä¼šç«‹å³ç»ˆæ­¢ã€‚</p></li><li><p><strong>unit</strong>: <code>keepAliveTime</code> å‚æ•°çš„æ—¶é—´å•ä½ï¼Œå¦‚ <code>TimeUnit.SECONDS</code>ã€<code>TimeUnit.MILLISECONDS</code> ç­‰ã€‚</p></li><li><p><strong>workQueue</strong>: ä»»åŠ¡é˜Ÿåˆ—ï¼Œç”¨äºä¿å­˜ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚å¸¸è§çš„æœ‰ <code>LinkedBlockingQueue</code>ï¼ˆæ— ç•Œé˜Ÿåˆ—ï¼‰ã€<code>ArrayBlockingQueue</code>ï¼ˆæœ‰ç•Œé˜Ÿåˆ—ï¼‰å’Œ <code>SynchronousQueue</code>ï¼ˆç›´æ¥ä¼ é€’ï¼‰ç­‰ã€‚</p></li><li><p><strong>threadFactory</strong>: çº¿ç¨‹å·¥å‚ï¼Œç”¨äºåˆ›å»ºæ–°çº¿ç¨‹ã€‚å¯ä»¥ç”¨æ¥è®¾ç½®çº¿ç¨‹çš„åç§°ã€ä¼˜å…ˆçº§ç­‰å±æ€§ã€‚</p></li><li><p><strong>handler</strong>: æ‹’ç»ç­–ç•¥ï¼Œå½“çº¿ç¨‹æ± å’Œä»»åŠ¡é˜Ÿåˆ—éƒ½æ»¡æ—¶ï¼Œæ–°æäº¤çš„ä»»åŠ¡å°†ä¼šè§¦å‘æ­¤ç­–ç•¥ã€‚å¸¸è§çš„ç­–ç•¥æœ‰ <code>AbortPolicy</code>ï¼ˆæŠ›å‡ºå¼‚å¸¸ï¼‰ã€<code>CallerRunsPolicy</code>ï¼ˆè°ƒç”¨è€…è¿è¡Œä»»åŠ¡ï¼‰ã€<code>DiscardPolicy</code>ï¼ˆé™é»˜ä¸¢å¼ƒä»»åŠ¡ï¼‰å’Œ <code>DiscardOldestPolicy</code>ï¼ˆä¸¢å¼ƒé˜Ÿåˆ—ä¸­æœ€æ—§çš„ä»»åŠ¡ç„¶åå°è¯•é‡æ–°æäº¤ï¼‰ã€‚</p></li></ol><p>è‡ªå®šä¹‰çº¿ç¨‹æ± é€šå¸¸æ¶‰åŠå†³å®šä¸Šè¿°å‚æ•°çš„å…·ä½“å€¼ï¼Œä»¥æ»¡è¶³ç‰¹å®šåº”ç”¨ç¨‹åºçš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªIOå¯†é›†å‹åº”ç”¨ï¼Œå¯ä»¥è®¾ç½®è¾ƒå¤§çš„çº¿ç¨‹æ•°ä»¥å……åˆ†åˆ©ç”¨CPUï¼›è€Œå¯¹äºCPUå¯†é›†å‹ä»»åŠ¡ï¼Œçº¿ç¨‹æ•°é€šå¸¸è®¾ç½®ä¸ºå¤„ç†å™¨æ ¸å¿ƒæ•°+1æˆ–ç±»ä¼¼ç­–ç•¥ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ThreadPoolExecutor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> executor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æ ¸å¿ƒçº¿ç¨‹æ•°</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æœ€å¤§çº¿ç¨‹æ•°</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    60</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // éæ ¸å¿ƒçº¿ç¨‹é—²ç½®è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æ—¶é—´å•ä½</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LinkedBlockingQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®¹é‡100</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">defaultThreadFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ä½¿ç”¨é»˜è®¤çº¿ç¨‹å·¥å‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    new</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AbortPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æ‹’ç»ç­–ç•¥ä¸ºæŠ›å‡ºå¼‚å¸¸</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é˜»å¡é˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#é˜»å¡é˜Ÿåˆ—"><span>é˜»å¡é˜Ÿåˆ—</span></a></h3><p>åœ¨Javaçš„çº¿ç¨‹æ± ä¸­ï¼Œé˜»å¡é˜Ÿåˆ—ï¼ˆ<code>BlockingQueue</code>ï¼‰æ‰®æ¼”ç€å…³é”®è§’è‰²ï¼Œä½œä¸ºä»»åŠ¡çš„ä¸´æ—¶å­˜å‚¨ç©ºé—´ï¼Œå®ƒå…è®¸ç”Ÿäº§è€…çº¿ç¨‹ï¼ˆæäº¤ä»»åŠ¡çš„çº¿ç¨‹ï¼‰å’Œæ¶ˆè´¹è€…çº¿ç¨‹ï¼ˆå·¥ä½œçº¿ç¨‹ï¼‰åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å®‰å…¨åœ°äº¤äº’ã€‚é˜»å¡é˜Ÿåˆ—é€šè¿‡æ§åˆ¶ä»»åŠ¡çš„ç”Ÿäº§å’Œæ¶ˆè´¹é€Ÿåº¦ï¼Œå¹³è¡¡äº†çº¿ç¨‹æ± çš„å·¥ä½œè´Ÿè½½ï¼Œé¿å…äº†è¿‡åº¦ç«äº‰å’Œèµ„æºæµªè´¹ã€‚</p><ul><li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šé˜»å¡é˜Ÿåˆ—å†…éƒ¨å®ç°äº†åŒæ­¥æœºåˆ¶ï¼Œç¡®ä¿äº†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ“ä½œå®‰å…¨ã€‚</li><li><strong>é˜»å¡æœºåˆ¶</strong>ï¼šå½“é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹ï¼ˆè·å–ä»»åŠ¡çš„çº¿ç¨‹ï¼‰ä¼šé˜»å¡ç­‰å¾…ï¼›å½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œç”Ÿäº§è€…çº¿ç¨‹ï¼ˆæäº¤ä»»åŠ¡çš„çº¿ç¨‹ï¼‰ä¼šé˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æœ‰è¶³å¤Ÿçš„ç©ºé—´ã€‚</li><li><strong>å¯é€‰ç­–ç•¥</strong>ï¼šä¸åŒçš„é˜»å¡é˜Ÿåˆ—æä¾›äº†ä¸åŒçš„é˜»å¡ç­–ç•¥å’Œç‰¹æ€§ï¼Œé€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚</li></ul><div class="hint-container tip"><p class="hint-container-title">ä½¿ç”¨åœºæ™¯</p><ul><li><strong>ä»»åŠ¡è°ƒåº¦</strong>ï¼šç”¨äºçº¿ç¨‹æ± ä¸­å­˜æ”¾å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹³è¡¡çº¿ç¨‹çš„å·¥ä½œé‡ï¼Œæé«˜æ•ˆç‡ã€‚</li><li><strong>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</strong>ï¼šç»å…¸å¹¶å‘æ¨¡å¼ï¼Œç”Ÿäº§è€…ç”Ÿäº§æ•°æ®æ”¾å…¥é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®å¤„ç†ã€‚</li><li><strong>é™æµä¸ç¼“å†²</strong>ï¼šä½œä¸ºä¸­é—´ç¼“å­˜ï¼Œé™åˆ¶æ•°æ®å¤„ç†çš„é€Ÿåº¦ï¼Œé˜²æ­¢ç³»ç»Ÿè¿‡è½½ã€‚</li></ul></div><p><strong>BlockingQueueæ¥å£å¸¸ç”¨æ–¹æ³•</strong></p><ul><li><code>put(E element)</code>ï¼šå°†å…ƒç´ æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœé˜Ÿåˆ—æ»¡ï¼Œåˆ™é˜»å¡ç›´åˆ°æœ‰ç©ºé—´å¯ç”¨ã€‚</li><li><code>take()</code>ï¼šä»é˜Ÿåˆ—ä¸­ç§»é™¤å¹¶è¿”å›å¤´éƒ¨å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™é˜»å¡ç›´åˆ°æœ‰å…ƒç´ å¯ç”¨ã€‚</li><li><code>offer(E element, long timeout, TimeUnit unit)</code>ï¼šå°è¯•åœ¨ç»™å®šæ—¶é—´å†…å°†å…ƒç´ æ·»åŠ åˆ°é˜Ÿåˆ—ï¼Œå¦‚æœé˜Ÿåˆ—æ»¡åˆ™è¿”å›<code>false</code>ã€‚</li><li><code>poll(long timeout, TimeUnit unit)</code>ï¼šå°è¯•åœ¨ç»™å®šæ—¶é—´å†…ä»é˜Ÿåˆ—ä¸­å–å‡ºå…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºåˆ™è¿”å›<code>null</code>ã€‚</li><li><code>size()</code>ã€<code>isEmpty()</code>ã€<code>remainingCapacity()</code>ç­‰æ–¹æ³•ï¼šç”¨äºæŸ¥è¯¢é˜Ÿåˆ—çŠ¶æ€ã€‚</li></ul><p><strong>å¸¸è§çš„é˜»å¡é˜Ÿåˆ—</strong></p><ul><li><strong>ArrayBlockingQueue</strong>ï¼šåŸºäºæ•°ç»„çš„æœ‰ç•Œé˜Ÿåˆ—ï¼Œå®¹é‡å›ºå®šï¼Œé€‚åˆç”Ÿäº§é€Ÿç‡å’Œæ¶ˆè´¹é€Ÿç‡ç›¸è¿‘çš„åœºæ™¯ã€‚</li><li><strong>LinkedBlockingQueue</strong>ï¼šåŸºäºé“¾è¡¨çš„é˜»å¡é˜Ÿåˆ—ï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦è®¾å®šå®¹é‡ï¼Œæ— ç•Œé˜Ÿåˆ—æ—¶éœ€è°¨æ…ä½¿ç”¨ä»¥é˜²å†…å­˜æº¢å‡ºã€‚</li><li><strong>PriorityBlockingQueue</strong>ï¼šå…·æœ‰ä¼˜å…ˆçº§çš„æ— ç•Œé˜Ÿåˆ—ï¼Œå…ƒç´ æŒ‰ä¼˜å…ˆçº§æ’åºã€‚</li><li><strong>DelayQueue</strong>ï¼šåŸºäºä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå…ƒç´ åªæœ‰åœ¨å»¶è¿ŸæœŸæ»¡åæ‰èƒ½è¢«æ¶ˆè´¹ï¼Œå¸¸ç”¨äºå®šæ—¶ä»»åŠ¡ã€‚</li><li><strong>SynchronousQueue</strong>ï¼šä¸å­˜å‚¨å…ƒç´ çš„é˜Ÿåˆ—ï¼Œæ¯ä¸ªæ’å…¥æ“ä½œå¿…é¡»ç­‰å¾…ä¸€ä¸ªç›¸åº”çš„ç§»é™¤æ“ä½œï¼Œé€‚ç”¨äºä¸€å¯¹ä¸€çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…åœºæ™¯ã€‚</li></ul><div class="hint-container info"><p class="hint-container-title">é˜»å¡é˜Ÿåˆ—ä¸éé˜»å¡é˜Ÿåˆ—çš„å¹¶å‘å®‰å…¨åŸç†</p><ul><li><strong>é˜»å¡é˜Ÿåˆ—</strong>ï¼šé€šè¿‡å†…ç½®çš„é”æˆ–æ¡ä»¶å˜é‡ï¼ˆå¦‚Javaä¸­çš„<code>ReentrantLock</code>å’Œ<code>Condition</code>ï¼‰å®ç°çº¿ç¨‹é—´çš„åŒæ­¥ï¼Œå½“æ“ä½œæ— æ³•ç«‹å³å®Œæˆæ—¶ï¼Œçº¿ç¨‹ä¼šè¢«æŒ‚èµ·è€Œä¸æ˜¯å¿™ç­‰å¾…ï¼Œå‡å°‘äº†CPUçš„æ— è°“æ¶ˆè€—ã€‚</li><li><strong>éé˜»å¡é˜Ÿåˆ—</strong>ï¼šé€šå¸¸é‡‡ç”¨CASï¼ˆCompare-and-Swapï¼‰æˆ–å…¶ä»–æ— é”ç®—æ³•å®ç°ï¼Œå¦‚<code>ConcurrentLinkedQueue</code>ï¼Œé€šè¿‡åŸå­æ“ä½œä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¸é˜»å¡çº¿ç¨‹ï¼Œé€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯ï¼Œä½†å®ç°æ›´ä¸ºå¤æ‚ã€‚</li></ul></div><p><strong>å¦‚ä½•é€‰æ‹©é€‚åˆè‡ªå·±çš„é˜»å¡é˜Ÿåˆ—ï¼Ÿ</strong></p><ul><li><strong>è€ƒè™‘é˜Ÿåˆ—å®¹é‡</strong>ï¼šæ˜¯å¦éœ€è¦æœ‰ç•Œé˜Ÿåˆ—æ¥é˜²æ­¢èµ„æºè€—å°½ã€‚</li><li><strong>ä»»åŠ¡ä¼˜å…ˆçº§</strong>ï¼šæ˜¯å¦éœ€è¦æ ¹æ®ä»»åŠ¡ä¼˜å…ˆçº§æ’åºæ‰§è¡Œã€‚</li><li><strong>ååé‡å’Œå»¶è¿Ÿ</strong>ï¼šé«˜ååé‡åœºæ™¯å¯èƒ½æ›´é€‚åˆæ— ç•Œçš„æˆ–å®¹é‡å¤§çš„é˜Ÿåˆ—ï¼Œä½å»¶è¿Ÿåœºæ™¯å¯èƒ½éœ€è¦å°é˜Ÿåˆ—æˆ–ç›´æ¥äº¤äº’çš„é˜Ÿåˆ—ï¼ˆå¦‚<code>SynchronousQueue</code>ï¼‰ã€‚</li><li><strong>ä»»åŠ¡ç‰¹æ€§</strong>ï¼šæ˜¯å¦éœ€è¦å»¶è¿Ÿæ‰§è¡Œæˆ–å®šæ—¶ä»»åŠ¡ï¼Œæ˜¯å¦ä¸ºä¸€å¯¹ä¸€æˆ–ä¸€å¯¹å¤šçš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ã€‚</li><li><strong>èµ„æºé™åˆ¶</strong>ï¼šè€ƒè™‘å†…å­˜å’ŒCPUä½¿ç”¨æƒ…å†µï¼Œé€‰æ‹©åˆé€‚çš„é˜Ÿåˆ—ç±»å‹ä»¥é¿å…èµ„æºè¿‡åº¦æ¶ˆè€—ã€‚</li></ul><h3 id="æ‹’ç»ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#æ‹’ç»ç­–ç•¥"><span>æ‹’ç»ç­–ç•¥</span></a></h3><p>çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥ä¼šåœ¨ä»¥ä¸‹æ¡ä»¶ä¸‹è¢«è§¦å‘ï¼š</p><ol><li><p><strong>ä»»åŠ¡æäº¤æ•°é‡è¶…è¿‡æœ€å¤§å®¹é‡</strong>ï¼šå½“æäº¤åˆ°çº¿ç¨‹æ± çš„ä»»åŠ¡æ•°é‡è¶…è¿‡äº†çº¿ç¨‹æ± çš„å¤„ç†èƒ½åŠ›ï¼Œå…·ä½“æ¥è¯´ï¼Œæ˜¯å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å·²ç»è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°ï¼ˆ<code>maximumPoolSize</code>ï¼‰ï¼Œå¹¶ä¸”å·¥ä½œé˜Ÿåˆ—ï¼ˆ<code>BlockingQueue</code>ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæœ‰ç•Œé˜Ÿåˆ—ï¼‰ä¹Ÿå·²ç»æ»¡äº†ï¼Œæ— æ³•å†æ¥çº³æ›´å¤šçš„ä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹æ± å°±ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ã€‚</p></li><li><p><strong>çº¿ç¨‹æ± å…³é—­</strong>ï¼šå¦‚æœçº¿ç¨‹æ± å·²ç»è°ƒç”¨äº†å…³é—­æ–¹æ³•ï¼ˆå¦‚<code>shutdown()</code>æˆ–<code>shutdownNow()</code>ï¼‰ï¼Œå¹¶ä¸”ä¸å†æ¥å—æ–°çš„ä»»åŠ¡ï¼Œé‚£ä¹ˆåœ¨æ­¤ä¹‹åæäº¤çš„ä»»åŠ¡ä¹Ÿä¼šè¢«æ‹’ç»ã€‚</p></li></ol><p>æ€»ç»“æ¥è¯´ï¼Œçº¿ç¨‹æ± æ‹’ç»ç­–ç•¥çš„è§¦å‘ä¸»è¦æœ‰ä¸¤ä¸ªç›´æ¥åŸå› ï¼šä¸€æ˜¯çº¿ç¨‹æ± èµ„æºï¼ˆåŒ…æ‹¬æ´»åŠ¨çº¿ç¨‹å’Œç­‰å¾…é˜Ÿåˆ—ï¼‰å·²ç»è¾¾åˆ°äº†é…ç½®çš„æœ€å¤§é™åˆ¶ï¼Œæ— æ³•å†å¤„ç†é¢å¤–çš„ä»»åŠ¡ï¼›äºŒæ˜¯çº¿ç¨‹æ± å¤„äºå…³é—­çŠ¶æ€ï¼Œæ‹’ç»æ¥æ”¶æ–°çš„ä»»åŠ¡æäº¤ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æ± ä¼šä¾æ®é¢„å…ˆè®¾å®šçš„æ‹’ç»ç­–ç•¥æ¥å¤„ç†æ— æ³•æ¥çº³çš„ä»»åŠ¡ï¼Œå¸¸è§çš„æ‹’ç»ç­–ç•¥åŒ…æ‹¬ï¼š</p><ul><li><strong>AbortPolicy</strong>ï¼šé»˜è®¤ç­–ç•¥ï¼Œç›´æ¥æŠ›å‡º<code>RejectedExecutionException</code>å¼‚å¸¸ã€‚</li><li><strong>DiscardPolicy</strong>ï¼šé»˜é»˜ä¸¢å¼ƒæ— æ³•å¤„ç†çš„ä»»åŠ¡ï¼Œä¸æŠ›å‡ºå¼‚å¸¸ã€‚</li><li><strong>DiscardOldestPolicy</strong>ï¼šä¸¢å¼ƒé˜Ÿåˆ—ä¸­æœ€æ—§çš„ä»»åŠ¡ï¼ˆå³æœ€å…ˆåŠ å…¥é˜Ÿåˆ—çš„ä»»åŠ¡ï¼‰ï¼Œç„¶åå°è¯•é‡æ–°æäº¤å½“å‰ä»»åŠ¡ã€‚</li><li><strong>CallerRunsPolicy</strong>ï¼šä¸å°†ä»»åŠ¡ä¸¢å¼ƒï¼Œè€Œæ˜¯ç”±è°ƒç”¨è€…æ‰€åœ¨çš„çº¿ç¨‹ç›´æ¥æ‰§è¡Œä»»åŠ¡ï¼Œè¿™é€šå¸¸ä¼šå½±å“è°ƒç”¨è€…çº¿ç¨‹çš„æ€§èƒ½ã€‚</li></ul><div class="hint-container info"><p class="hint-container-title">CallerRunsPolicy</p><p><code>CallerRunsPolicy</code> ä¼šé€‰æ‹©è®©æäº¤ä»»åŠ¡çš„çº¿ç¨‹ï¼ˆå³è°ƒç”¨ <code>execute()</code> æ–¹æ³•çš„çº¿ç¨‹ï¼‰è‡ªå·±æ¥æ‰§è¡Œè¿™ä¸ªè¢«æ‹’ç»çš„ä»»åŠ¡ï¼Œè€Œä¸æ˜¯å°†å…¶ä¸¢å¼ƒæˆ–æŠ›å‡ºå¼‚å¸¸ã€‚</p><ul><li><p>è¿™ä¸€ç­–ç•¥çš„ä¼˜åŠ¿åœ¨äºå¯ä»¥é¿å…ä»»åŠ¡ä¸¢å¤±ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§ç®€å•æœ‰æ•ˆçš„æµé‡æ§åˆ¶æ‰‹æ®µï¼Œå› ä¸ºå®ƒå‡å°‘äº†å¯¹çº¿ç¨‹æ± çš„å‹åŠ›ï¼Œä½¿å¾—çº¿ç¨‹æ± æœ‰æ›´å¤šæœºä¼šå»å¤„ç†é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚ç„¶è€Œï¼Œè¿™ä¹Ÿæ„å‘³ç€æäº¤ä»»åŠ¡çš„çº¿ç¨‹å°†è¢«é˜»å¡ï¼Œç›´åˆ°ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œè¿™å¯èƒ½ä¼šå½±å“åˆ°åº”ç”¨ç¨‹åºçš„æ•´ä½“å“åº”é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯å½“è°ƒç”¨è€…çº¿ç¨‹æ˜¯ä¸»çº¿ç¨‹æˆ–å¤„ç†ç”¨æˆ·ç•Œé¢æ›´æ–°çš„çº¿ç¨‹æ—¶ã€‚</p></li><li><p><code>CallerRunsPolicy</code> é€‚åˆäºé‚£äº›å¯¹ä»»åŠ¡ä¸¢å¤±æ•æ„Ÿã€ä¸”å¹¶å‘åº¦ä¸æ˜¯ç‰¹åˆ«é«˜ã€æ€§èƒ½è¦æ±‚ç›¸å¯¹å®½æ¾çš„åº”ç”¨åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œåœ¨åå°å¤„ç†ä»»åŠ¡çš„ç³»ç»Ÿä¸­ï¼Œå¦‚æœå…è®¸ä¸»é€»è¾‘çº¿ç¨‹ç¨å¾®æ…¢ä¸€ç‚¹è€Œä¸æƒ³ä¸¢å¤±ä»»ä½•ä»»åŠ¡ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™ä¸ªç­–ç•¥ã€‚</p></li></ul><p>æ€»ä¹‹ï¼Œ<code>CallerRunsPolicy</code> æ˜¯ä¸€ç§æŠ˜è¡·çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒç‰ºç‰²äº†ä¸€å®šç¨‹åº¦çš„æ€§èƒ½å’Œå“åº”æ€§ï¼Œä»¥æ¢å–ä»»åŠ¡å¤„ç†çš„å¯é æ€§ï¼Œç¡®ä¿å³ä½¿åœ¨èµ„æºç´§å¼ çš„æƒ…å†µä¸‹ï¼Œä»»åŠ¡ä¹Ÿä¸ä¼šè¢«è½»æ˜“æ”¾å¼ƒã€‚åœ¨è®¾è®¡çº¿ç¨‹æ± æ—¶ï¼Œé€‰æ‹©åˆé€‚çš„æ‹’ç»ç­–ç•¥åº”å½“åŸºäºå¯¹åº”ç”¨ç¨‹åºç‰¹æ€§çš„æ·±å…¥ç†è§£åŠæ€§èƒ½éœ€æ±‚çš„æƒè¡¡ã€‚</p></div><h3 id="è‡ªå®šä¹‰çº¿ç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰çº¿ç¨‹æ± "><span>è‡ªå®šä¹‰çº¿ç¨‹æ± </span></a></h3><ol><li><p><strong>æ˜ç¡®éœ€æ±‚</strong>ï¼šé¦–å…ˆæ˜ç¡®åº”ç”¨çš„å¹¶å‘éœ€æ±‚ï¼ŒåŒ…æ‹¬ä»»åŠ¡æ€§è´¨ï¼ˆCPUå¯†é›†å‹æˆ–IOå¯†é›†å‹ï¼‰ã€ä»»åŠ¡çš„æ•°é‡å’Œé¢‘ç‡ã€ä»»åŠ¡æ‰§è¡Œçš„å¹³å‡æ—¶é—´å’Œæœ€é•¿æ—¶é—´ç­‰ã€‚</p></li><li><p><strong>åˆç†é…ç½®å‚æ•°</strong>ï¼šåŸºäºéœ€æ±‚é€‰æ‹©åˆé€‚çš„æ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ã€é˜Ÿåˆ—ç±»å‹å’Œå¤§å°ï¼Œä»¥åŠæ‹’ç»ç­–ç•¥ã€‚</p></li><li><p><strong>ç›‘æ§ä¸è°ƒæ•´</strong>ï¼šå®æ–½ç›‘æ§çº¿ç¨‹æ± çš„è¿è¡ŒçŠ¶å†µï¼ŒåŒ…æ‹¬ä»»åŠ¡é˜Ÿåˆ—é•¿åº¦ã€çº¿ç¨‹ä½¿ç”¨ç‡ã€æ‹’ç»ä»»åŠ¡æ•°é‡ç­‰ï¼Œæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´çº¿ç¨‹æ± å‚æ•°ã€‚</p></li><li><p><strong>è€ƒè™‘ä½¿ç”¨ <code>ThreadPoolExecutor</code> ç›´æ¥åˆ›å»º</strong>ï¼šæ‰‹åŠ¨é…ç½®çº¿ç¨‹æ± å‚æ•°ï¼Œä»¥è·å¾—æ›´ç²¾ç¡®çš„æ§åˆ¶å’Œæ›´é«˜çš„çµæ´»æ€§ã€‚</p></li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ThreadPoolExecutorDemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //åˆ›å»ºç­‰å¾…é˜Ÿåˆ—</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ArrayBlockingQueue</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Runnable</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">queue</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArrayBlockingQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Runnable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //åˆ›å»ºçº¿ç¨‹æ± ï¼Œæ± ä¸­ä¿å­˜çš„çº¿ç¨‹æ•°ä¸º3ï¼Œå…è®¸çš„æœ€å¤§çº¿ç¨‹æ•°ä¸º5</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ThreadPoolExecutor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> poolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MILLISECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, queue);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        poolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(()</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å…³é—­çº¿ç¨‹æ± </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        poolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡ªå®šä¹‰çº¿ç¨‹æ± æ—¶ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘å¤šä¸ªå› ç´ ï¼Œä¸‹é¢ä»¥ä¸€ä¸ª 8æ ¸å¿ƒ16çº¿ç¨‹çš„CPUï¼Œ16GBå†…å­˜ çš„æœºå™¨ä¸ºä¾‹ï¼Œæ ¹æ®ä»¥ä¸‹å› ç´ æ¥å…·ä½“åˆ†æå¦‚ä½•è®¾ç½®çº¿ç¨‹æ± å‚æ•°ï¼š</p><ul><li><strong>CPUæ ¸å¿ƒæ•°ä¸çº¿ç¨‹æ•°</strong>ï¼š8ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ16çº¿ç¨‹ã€‚è¿™æ„å‘³ç€CPUå¯ä»¥åŒæ—¶å¤„ç†16ä¸ªçº¿ç¨‹è€Œæ— éœ€ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼Œè¿™å¯¹äºçº¿ç¨‹æ± çš„<code>corePoolSize</code>å’Œ<code>maximumPoolSize</code>æä¾›äº†åŸºç¡€å‚è€ƒã€‚CPUå¯†é›†å‹ä»»åŠ¡å€¾å‘äºä½¿ç”¨æ¥è¿‘æ ¸å¿ƒæ•°çš„çº¿ç¨‹æ•°ï¼Œè€ŒIOå¯†é›†å‹ä»»åŠ¡å¯ä»¥é€‚å½“å¢åŠ ã€‚</li><li><strong>å†…å­˜å¤§å°</strong>ï¼š16GBå†…å­˜æ„å‘³ç€åº”é¿å…ä½¿ç”¨è¿‡å¤§çš„æ— ç•Œé˜Ÿåˆ—æˆ–è¿‡å¤šçº¿ç¨‹å¯¼è‡´å†…å­˜æº¢å‡ºã€‚<code>workQueue</code>çš„å¤§å°å’Œçº¿ç¨‹å †æ ˆå¤§å°åº”è€ƒè™‘åˆ°æ€»å†…å­˜ä¸­ã€‚</li></ul><p><strong>å…·ä½“å› ç´ åˆ†æ</strong></p><ol><li><p><strong>æ ¸å¿ƒçº¿ç¨‹æ•°ï¼ˆcorePoolSizeï¼‰</strong>ï¼šå¯¹äºæ··åˆå‹æˆ–åå‘IOå¯†é›†å‹çš„åº”ç”¨ï¼Œå¯ä»¥è®¾ç½®ä¸ºæ ¸å¿ƒæ•°çš„<code>1~2</code>å€ï¼Œå³<code>8~16</code>ã€‚å¦‚æœæ˜¯çº¯CPUå¯†é›†å‹ï¼Œåˆ™æ¥è¿‘æˆ–ç­‰äºç‰©ç†æ ¸å¿ƒæ•°ï¼ˆ8ï¼‰ã€‚</p></li><li><p><strong>æœ€å¤§çº¿ç¨‹æ•°ï¼ˆmaximumPoolSizeï¼‰</strong>ï¼šè€ƒè™‘åˆ°è¶…çº¿ç¨‹ï¼Œå¯ä»¥è®¾ç½®ä¸º16æˆ–æ›´é«˜ä¸€ç‚¹ï¼Œä½†åº”æ ¹æ®å®é™…æµ‹è¯•è°ƒæ•´ï¼Œé¿å…è¿‡å¤šçº¿ç¨‹å¯¼è‡´èµ„æºç«äº‰å’Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚</p></li><li><p><strong>ä»»åŠ¡é˜Ÿåˆ—ï¼ˆworkQueueï¼‰</strong>ï¼šå¯¹äºå†…å­˜è€ƒè™‘ï¼Œå¯ä»¥ä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—ï¼Œå¦‚<code>ArrayBlockingQueue</code>ï¼Œå¤§å°å¯ä»¥æ ¹æ®é¢„è®¡çš„å¹¶å‘ä»»åŠ¡é‡å’Œå¤„ç†èƒ½åŠ›è°ƒæ•´ï¼Œä¾‹å¦‚è®¾ç½®ä¸º1000ã€‚å¦‚æœä»»åŠ¡é‡æ³¢åŠ¨å¤§ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨<code>LinkedBlockingQueue</code>ï¼Œä½†åŠ¡å¿…æ³¨æ„è®¾ç½®åˆç†çš„ä¸Šé™ä»¥é¿å…å†…å­˜æº¢å‡ºã€‚</p></li><li><p><strong>éæ ¸å¿ƒçº¿ç¨‹å­˜æ´»æ—¶é—´ï¼ˆkeepAliveTimeï¼‰</strong>ï¼šå¯¹äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œéæ ¸å¿ƒçº¿ç¨‹å¯ä»¥è®¾ç½®è¾ƒé•¿çš„å­˜æ´»æ—¶é—´ï¼Œå¦‚60ç§’ï¼Œä»¥ä¾¿åœ¨ä»»åŠ¡é‡ä¸‹é™æ—¶é€æ­¥é‡Šæ”¾èµ„æºã€‚CPUå¯†é›†å‹ä»»åŠ¡åˆ™å¯ä»¥è®¾ä¸ºè¾ƒä½ï¼Œç”šè‡³0ç§’è¿…é€Ÿå›æ”¶ã€‚</p></li><li><p><strong>çº¿ç¨‹å·¥å‚ï¼ˆthreadFactoryï¼‰</strong>ï¼šå¯ä»¥è‡ªå®šä¹‰ä»¥å‘½åçº¿ç¨‹ã€è®¾ç½®ä¼˜å…ˆçº§ç­‰ï¼Œä¾¿äºç›‘æ§å’Œè°ƒè¯•ã€‚</p></li><li><p><strong>æ‹’ç»ç­–ç•¥ï¼ˆhandlerï¼‰</strong>ï¼šæ ¹æ®åº”ç”¨å®¹é”™éœ€æ±‚é€‰æ‹©ï¼Œå¦‚<code>CallerRunsPolicy</code>åœ¨ä»»åŠ¡é˜Ÿåˆ—æ»¡æ—¶ç”±è°ƒç”¨è€…æ‰§è¡Œä»»åŠ¡ï¼Œé¿å…æ‹’ç»ï¼Œé€‚åˆä¸èƒ½ä¸¢å¤±ä»»åŠ¡çš„åœºæ™¯ï¼›<code>AbortPolicy</code>ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œé€‚ç”¨äºéœ€è¦åŠæ—¶å‘ç°å’Œå¤„ç†é”™è¯¯çš„åœºæ™¯ã€‚</p></li></ol><p>å‡è®¾åº”ç”¨ä»¥IOæ“ä½œä¸ºä¸»ï¼Œå¶æœ‰CPUå¯†é›†å‹ä»»åŠ¡ï¼Œä¸”å¸Œæœ›æœ‰ä¸€å®šçš„å¼¹æ€§å¤„ç†çªå‘æµé‡ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ThreadPoolExecutor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> executor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    16</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œåå‘äºIOå¯†é›†å‹ï¼Œè®¾ç½®ä¸ºç‰©ç†æ ¸å¿ƒæ•°çš„ä¸¤å€</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æœ€å¤§çº¿ç¨‹æ•°ï¼Œç•™æœ‰ä¸€å®šä½™åœ°åº”å¯¹é«˜å³°æœŸ</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    60</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // éæ ¸å¿ƒçº¿ç¨‹å­˜æ´»æ—¶é—´ï¼Œå•ä½ç§’</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArrayBlockingQueue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">500</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æœ‰ç•Œé˜Ÿåˆ—ï¼Œæ ¹æ®é¢„è®¡ä»»åŠ¡é‡å’Œå¤„ç†é€Ÿåº¦è°ƒæ•´</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> NamedThreadFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;CustomThreadPool-&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // è‡ªå®šä¹‰çº¿ç¨‹å‘½å</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    new</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CallerRunsPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æ‹’ç»ç­–ç•¥ï¼Œä»»åŠ¡ç”±è°ƒç”¨è€…æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°é…ç½®ä»…ä¸ºç¤ºä¾‹ï¼Œå®é™…åº”ç”¨ä¸­åº”æ ¹æ®å‹åŠ›æµ‹è¯•å’Œç›‘æ§æ•°æ®è¿›è¡Œè°ƒæ•´ä¼˜åŒ–ï¼Œç¡®ä¿çº¿ç¨‹æ± æ—¢èƒ½é«˜æ•ˆå¤„ç†ä»»åŠ¡ï¼Œåˆèƒ½é¿å…èµ„æºè¿‡åº¦æ¶ˆè€—ã€‚</p><h2 id="forkjoinpool" tabindex="-1"><a class="header-anchor" href="#forkjoinpool"><span>ForkJoinPool</span></a></h2><p><code>ForkJoinPool</code>æ˜¯åœ¨JDK7ä¸­å¼•å…¥çš„ï¼Œæ˜¯ExecutorServiceæ¥å£çš„ä¸€ä¸ªé«˜æ•ˆå®ç°ï¼Œä¸“é—¨è®¾è®¡ç”¨äºå¤„ç†å¯åˆ†è§£çš„å¤§è§„æ¨¡ä»»åŠ¡ï¼Œé€šè¿‡åˆ†æ²»ç­–ç•¥ï¼ˆDivide and Conquerï¼‰æ¥æé«˜è®¡ç®—æ•ˆç‡ã€‚</p><p><strong>ç‰¹ç‚¹ä¸ä¼˜åŠ¿</strong>ï¼š</p><ul><li><strong>é«˜æ•ˆå¹¶è¡Œå¤„ç†</strong>ï¼šé€šè¿‡ä»»åŠ¡åˆ†è§£å’Œå·¥ä½œçªƒå–ï¼Œæœ‰æ•ˆåˆ©ç”¨å¤šæ ¸CPUã€‚</li><li><strong>åŠ¨æ€è´Ÿè½½å¹³è¡¡</strong>ï¼šè‡ªåŠ¨è°ƒæ•´ä»»åŠ¡åˆ†é…ï¼Œå‡å°‘çº¿ç¨‹ç©ºé—²æ—¶é—´ã€‚</li><li><strong>å‡å°‘åŒæ­¥å¼€é”€</strong>ï¼šç›¸è¾ƒäºä¼ ç»Ÿçš„çº¿ç¨‹æ± ï¼Œå‡å°‘äº†çº¿ç¨‹é—´åŒæ­¥çš„éœ€æ±‚ã€‚</li><li><strong>çµæ´»çš„é…ç½®</strong>ï¼šå…è®¸ç”¨æˆ·æ ¹æ®å…·ä½“éœ€æ±‚å®šåˆ¶çº¿ç¨‹æ± çš„å¤§å°å’Œè¡Œä¸ºã€‚</li></ul><h3 id="fork-joinæ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#fork-joinæ¡†æ¶"><span>Fork/Joinæ¡†æ¶</span></a></h3><p>Fork/Joinæ¡†æ¶æ˜¯Java 7å¼•å…¥çš„ä¸€ä¸ªç”¨äºå¹¶è¡Œæ‰§è¡Œä»»åŠ¡çš„é«˜çº§å¹¶å‘æ¡†æ¶ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†å¯åˆ†è§£çš„ã€èƒ½å¤Ÿå¹¶è¡Œè®¡ç®—çš„â€œåˆ†è€Œæ²»ä¹‹â€ç±»å‹çš„é—®é¢˜ã€‚å®ƒçš„è®¾è®¡çµæ„Ÿæ¥æºäºå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­çš„map/reduceæ¨¡å‹ä»¥åŠScalaç­‰è¯­è¨€ä¸­çš„å¹¶è¡Œé›†åˆæ“ä½œã€‚</p><div class="hint-container info"><p class="hint-container-title">æ ¸å¿ƒæ¦‚å¿µå’Œç»„ä»¶</p><p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>:</p><ol><li><p><strong>åˆ†å‰ï¼ˆForkï¼‰</strong>ï¼šå°†ä¸€ä¸ªå¤§ä»»åŠ¡ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªé€’å½’ä»»åŠ¡ï¼‰åˆ†è§£æˆä¸¤ä¸ªæˆ–å¤šä¸ªå­ä»»åŠ¡ï¼Œè¿™äº›å­ä»»åŠ¡å¯ä»¥ç‹¬ç«‹æ‰§è¡Œã€‚åœ¨Javaä¸­ï¼Œè¿™æ˜¯é€šè¿‡åœ¨ForkJoinPoolä¸­æäº¤ä»»åŠ¡å®ç°çš„ï¼Œæ¯ä¸ªå­ä»»åŠ¡éƒ½ä¼šè¢«å®‰æ’åˆ°çº¿ç¨‹æ± çš„ä¸€ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œã€‚</p></li><li><p><strong>åˆå¹¶ï¼ˆJoinï¼‰</strong>ï¼šå½“æ‰€æœ‰çš„å­ä»»åŠ¡å®Œæˆæ—¶ï¼Œå®ƒä»¬çš„ç»“æœä¼šè¢«åˆå¹¶æˆåŸå¤§ä»»åŠ¡çš„ç»“æœã€‚è¿™ä¸ªè¿‡ç¨‹ç¡®ä¿äº†å³ä½¿ä»»åŠ¡è¢«åˆ†å‰²æ‰§è¡Œï¼Œæœ€ç»ˆä¹Ÿèƒ½è·å¾—æ­£ç¡®çš„ã€ç»Ÿä¸€çš„ç»“æœã€‚</p></li></ol><p><strong>æ ¸å¿ƒç»„ä»¶</strong>:</p><ol><li><p><strong>ForkJoinPool</strong>ï¼šè¿™æ˜¯Fork/Joinæ¡†æ¶çš„æ ¸å¿ƒæ‰§è¡Œå™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„çº¿ç¨‹æ± ï¼Œç”¨äºç®¡ç†å’Œè°ƒåº¦ä»»åŠ¡ã€‚å®ƒä½¿ç”¨äº†å·¥ä½œçªƒå–ï¼ˆWork-Stealingï¼‰ç®—æ³•ï¼Œè¿™æ„å‘³ç€å½“ä¸€ä¸ªçº¿ç¨‹å®Œæˆå…¶åˆ†é…çš„ä»»åŠ¡å¹¶ä¸”æ²¡æœ‰æ›´å¤šä»»åŠ¡å¯æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šå°è¯•â€œçªƒå–â€å…¶ä»–çº¿ç¨‹çš„ä»»åŠ¡ï¼Œä»è€Œæé«˜CPUåˆ©ç”¨ç‡ã€‚</p></li><li><p><strong>RecursiveAction</strong> å’Œ <strong>RecursiveTask</strong>ï¼šè¿™ä¸¤ä¸ªæŠ½è±¡ç±»æ˜¯Fork/Joinæ¡†æ¶ä¸­ç”¨äºå®šä¹‰ä»»åŠ¡çš„åŸºç±»ã€‚<code>RecursiveAction</code> ç”¨äºæ²¡æœ‰è¿”å›å€¼çš„ä»»åŠ¡ï¼Œè€Œ <code>RecursiveTask&lt;V&gt;</code> åˆ™ç”¨äºæœ‰è¿”å›å€¼çš„ä»»åŠ¡ã€‚å¼€å‘è€…éœ€è¦æ‰©å±•è¿™äº›ç±»å¹¶å®ç° <code>compute()</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è´Ÿè´£ä»»åŠ¡çš„é€»è¾‘ï¼ŒåŒ…æ‹¬å†³å®šæ˜¯å¦è¿›ä¸€æ­¥åˆ†è§£ä»»åŠ¡ã€‚</p></li></ol><p><strong>å·¥ä½œçªƒå–ç®—æ³•</strong>:</p><ul><li>å·¥ä½œçªƒå–ï¼ˆWork-Stealingï¼‰ç®—æ³• æ˜¯ä¸€ç§é«˜æ•ˆçš„çº¿ç¨‹é—´ä»»åŠ¡è°ƒåº¦ç®—æ³•ï¼Œå®ƒå…è®¸ç©ºé—²çº¿ç¨‹ä»å…¶ä»–çº¿ç¨‹çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­â€œçªƒå–â€ä»»åŠ¡æ¥æ‰§è¡Œï¼Œä»è€Œå‡å°‘äº†çº¿ç¨‹ç­‰å¾…æ—¶é—´ï¼Œæé«˜äº†ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ã€‚ForkJoinPoolå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ï¼ˆDequeï¼‰ï¼Œæ¯ä¸ªå·¥ä½œçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„é˜Ÿåˆ—ï¼Œå½“è‡ªå·±çš„é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œå°±å°è¯•ä»å…¶ä»–çº¿ç¨‹çš„é˜Ÿåˆ—æœ«å°¾â€œçªƒå–â€ä»»åŠ¡ã€‚</li></ul></div><p><strong>ä½¿ç”¨åœºæ™¯</strong>:</p><ul><li>æ•°æ®å¹¶è¡Œå¤„ç†ï¼Œå¦‚æ•°ç»„çš„æ’åºã€å¤§è§„æ¨¡æ•°æ®é›†çš„æœç´¢ã€æ ‘ç»“æ„çš„æ“ä½œç­‰ã€‚</li><li>åˆ†å¸ƒå¼è®¡ç®—ä¸­ï¼Œå°½ç®¡Fork/Joinä¸»è¦ç”¨äºåŒä¸€è¿›ç¨‹å†…çš„å¤šçº¿ç¨‹å¹¶è¡Œï¼Œä½†å…¶æ€æƒ³ä¹Ÿå¯åº”ç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œé€šè¿‡ç½‘ç»œé€šä¿¡å®ç°è·¨èŠ‚ç‚¹çš„ä»»åŠ¡åˆ†é…å’Œç»“æœèšåˆã€‚</li></ul><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„Fork/Joinæ¡†æ¶ä½¿ç”¨çš„ç¤ºä¾‹ï¼Œä½¿ç”¨<code>RecursiveTask</code>æ¥å®ç°ä¸€ä¸ªæ±‚å’Œä»»åŠ¡ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.concurrent.RecursiveTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SumTask</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RecursiveTask</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Integer</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> threshold </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SumTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> start;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">end</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> end;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> compute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sum</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        boolean</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> canComputeDirectly</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (end </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> start) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> threshold;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (canComputeDirectly) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> start; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> end; i++) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                sum </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> middle</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (start </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> end) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            SumTask</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SumTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(start, middle);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            SumTask</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SumTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(middle </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, end);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            invokeAll</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task1, task2); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åˆ†å‰ä¸¤ä¸ªå­ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            sum </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> task1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> task2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åˆå¹¶å­ä»»åŠ¡ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sum;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>SumTask</code>ç±»ç»§æ‰¿è‡ª<code>RecursiveTask</code>ï¼Œç”¨äºè®¡ç®—ä¸€ä¸ªåŒºé—´å†…çš„æ•°å­—å’Œã€‚å¦‚æœåŒºé—´çš„é•¿åº¦å°äºæˆ–ç­‰äºé¢„è®¾é˜ˆå€¼ï¼Œä»»åŠ¡ç›´æ¥è®¡ç®—ï¼›å¦åˆ™ï¼Œä»»åŠ¡è¢«åˆ†å‰²æˆä¸¤ä¸ªå­ä»»åŠ¡ï¼Œå¹¶é€’å½’è°ƒç”¨è‡ªèº«ï¼Œæœ€åå°†å­ä»»åŠ¡çš„ç»“æœåˆå¹¶ã€‚</p><h3 id="å¸¸ç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨æ–¹æ³•"><span>å¸¸ç”¨æ–¹æ³•</span></a></h3><p>åœ¨Javaä¸­ï¼Œåˆ›å»º<code>ForkJoinPool</code>ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p><ol><li><p><strong>ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°</strong>ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ForkJoinPool</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> pool </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ForkJoinPool</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™å°†åˆ›å»ºä¸€ä¸ªForkJoinPoolï¼Œå…¶é»˜è®¤çº¿ç¨‹æ•°ç­‰äºç³»ç»Ÿå¯ç”¨çš„å¤„ç†å™¨æ•°é‡ï¼ˆ<code>Runtime.getRuntime().availableProcessors()</code>ï¼‰ã€‚</p></li><li><p><strong>æŒ‡å®šå¹¶è¡Œåº¦åˆ›å»º</strong>ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ForkJoinPool</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> pool </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ForkJoinPool</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(parallelism)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™é‡Œï¼Œ<code>parallelism</code>æŒ‡å®šäº†çº¿ç¨‹æ± ä¸­å¹¶è¡Œçº¿ç¨‹çš„æ•°é‡ã€‚å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è®¾ç½®ï¼Œä½†é€šå¸¸æœ€å¥½æ¥è¿‘ç³»ç»Ÿçš„å¤„ç†å™¨æ ¸å¿ƒæ•°ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚</p></li><li><p><strong>ä½¿ç”¨å…¬å…±æ± </strong>ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ForkJoinPool</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> pool </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ForkJoinPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">commonPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿”å›çš„æ˜¯ä¸€ä¸ª å•ä¾‹çš„<code>ForkJoinPool</code>å®ä¾‹ã€‚è¿™ä¸ªå…¬å…±æ± æ˜¯å…¨å±€å…±äº«çš„ï¼Œå®ƒä¹Ÿæ˜¯æ ¹æ®ç³»ç»Ÿçš„å¤„ç†å™¨æ•°é‡åˆå§‹åŒ–çš„ã€‚ä½¿ç”¨è¿™ä¸ªæ± å¯ä»¥é¿å…åˆ›å»ºè¿‡å¤šçš„çº¿ç¨‹æ± å®ä¾‹ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰€æœ‰ä½¿ç”¨<code>commonPool()</code>çš„åœ°æ–¹å°†å…±äº«åŒä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»»åŠ¡çš„æ··åˆå’Œèµ„æºçš„ç«äº‰ã€‚</p></li></ol><div class="hint-container info"><p class="hint-container-title">ForkJoinPoolå¸¸ç”¨æ–¹æ³•</p><ol><li><p><strong><code>submit(ForkJoinTask task)</code></strong>:<br> æäº¤ä¸€ä¸ªä»»åŠ¡åˆ°ForkJoinPoolä¸­æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ª<code>Future</code>å¯¹è±¡ï¼Œå¯ä»¥ç”¨æ¥è·å–ä»»åŠ¡ç»“æœæˆ–æ£€æŸ¥ä»»åŠ¡çŠ¶æ€ã€‚</p></li><li><p><strong><code>invoke(ForkJoinTask task)</code></strong>:<br> ç›´æ¥æ‰§è¡Œç»™å®šçš„ä»»åŠ¡ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚å¦‚æœæœ‰è¿”å›å€¼ï¼Œæ­¤æ–¹æ³•ä¼šè¿”å›ä»»åŠ¡çš„ç»“æœã€‚æ­¤æ–¹æ³•ä¼šé˜»å¡è°ƒç”¨çº¿ç¨‹ç›´åˆ°ä»»åŠ¡å®Œæˆã€‚</p></li><li><p><strong><code>execute(Runnable task)</code></strong>:<br> æ‰§è¡Œç»™å®šçš„Runnableä»»åŠ¡ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚æ­¤æ–¹æ³•ä¸ä¼šé˜»å¡ï¼Œä»»åŠ¡çš„æ‰§è¡Œç»“æœä¸å¯çŸ¥ã€‚</p></li><li><p><strong><code>shutdown()</code></strong>:<br> å¯åŠ¨ä¸€ä¸ªæœ‰åºçš„å…³é—­è¿‡ç¨‹ï¼Œé˜»æ­¢æ–°ä»»åŠ¡æäº¤åˆ°æ­¤æ± ä¸­ï¼Œä½†æ˜¯å·²æäº¤çš„ä»»åŠ¡å°†ç»§ç»­æ‰§è¡Œç›´åˆ°å®Œæˆã€‚</p></li><li><p><strong><code>awaitTermination(long timeout, TimeUnit unit)</code></strong>:<br> é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆæ‰§è¡Œï¼Œæˆ–è€…è¶…æ—¶ï¼Œæˆ–è€…å½“å‰çº¿ç¨‹è¢«ä¸­æ–­ï¼Œè¿”å›<code>true</code>è¡¨ç¤ºçº¿ç¨‹æ± å·²å…³é—­å¹¶ä¸”æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼Œ<code>false</code>åˆ™è¡¨ç¤ºè¶…æ—¶æˆ–ä¸­æ–­ã€‚</p></li><li><p><strong><code>commonPool()</code></strong>:<br> è·å–ä¸€ä¸ªå…¬å…±çš„ForkJoinPoolå®ä¾‹ï¼Œé€‚ç”¨äºå¤§å¤šæ•°å¹¶å‘ä»»åŠ¡ã€‚æ­¤æ–¹æ³•è¿”å›çš„å®ä¾‹æ˜¯é™æ€çš„ï¼Œåº”è°¨æ…ä½¿ç”¨ä»¥é¿å…å½±å“å…¶ä»–ä½¿ç”¨å®ƒçš„ä»£ç ã€‚</p></li><li><p><strong><code>getQueuedTaskCount()</code></strong>:<br> è¿”å›æ­¤å·¥ä½œé˜Ÿåˆ—ä¸­ä¼°è®¡çš„ä»»åŠ¡æ•°ã€‚</p></li><li><p><strong><code>getActiveThreadCount()</code></strong>:<br> è¿”å›å½“å‰æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ä¼°è®¡æ•°ã€‚</p></li><li><p><strong><code>isTerminated()</code></strong>:<br> å¦‚æœæ­¤æ± å·²ç»ˆæ­¢ï¼Œåˆ™è¿”å›<code>true</code>ï¼Œæ„å‘³ç€æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼Œå¹¶ä¸”æ²¡æœ‰ä»»åŠ¡æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿæ²¡æœ‰ä»»åŠ¡åœ¨ç­‰å¾…æ‰§è¡Œã€‚</p></li></ol></div><h3 id="ä½¿ç”¨åŠä»£ç ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åŠä»£ç ç¤ºä¾‹"><span>ä½¿ç”¨åŠä»£ç ç¤ºä¾‹</span></a></h3><p><strong>ForkJoinPoolä½¿ç”¨æ­¥éª¤</strong>:</p><ol><li><p><strong>åˆ›å»ºForkJoinPool</strong><br> é€šå¸¸ï¼Œå¯ä»¥ä½¿ç”¨<code>ForkJoinPool.commonPool()</code>è·å¾—ä¸€ä¸ªå…±äº«çš„çº¿ç¨‹æ± ï¼Œæˆ–è€…é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºè‡ªå®šä¹‰çš„<code>ForkJoinPool</code>å®ä¾‹ï¼ŒæŒ‡å®šçº¿ç¨‹æ± çš„å¤§å°ç­‰å‚æ•°ã€‚</p></li><li><p><strong>å®ç°ä»»åŠ¡</strong><br> ç»§æ‰¿<code>RecursiveTask</code>æˆ–<code>RecursiveAction</code>å¹¶é‡å†™<code>compute</code>æ–¹æ³•ï¼Œå®šä¹‰ä»»åŠ¡çš„æ‰§è¡Œé€»è¾‘å’Œå¦‚ä½•åˆ†è§£å­ä»»åŠ¡ã€‚</p></li><li><p><strong>æäº¤ä»»åŠ¡</strong><br> ä½¿ç”¨<code>fork()</code>æ–¹æ³•å°†ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± ï¼Œå°†å…¶å¼‚æ­¥æ‰§è¡Œã€‚å¯¹äºéœ€è¦ç­‰å¾…ç»“æœçš„ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨<code>join()</code>æ–¹æ³•è·å–ç»“æœï¼Œè¿™ä¼šé˜»å¡è°ƒç”¨çº¿ç¨‹ç›´åˆ°ä»»åŠ¡å®Œæˆã€‚</p></li></ol><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ForkJoinPoolè®¡ç®—æ•°ç»„å…ƒç´ æ€»å’Œçš„ç®€å•ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.concurrent.ForkJoinPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.concurrent.RecursiveTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ForkJoinPoolExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // åˆå§‹åŒ–ä¸€ä¸ªé•¿åº¦ä¸º10000000çš„é•¿æ•´å‹æ•°ç»„</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">        long</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">numbers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;"> long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10000000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> numbers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i++) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            numbers[i] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å¡«å……æ•°ç»„ï¼Œæ•°å€¼ä¸º1è‡³10000000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // åˆ›å»ºForkJoinPoolå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ForkJoinPool</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> forkJoinPool</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ForkJoinPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // åˆ›å»ºå¹¶æäº¤ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        SumTask</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SumTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(numbers, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">numbers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> forkJoinPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// invokeæ–¹æ³•ä¼šé˜»å¡ç›´åˆ°è®¡ç®—å®Œæˆ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è¾“å‡ºç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ•°ç»„å…ƒç´ æ€»å’Œä¸º: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å…³é—­çº¿ç¨‹æ± </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        forkJoinPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä»»åŠ¡ç±»ï¼Œç»§æ‰¿RecursiveTaskè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæœ‰è¿”å›å€¼çš„ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SumTask</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RecursiveTask</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;"> long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">[] numbers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> to</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SumTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">numbers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> to</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">numbers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> numbers;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> from;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">to</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> to;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> compute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (to </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> from </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å¦‚æœä»»åŠ¡è¶³å¤Ÿå°ï¼Œç›´æ¥è®¡ç®—</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sum</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> from; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> to; i++) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    sum </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> numbers[i];</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sum;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å¦åˆ™ï¼Œå°†ä»»åŠ¡ä¸€åˆ†ä¸ºäºŒï¼Œå¹¶forkä¸¤ä¸ªå­ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> mid</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (from </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> to) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                SumTask</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> leftTask</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SumTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(numbers, from, mid);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                SumTask</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> rightTask</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SumTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(numbers, mid </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, to);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                leftTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å¼‚æ­¥æ‰§è¡Œå·¦åŠéƒ¨åˆ†ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                rightTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å¼‚æ­¥æ‰§è¡Œå³åŠéƒ¨åˆ†ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> leftTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> rightTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç­‰å¾…å¹¶åˆå¹¶å­ä»»åŠ¡çš„ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>SumTask</code>ç±»ï¼Œå®ƒç»§æ‰¿è‡ª<code>RecursiveTask&lt;Long&gt;</code>ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªå¯ä»¥è¿”å›ç»“æœçš„ä»»åŠ¡ã€‚<code>compute</code>æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ¤æ–­ä»»åŠ¡æ˜¯å¦è¶³å¤Ÿå°ä»¥è‡³äºå¯ä»¥ç›´æ¥è®¡ç®—ï¼Œå¦‚æœæ˜¯åˆ™ç›´æ¥è®¡ç®—æ€»å’Œï¼›å¦‚æœä¸æ˜¯ï¼Œåˆ™å°†ä»»åŠ¡åˆ†è§£æˆä¸¤ä¸ªå­ä»»åŠ¡ï¼Œå¹¶é€’å½’åœ°è°ƒç”¨<code>fork()</code>æ¥å¼‚æ­¥æ‰§è¡Œå®ƒä»¬ï¼Œæœ€åé€šè¿‡<code>join()</code>æ–¹æ³•åˆå¹¶å­ä»»åŠ¡çš„ç»“æœã€‚</p><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p><ul><li><strong>ä»»åŠ¡åˆ’åˆ†</strong>ï¼šå¹¶éæ‰€æœ‰ä»»åŠ¡éƒ½é€‚åˆForkJoinPoolï¼Œä»»åŠ¡å¿…é¡»æ˜¯å¯ä»¥æœ‰æ•ˆåˆ†è§£çš„ã€‚</li><li><strong>ä»»åŠ¡ç²’åº¦</strong>ï¼šä»»åŠ¡å¤ªå°ä¼šå¢åŠ ç®¡ç†å¼€é”€ï¼Œå¤ªå¤§åˆ™æ— æ³•å……åˆ†åˆ©ç”¨å¤šæ ¸ã€‚</li><li><strong>èµ„æºé™åˆ¶</strong>ï¼šè¿‡åº¦ä½¿ç”¨å¯èƒ½å¯¼è‡´èµ„æºè€—å°½ï¼Œéœ€æ³¨æ„çº¿ç¨‹æ± å¤§å°çš„è®¾ç½®ã€‚</li></ul><p>ForkJoinPoolåœ¨å¤„ç†å¤§æ•°æ®å¤„ç†ã€å¤æ‚çš„æ•°å­¦è¿ç®—ã€æ·±åº¦ä¼˜å…ˆæœç´¢ã€å½’å¹¶æ’åºç­‰é«˜åº¦å¹¶è¡Œé—®é¢˜æ—¶è¡¨ç°å°¤ä¸ºå‡ºè‰²ã€‚</p><h2 id="å¦‚ä½•å…³é—­çº¿ç¨‹æ± " tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å…³é—­çº¿ç¨‹æ± "><span>å¦‚ä½•å…³é—­çº¿ç¨‹æ± </span></a></h2><p>åœ¨Javaä¸­ï¼Œæ­£ç¡®å…³é—­çº¿ç¨‹æ± æ˜¯éå¸¸é‡è¦çš„ï¼Œä»¥ç¡®ä¿æ‰€æœ‰ä»»åŠ¡å®Œæˆæ‰§è¡Œï¼Œèµ„æºå¾—åˆ°å¦¥å–„é‡Šæ”¾ã€‚å¯¹äº<code>ForkJoinPool</code>å’Œå…¶ä»–åŸºäº<code>ExecutorService</code>çš„çº¿ç¨‹æ± ï¼Œé€šå¸¸é‡‡ç”¨ä»¥ä¸‹æ­¥éª¤è¿›è¡Œå…³é—­ï¼š</p><p><strong>1. <code>shutdown()</code>æ–¹æ³•</strong><br> å¯åŠ¨ä¸€ä¸ªæœ‰åºçš„å…³é—­è¿‡ç¨‹ï¼Œä¸å†æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä½†å·²æäº¤çš„ä»»åŠ¡ä¼šç»§ç»­æ‰§è¡Œç›´åˆ°å®Œæˆã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ExecutorService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> executor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newFixedThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ... æäº¤ä»»åŠ¡åˆ°executor ...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // å…³é—­çº¿ç¨‹æ± ï¼Œä¸å†æ¥å—æ–°ä»»åŠ¡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. <code>awaitTermination(long timeout, TimeUnit unit)</code>æ–¹æ³•</strong></p><ul><li><strong>ä½œç”¨</strong>ï¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°çº¿ç¨‹æ± æ‰€æœ‰ä»»åŠ¡å®Œæˆæ‰§è¡Œï¼Œæˆ–è€…è¶…æ—¶ï¼Œæˆ–è€…å½“å‰çº¿ç¨‹è¢«ä¸­æ–­ã€‚</li><li><strong>ç¤ºä¾‹ä»£ç </strong>ï¼ˆç»“åˆ<code>shutdown()</code>ä½¿ç”¨ï¼‰ï¼š<div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">try</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awaitTermination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">60</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç­‰å¾…60ç§’</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdownNow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // è¶…æ—¶åå°è¯•å–æ¶ˆæ‰€æœ‰æœªå®Œæˆçš„ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">} </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdownNow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // å½“å‰çº¿ç¨‹è¢«ä¸­æ–­ï¼ŒåŒæ ·å°è¯•å–æ¶ˆæ‰€æœ‰æœªå®Œæˆçš„ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">interrupt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // é‡æ–°è®¾ç½®ä¸­æ–­æ ‡å¿—</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>3. <code>shutdownNow()</code>æ–¹æ³•</strong><br> å°è¯•åœæ­¢æ‰€æœ‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«å°šæœªå¼€å§‹æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ã€‚æ­¤æ–¹æ³•ä¼šå°½åŠ›ä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä½†å¹¶ä¸ä¿è¯èƒ½å¤ŸæˆåŠŸä¸­æ–­ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Runnable</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> notStartedTasks </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdownNow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç»¼åˆç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•æ­£ç¡®å…³é—­ä¸€ä¸ªä½¿ç”¨<code>ExecutorService</code>çš„çº¿ç¨‹æ± ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.concurrent.ExecutorService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.concurrent.Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.concurrent.TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.lang.Runtime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ThreadPoolShutdownGracefulExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ExecutorService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> executor</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newFixedThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ³¨å†Œè™šæ‹Ÿæœºå…³é—­é’©å­</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        Runtime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRuntime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addShutdownHook</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Shutdown signal received. Initiating graceful shutdown...&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å…³é—­çº¿ç¨‹æ± ï¼Œä¸å†æ¥å—æ–°ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awaitTermination</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">60</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdownNow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œå¼ºåˆ¶å…³é—­</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">err</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Forcefully shutting down the executor service.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Executor service successfully shut down.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdownNow</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä¸­æ–­ç­‰å¾…ï¼Œç›´æ¥å¼ºåˆ¶å…³é—­</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">interrupt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">err</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Shutdown interrupted. Forcing shutdown.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æäº¤ä¸€äº›ä»»åŠ¡åˆ°çº¿ç¨‹æ± ï¼Œè¿™äº›ä»»åŠ¡èƒ½å¤Ÿå“åº”ä¸­æ–­</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; i++) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">submit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> threadName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isInterrupted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ£€æŸ¥ä¸­æ–­çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(threadName </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot; is running.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ¨¡æ‹Ÿæ‰§è¡Œæ—¶é—´ï¼ŒæœŸé—´å¯èƒ½è¢«ä¸­æ–­</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentThread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">interrupt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä¿æŒä¸­æ–­çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(threadName </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot; was interrupted and will exit.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œçº¿ç¨‹æ± ä¼šåœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸‹å…³é—­ï¼š</p><ol><li><p><strong>æ¥æ”¶åˆ°å¤–éƒ¨ä¸­æ–­ä¿¡å·ï¼ˆå¦‚Ctrl+Cï¼‰</strong>ï¼šå½“ç”¨æˆ·é€šè¿‡ç»ˆç«¯å‘é€ä¸­æ–­ä¿¡å·ï¼ˆé€šå¸¸æ˜¯<code>SIGINT</code>ï¼‰ï¼ŒJavaè™šæ‹Ÿæœºæ¥æ”¶åˆ°è¿™ä¸€ä¿¡å·åï¼Œä¼šæ‰§è¡Œé¢„å…ˆæ³¨å†Œçš„<code>ShutdownHook</code>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>ShutdownHook</code>ä¼šè°ƒç”¨<code>executor.shutdown()</code>å¼€å§‹å…³é—­çº¿ç¨‹æ± çš„è¿‡ç¨‹ï¼Œä¸å†æ¥å—æ–°çš„ä»»åŠ¡ï¼Œå¹¶å°è¯•è®©å·²æäº¤çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚</p><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>å½“JVMï¼ˆJavaè™šæ‹Ÿæœºï¼‰å‡†å¤‡å…³é—­æ—¶ï¼Œæ— è®ºæ˜¯å› ä¸ºæ­£å¸¸æ‰§è¡Œç»“æŸã€ç³»ç»Ÿå…³é—­ã€ç”¨æˆ·ä¸­æ–­ï¼ˆå¦‚æŒ‰ä¸‹Ctrl+Cï¼‰è¿˜æ˜¯è°ƒç”¨äº†System.exit()æ–¹æ³•ï¼Œæ‰€æœ‰å·²æ³¨å†Œçš„<code>shutdown hooks</code>ä¼šè¢«JVMä¾æ¬¡æ‰§è¡Œã€‚</p></div></li><li><p><strong>æ‰€æœ‰ä»»åŠ¡è‡ªç„¶å®Œæˆ</strong>ï¼šå½“Javaåº”ç”¨ç¨‹åºè‡ªç„¶ç»“æŸ(æ­£å¸¸é€€å‡º)ï¼Œæ— è®ºæ˜¯å› ä¸ºæ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œè¿˜æ˜¯é€šè¿‡è°ƒç”¨System.exit(int)æ˜¾å¼é€€å‡ºï¼Œéƒ½ä¼šè§¦å‘å…³é—­é’©å­çš„æ‰§è¡Œã€‚</p></li><li><p><strong>è¶…æ—¶ç­‰å¾…</strong>ï¼šåœ¨<code>awaitTermination</code>æ–¹æ³•ä¸­ï¼Œå¦‚æœåœ¨æŒ‡å®šçš„æ—¶é—´ï¼ˆä¾‹å¦‚ï¼Œæœ¬ä¾‹ä¸­çš„60ç§’ï¼‰å†…ï¼Œæ‰€æœ‰ä»»åŠ¡æœªèƒ½å®Œæˆï¼Œé‚£ä¹ˆä¼šè°ƒç”¨<code>shutdownNow()</code>å¼ºè¡Œä¸­æ–­æ‰€æœ‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶å°è¯•åœæ­¢çº¿ç¨‹æ± ã€‚</p></li><li><p><strong>ä¸­æ–­ç­‰å¾…</strong>ï¼šåœ¨ç­‰å¾…çº¿ç¨‹æ± å…³é—­çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸»çº¿ç¨‹è‡ªèº«è¢«ä¸­æ–­ï¼ˆé€šè¿‡<code>InterruptedException</code>æ•è·åˆ°ï¼‰ï¼Œåˆ™ä¼šè°ƒç”¨<code>shutdownNow()</code>å¼ºåˆ¶å…³é—­çº¿ç¨‹æ± ï¼Œä»¥å“åº”ä¸­æ–­è¯·æ±‚ã€‚</p></li></ol><p>æ€»ä¹‹ï¼Œçº¿ç¨‹æ± ä¼šåœ¨ç¨‹åºä¸»åŠ¨è¯·æ±‚å…³é—­ï¼ˆå¦‚é€šè¿‡å¤–éƒ¨ä¸­æ–­æˆ–ç¨‹åºå†…éƒ¨é€»è¾‘ï¼‰ã€æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•æˆ–é‡åˆ°å…³é—­è¶…æ—¶/ä¸­æ–­ç­‰å¾…çš„æƒ…å†µä¸‹å…³é—­ã€‚è¿™æ ·çš„è®¾è®¡æ—¨åœ¨ç¡®ä¿çº¿ç¨‹æ± èƒ½å¤Ÿæ ¹æ®ä¸åŒçš„è¿è¡Œç¯å¢ƒå’Œæ¡ä»¶ï¼Œå®‰å…¨ä¸”é«˜æ•ˆåœ°å®Œæˆå…¶ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p><div class="hint-container info"><p class="hint-container-title">æ£€æŸ¥çº¿ç¨‹æ± çš„çŠ¶æ€</p><p><strong><code>isShutdown</code></strong></p><ul><li>æ­¤æ–¹æ³•ç”¨äºæ£€æŸ¥çº¿ç¨‹æ± æ˜¯å¦å·²ç»å¯åŠ¨äº†å…³é—­æµç¨‹ã€‚ä¸€æ—¦è°ƒç”¨äº†<code>shutdown()</code>æˆ–<code>shutdownNow()</code>æ–¹æ³•ï¼Œçº¿ç¨‹æ± å°±ä¼šè¿›å…¥â€œå·²å…³é—­â€çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹æ± ä¸å†æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä½†å·²æäº¤çš„ä»»åŠ¡ï¼ˆåŒ…æ‹¬æ­£åœ¨æ‰§è¡Œçš„å’Œé˜Ÿåˆ—ä¸­ç­‰å¾…çš„ä»»åŠ¡ï¼‰ä»ä¼šç»§ç»­æ‰§è¡Œã€‚</li><li>å½“ä½ æƒ³è¦ç¡®è®¤çº¿ç¨‹æ± æ˜¯å¦å·²ç»ä¸å…è®¸æ–°ä»»åŠ¡çš„æäº¤ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ã€‚è¿™æœ‰åŠ©äºå†³å®šæ˜¯å¦éœ€è¦æäº¤æ–°ä»»åŠ¡ï¼Œæˆ–æ˜¯é‡‡å–å…¶ä»–æªæ–½ï¼Œå¦‚ç›´æ¥æ‰§è¡Œä»»åŠ¡ã€è®°å½•æ—¥å¿—æˆ–æŠ›å‡ºå¼‚å¸¸ã€‚</li></ul><p><strong><code>isTerminated</code></strong></p><ul><li>æ­¤æ–¹æ³•ç”¨æ¥æ£€æŸ¥çº¿ç¨‹æ± æ˜¯å¦å·²ç»å®Œå…¨ç»ˆæ­¢ï¼Œå³ä¸ä»…å¯åŠ¨äº†å…³é—­æµç¨‹ï¼Œè€Œä¸”æ‰€æœ‰ä»»åŠ¡ï¼ˆåŒ…æ‹¬å·²æäº¤çš„ä»»åŠ¡å’Œæ‰€æœ‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼‰éƒ½å·²ç»å®Œæˆæ‰§è¡Œï¼Œå¹¶ä¸”çº¿ç¨‹æ± å·²ç»æ¸…ç©ºäº†å·¥ä½œé˜Ÿåˆ—ï¼Œæ²¡æœ‰ä»»ä½•çº¿ç¨‹åœ¨æ‰§è¡Œä»»åŠ¡ã€‚åªæœ‰å½“<code>shutdown()</code>æˆ–<code>shutdownNow()</code>è°ƒç”¨åï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼ˆæˆ–è¢«å–æ¶ˆï¼‰ï¼Œå¹¶ä¸”æ‰€æœ‰çº¿ç¨‹éƒ½å·²é€€å‡ºï¼Œæ­¤æ–¹æ³•æ‰ä¼šè¿”å›<code>true</code>ã€‚</li><li>å½“ä½ éœ€è¦ç¡®ä¿çº¿ç¨‹æ± ä¸­çš„æ‰€æœ‰æ´»åŠ¨éƒ½å·²ç»“æŸï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥å®‰å…¨åœ°è¿›è¡Œèµ„æºå›æ”¶ã€å…³é—­å…¶ä»–ç›¸å…³æœåŠ¡æˆ–æ˜¯é€€å‡ºç¨‹åºã€‚è¿™å¯¹äºç¡®ä¿ç¨‹åºèƒ½å¤Ÿå¹²å‡€ã€å®Œæ•´åœ°ç»“æŸéå¸¸æœ‰ç”¨ã€‚</li></ul><p><strong>isShutdownå’ŒisTerminatedçš„åŒºåˆ«</strong>ï¼š</p><ul><li><strong>ä¸»è¦å·®å¼‚</strong>ï¼š<code>isShutdown</code>ä»…è¡¨æ˜çº¿ç¨‹æ± æ˜¯å¦å¼€å§‹æ‹’ç»æ–°ä»»åŠ¡çš„æäº¤ï¼Œè€Œ<code>isTerminated</code>åˆ™è¿›ä¸€æ­¥è¯´æ˜çº¿ç¨‹æ± æ˜¯å¦å·²ç»å®Œæˆäº†æ‰€æœ‰ä»»åŠ¡ä¸”æ‰€æœ‰çº¿ç¨‹éƒ½å·²é€€å‡ºã€‚ç®€è€Œè¨€ä¹‹ï¼Œ<code>isShutdown</code>è¡¨ç¤ºå…³é—­è¿‡ç¨‹çš„å¼€å§‹ï¼Œè€Œ<code>isTerminated</code>è¡¨ç¤ºå…³é—­è¿‡ç¨‹çš„å½»åº•å®Œæˆã€‚</li><li><strong>ç»„åˆä½¿ç”¨</strong>ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¸¸å¸¸ä¼šå…ˆè°ƒç”¨<code>shutdown()</code>æˆ–<code>shutdownNow()</code>æ¥å¯åŠ¨å…³é—­æµç¨‹ï¼Œç„¶åé€šè¿‡è½®è¯¢<code>isTerminated</code>é…åˆ<code>awaitTermination(long timeout, TimeUnit unit)</code>æ¥ç­‰å¾…çº¿ç¨‹æ± å®Œå…¨ç»ˆæ­¢ï¼Œè¿™åœ¨éœ€è¦ç¡®ä¿æ‰€æœ‰ä»»åŠ¡å®Œæˆåå†è¿›è¡Œåç»­æ“ä½œçš„åœºæ™¯ä¸­éå¸¸å¸¸è§ã€‚</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ExecutorService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> executor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newFixedThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æäº¤ä»»åŠ¡...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æˆ–è€… executor.shutdownNow();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">while</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">executor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isTerminated</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ç­‰å¾…ç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼Œçº¿ç¨‹æ± å·²ç»ˆæ­¢ã€‚&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/ventixy/notebook/edit/main/src/java/syntax/thread/pool.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: msdrizzle@outlook.com">drizzle</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/java/syntax/thread/thread.html" aria-label="Javaå¤šçº¿ç¨‹åŸºç¡€"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->Javaå¤šçº¿ç¨‹åŸºç¡€</div></a><a class="route-link auto-link next" href="/java/syntax/thread/lock.html" aria-label="çº¿ç¨‹åŒæ­¥ä¸é”æœºåˆ¶"><div class="hint">Next<span class="arrow end"></span></div><div class="link">çº¿ç¨‹åŒæ­¥ä¸é”æœºåˆ¶<!----></div></a></nav><div id="vp-comment" class="giscus-wrapper input-top" style="display:block;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Default footer</div><div class="vp-copyright">Copyright Â© 2025 ventixy </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BIf1prCB.js" defer></script>
  </body>
</html>
