<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://x.app/theory/cs/network.html"><meta property="og:site_name" content="doc"><meta property="og:title" content="网络层（Internet Layer）"><meta property="og:description" content="网络层（Internet Layer）: 对应 OSI 模型的网络层，负责数据包的路由和转发 IP地址及子网划分 IPv4：目前广泛使用的版本，地址长度为32位。IPv6：下一代IP协议，地址长度为128位。 IP地址的管理与分配 公有地址：由ICANN统一分配，全网唯一 静态IP：长期固定（如服务器使用）， 动态IP：由DHCP临时分配（如家庭宽带）..."><meta property="og:type" content="article"><meta property="og:image" content="https://image.ventix.top/img02/20220208154657168.png"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2025-02-12T09:46:27.000Z"><meta property="article:author" content="ventixy"><meta property="article:modified_time" content="2025-02-12T09:46:27.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"网络层（Internet Layer）","image":["https://image.ventix.top/img02/20220208154657168.png","https://image.ventix.top/img02/20220208174338820.png","https://image.ventix.top/img02/20210208182726420.png","https://image.ventix.top/img02/20210209113651363.png","https://image.ventix.top/img02/20220209231058254.png"],"dateModified":"2025-02-12T09:46:27.000Z","author":[{"@type":"Person","name":"ventixy","url":"https://www.ventix.top"}]}</script><link rel="icon" href="/jav.ico"><title>网络层（Internet Layer） | doc</title><meta name="description" content="网络层（Internet Layer）: 对应 OSI 模型的网络层，负责数据包的路由和转发 IP地址及子网划分 IPv4：目前广泛使用的版本，地址长度为32位。IPv6：下一代IP协议，地址长度为128位。 IP地址的管理与分配 公有地址：由ICANN统一分配，全网唯一 静态IP：长期固定（如服务器使用）， 动态IP：由DHCP临时分配（如家庭宽带）...">
    <link rel="preload" href="/assets/style-B_XoRuKw.css" as="style"><link rel="stylesheet" href="/assets/style-B_XoRuKw.css">
    <link rel="modulepreload" href="/assets/app-CYbEao8O.js"><link rel="modulepreload" href="/assets/network.html-Dp74x59S.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-Cygfyzri.js" as="script"><link rel="prefetch" href="/assets/blog.html-Bbisoqvi.js" as="script"><link rel="prefetch" href="/assets/intro.html-_kecMhKB.js" as="script"><link rel="prefetch" href="/assets/index.html-CaxeAqLC.js" as="script"><link rel="prefetch" href="/assets/dev.html-DzAgkaN2.js" as="script"><link rel="prefetch" href="/assets/lang.html-DTz82Fex.js" as="script"><link rel="prefetch" href="/assets/mcp.html-V80QfQVq.js" as="script"><link rel="prefetch" href="/assets/program.html-iQpmuO6a.js" as="script"><link rel="prefetch" href="/assets/prompt.html-BhUndXTb.js" as="script"><link rel="prefetch" href="/assets/rag.html-CJmfPqwM.js" as="script"><link rel="prefetch" href="/assets/springai.html-3PjEwPdH.js" as="script"><link rel="prefetch" href="/assets/index.html-B-jUVxnq.js" as="script"><link rel="prefetch" href="/assets/index.html-BUf57QO5.js" as="script"><link rel="prefetch" href="/assets/index.html-C3_Au531.js" as="script"><link rel="prefetch" href="/assets/index.html-BTnDf4bI.js" as="script"><link rel="prefetch" href="/assets/Gradle.html-fb1QzWuk.js" as="script"><link rel="prefetch" href="/assets/index.html-CHD_1IOR.js" as="script"><link rel="prefetch" href="/assets/maven.html-C2qTN1ya.js" as="script"><link rel="prefetch" href="/assets/theme.html-CzKVvEle.js" as="script"><link rel="prefetch" href="/assets/index.html-DOEh-8hM.js" as="script"><link rel="prefetch" href="/assets/index.html-C35HaWf2.js" as="script"><link rel="prefetch" href="/assets/index.html-B8Udp1vy.js" as="script"><link rel="prefetch" href="/assets/c.html-C501vqVq.js" as="script"><link rel="prefetch" href="/assets/c2.html-Dzf1cWkX.js" as="script"><link rel="prefetch" href="/assets/core.html-B39mlT32.js" as="script"><link rel="prefetch" href="/assets/index.html-DvchOMxj.js" as="script"><link rel="prefetch" href="/assets/Annotation.html-D8r6T2pQ.js" as="script"><link rel="prefetch" href="/assets/Enum.html-BfNjNGe2.js" as="script"><link rel="prefetch" href="/assets/HashMap.html-SQisto7k.js" as="script"><link rel="prefetch" href="/assets/Java基础.html-Cn8XUAXB.js" as="script"><link rel="prefetch" href="/assets/Java常用类库.html-Bx7uaMMC.js" as="script"><link rel="prefetch" href="/assets/Java面向对象.html-x-67g_N7.js" as="script"><link rel="prefetch" href="/assets/Lambda.html-D4FJ1FqO.js" as="script"><link rel="prefetch" href="/assets/index.html-DrxkdYdb.js" as="script"><link rel="prefetch" href="/assets/Reflection.html-C6WH4Hi5.js" as="script"><link rel="prefetch" href="/assets/Stream.html-BX5Jz0kj.js" as="script"><link rel="prefetch" href="/assets/collection.html-DIk4Mcpe.js" as="script"><link rel="prefetch" href="/assets/generics.html-dZTkr-aR.js" as="script"><link rel="prefetch" href="/assets/javaIO.html-C1eAg7-Q.js" as="script"><link rel="prefetch" href="/assets/set和map.html-dXSG_TpO.js" as="script"><link rel="prefetch" href="/assets/数组和字符串.html-DpIN09Ao.js" as="script"><link rel="prefetch" href="/assets/index.html-BzGemQho.js" as="script"><link rel="prefetch" href="/assets/index.html-6FV98iwi.js" as="script"><link rel="prefetch" href="/assets/index.html-B87Jt2wX.js" as="script"><link rel="prefetch" href="/assets/index.html-EIeHqQM6.js" as="script"><link rel="prefetch" href="/assets/index.html-BNuVXJ5q.js" as="script"><link rel="prefetch" href="/assets/index.html-CtyHu41a.js" as="script"><link rel="prefetch" href="/assets/idea.html-282Lx6Bo.js" as="script"><link rel="prefetch" href="/assets/mac.html-DTDpWnqv.js" as="script"><link rel="prefetch" href="/assets/nuc8.html-aJmKFRT7.js" as="script"><link rel="prefetch" href="/assets/picgo.html-FJ29dmzO.js" as="script"><link rel="prefetch" href="/assets/usual.html-0PtZaXRt.js" as="script"><link rel="prefetch" href="/assets/vps.html-CwGQK0kE.js" as="script"><link rel="prefetch" href="/assets/website.html-BFCNpuDJ.js" as="script"><link rel="prefetch" href="/assets/windows.html-Nxk3R8uK.js" as="script"><link rel="prefetch" href="/assets/index.html-CgsDZvWm.js" as="script"><link rel="prefetch" href="/assets/encoding.html-DfKrGdSt.js" as="script"><link rel="prefetch" href="/assets/harddisk.html-htMBvwMD.js" as="script"><link rel="prefetch" href="/assets/index.html-BZw9XDYb.js" as="script"><link rel="prefetch" href="/assets/mysql-binlog.html-Cj7vTgYP.js" as="script"><link rel="prefetch" href="/assets/mysql-lock.html-BahfOMhX.js" as="script"><link rel="prefetch" href="/assets/mysql.html-DFzMHqJs.js" as="script"><link rel="prefetch" href="/assets/postgres.html-CDsrHAu4.js" as="script"><link rel="prefetch" href="/assets/ulimit.html-DCmoLP7O.js" as="script"><link rel="prefetch" href="/assets/index.html-LtAD785R.js" as="script"><link rel="prefetch" href="/assets/env.html-Xo4TUOWl.js" as="script"><link rel="prefetch" href="/assets/history.html-DC9k8D05.js" as="script"><link rel="prefetch" href="/assets/jar.html-CcUhZZB-.js" as="script"><link rel="prefetch" href="/assets/kryo.html-Bo_2zDmK.js" as="script"><link rel="prefetch" href="/assets/index.html-DabYQfXK.js" as="script"><link rel="prefetch" href="/assets/k8s.html-CS4B4XAM.js" as="script"><link rel="prefetch" href="/assets/ks-install.html-IhQezYAS.js" as="script"><link rel="prefetch" href="/assets/vm.html-_W0Ta4DN.js" as="script"><link rel="prefetch" href="/assets/index.html-ZJiDlG8g.js" as="script"><link rel="prefetch" href="/assets/crossDomain.html-ChswF6dq.js" as="script"><link rel="prefetch" href="/assets/excel.html-Dyz5e82X.js" as="script"><link rel="prefetch" href="/assets/springboot.html-XsrWyu-P.js" as="script"><link rel="prefetch" href="/assets/index.html-DmLBgxaD.js" as="script"><link rel="prefetch" href="/assets/index.html-C5xbaPEt.js" as="script"><link rel="prefetch" href="/assets/PICO.html-DDaywnzr.js" as="script"><link rel="prefetch" href="/assets/index.html-DeR6BtIG.js" as="script"><link rel="prefetch" href="/assets/ch9329.html-CRmxwCjf.js" as="script"><link rel="prefetch" href="/assets/damb.html-Cl1ZA0ea.js" as="script"><link rel="prefetch" href="/assets/hid.html-D7l9GbCd.js" as="script"><link rel="prefetch" href="/assets/index.html-DinpFnT9.js" as="script"><link rel="prefetch" href="/assets/base.html-CQ8w10kQ.js" as="script"><link rel="prefetch" href="/assets/data.html-BLyFoxwX.js" as="script"><link rel="prefetch" href="/assets/file.html-B6y96nQl.js" as="script"><link rel="prefetch" href="/assets/function.html-CwGerRS1.js" as="script"><link rel="prefetch" href="/assets/oop.html-BvS5Zi-s.js" as="script"><link rel="prefetch" href="/assets/index.html-CX8hbQ_w.js" as="script"><link rel="prefetch" href="/assets/pywin32.html-CWnnlANQ.js" as="script"><link rel="prefetch" href="/assets/yolo.html-CK7U_dmO.js" as="script"><link rel="prefetch" href="/assets/index.html-BqwCZPwM.js" as="script"><link rel="prefetch" href="/assets/base.html-B7cq7clz.js" as="script"><link rel="prefetch" href="/assets/numpy.html-D-NDQqET.js" as="script"><link rel="prefetch" href="/assets/opencv.html-BMuxAxgk.js" as="script"><link rel="prefetch" href="/assets/pillow.html-DTt08qN2.js" as="script"><link rel="prefetch" href="/assets/python.html-B0uKeY6j.js" as="script"><link rel="prefetch" href="/assets/sd.html-B-GvrXsU.js" as="script"><link rel="prefetch" href="/assets/index.html-Dr8hl0wd.js" as="script"><link rel="prefetch" href="/assets/application.html-BV8BxRo7.js" as="script"><link rel="prefetch" href="/assets/call.html-BtKIRSIl.js" as="script"><link rel="prefetch" href="/assets/http.html-CgQDytuM.js" as="script"><link rel="prefetch" href="/assets/interface.html-ld5qkKIK.js" as="script"><link rel="prefetch" href="/assets/io.html-AJHEsWDu.js" as="script"><link rel="prefetch" href="/assets/memory.html-C9kzedI-.js" as="script"><link rel="prefetch" href="/assets/os.html-BcsRXHge.js" as="script"><link rel="prefetch" href="/assets/process.html-_arsgibw.js" as="script"><link rel="prefetch" href="/assets/transport.html-BqoGc87Z.js" as="script"><link rel="prefetch" href="/assets/index.html-ddv3MG6G.js" as="script"><link rel="prefetch" href="/assets/index.html-DrsnyzlP.js" as="script"><link rel="prefetch" href="/assets/Linux.html-Cm_aFsmu.js" as="script"><link rel="prefetch" href="/assets/index.html-D0JAEB--.js" as="script"><link rel="prefetch" href="/assets/file.html-Cq0lDRon.js" as="script"><link rel="prefetch" href="/assets/setting.html-Cz-RyOK7.js" as="script"><link rel="prefetch" href="/assets/shell.html-BHso3m1Q.js" as="script"><link rel="prefetch" href="/assets/Docker.html-4nTlno4G.js" as="script"><link rel="prefetch" href="/assets/index.html-DzC3JnIL.js" as="script"><link rel="prefetch" href="/assets/install.html-H0NFS6Uc.js" as="script"><link rel="prefetch" href="/assets/k8s.html-BcTbdTcG.js" as="script"><link rel="prefetch" href="/assets/index.html-BnF-DX8i.js" as="script"><link rel="prefetch" href="/assets/git.html-CJGGVixb.js" as="script"><link rel="prefetch" href="/assets/git1.html-DaOtr_kC.js" as="script"><link rel="prefetch" href="/assets/jenkins.html-B2v-aWc0.js" as="script"><link rel="prefetch" href="/assets/index.html-B_KeBbR4.js" as="script"><link rel="prefetch" href="/assets/index.html-BDVTA5ym.js" as="script"><link rel="prefetch" href="/assets/index.html-Dfj41VEs.js" as="script"><link rel="prefetch" href="/assets/index.html-CPLwhCcN.js" as="script"><link rel="prefetch" href="/assets/index.html-Clkv0jFl.js" as="script"><link rel="prefetch" href="/assets/netty.html-DVDprFfo.js" as="script"><link rel="prefetch" href="/assets/nio.html-DlFbzpZx.js" as="script"><link rel="prefetch" href="/assets/socket.html-B0OiM2FD.js" as="script"><link rel="prefetch" href="/assets/theory.html-DME1w7It.js" as="script"><link rel="prefetch" href="/assets/Jvm内存管理.html-j8Re9xLU.js" as="script"><link rel="prefetch" href="/assets/Jvm类加载.html-DJ-ysQ1Y.js" as="script"><link rel="prefetch" href="/assets/index.html-Yma0YYGg.js" as="script"><link rel="prefetch" href="/assets/bytecode.html-QH1zTLls.js" as="script"><link rel="prefetch" href="/assets/pt.html-CB1_7Phu.js" as="script"><link rel="prefetch" href="/assets/index.html-C8as36N9.js" as="script"><link rel="prefetch" href="/assets/lock.html-C1yTJ-g3.js" as="script"><link rel="prefetch" href="/assets/pool.html-Dg2l0lOW.js" as="script"><link rel="prefetch" href="/assets/thread.html-CvJd-bdn.js" as="script"><link rel="prefetch" href="/assets/tool.html-BJqeYZJh.js" as="script"><link rel="prefetch" href="/assets/Architecture.html-qnS_E4w6.js" as="script"><link rel="prefetch" href="/assets/index.html-CdvwvR9M.js" as="script"><link rel="prefetch" href="/assets/Transaction.html-B0Aih_ag.js" as="script"><link rel="prefetch" href="/assets/mysql-index.html-fX29xgPL.js" as="script"><link rel="prefetch" href="/assets/redis-java.html-CzI1g89Z.js" as="script"><link rel="prefetch" href="/assets/redis.html-7RL3CUlo.js" as="script"><link rel="prefetch" href="/assets/sql.html-yN06V877.js" as="script"><link rel="prefetch" href="/assets/Hibernate.html-Nt0GZATi.js" as="script"><link rel="prefetch" href="/assets/index.html-Dv7STxhH.js" as="script"><link rel="prefetch" href="/assets/generator.html-CN5rX70j.js" as="script"><link rel="prefetch" href="/assets/mybatis-resource.html-WXuVV76F.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-PnyhFFzL.js" as="script"><link rel="prefetch" href="/assets/tk-mybatis.html-6orVKYMW.js" as="script"><link rel="prefetch" href="/assets/index.html-8SBcULZn.js" as="script"><link rel="prefetch" href="/assets/Servlet.html-CBEpWT9G.js" as="script"><link rel="prefetch" href="/assets/jsp.html-BF246k5D.js" as="script"><link rel="prefetch" href="/assets/mvc.html-H_nZ4f0m.js" as="script"><link rel="prefetch" href="/assets/nginx.html-CNUu-Jds.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-8y2sPrtZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BJfwWPM-.js" as="script"><link rel="prefetch" href="/assets/log.html-DFHlNCTC.js" as="script"><link rel="prefetch" href="/assets/shiro.html-B--dXyuX.js" as="script"><link rel="prefetch" href="/assets/index.html-B8spMVmQ.js" as="script"><link rel="prefetch" href="/assets/design.html-DvbPMGvf.js" as="script"><link rel="prefetch" href="/assets/life.html-CyBmOK95.js" as="script"><link rel="prefetch" href="/assets/mvc-core.html-DO1TK80F.js" as="script"><link rel="prefetch" href="/assets/sb-core.html-Cztp04Wy.js" as="script"><link rel="prefetch" href="/assets/sec.html-Ks1LenAX.js" as="script"><link rel="prefetch" href="/assets/spring.html-BJ17uaA-.js" as="script"><link rel="prefetch" href="/assets/springboot.html-Br9Et0RA.js" as="script"><link rel="prefetch" href="/assets/springmvc.html-CBtc7iWY.js" as="script"><link rel="prefetch" href="/assets/transaction.html-DZ6KIifW.js" as="script"><link rel="prefetch" href="/assets/index.html-rq4jq_Lc.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-DEIvIY_D.js" as="script"><link rel="prefetch" href="/assets/mysql.html-DRg7K0gs.js" as="script"><link rel="prefetch" href="/assets/redis.html-CJRdRYvp.js" as="script"><link rel="prefetch" href="/assets/security.html-B1gh7vfK.js" as="script"><link rel="prefetch" href="/assets/spring.html-DSVwakKn.js" as="script"><link rel="prefetch" href="/assets/springboot.html-CoMpjK2J.js" as="script"><link rel="prefetch" href="/assets/index.html-CDUiSr-c.js" as="script"><link rel="prefetch" href="/assets/base.html-DWgJPIPK.js" as="script"><link rel="prefetch" href="/assets/collect.html-Bl_ZKiQM.js" as="script"><link rel="prefetch" href="/assets/concurrency.html-CnM6diFo.js" as="script"><link rel="prefetch" href="/assets/jvm.html-Dd422-Hx.js" as="script"><link rel="prefetch" href="/assets/index.html-DBtaICdJ.js" as="script"><link rel="prefetch" href="/assets/es.html-C04swIWt.js" as="script"><link rel="prefetch" href="/assets/rocketmq.html-D8GsKibm.js" as="script"><link rel="prefetch" href="/assets/sys.html-Bm3pD7W3.js" as="script"><link rel="prefetch" href="/assets/index.html-Dfi3O-LT.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html--pAav3UF.js" as="script"><link rel="prefetch" href="/assets/RockMQ.html-DdYHY5c6.js" as="script"><link rel="prefetch" href="/assets/Sentinel.html-BZQgvmWt.js" as="script"><link rel="prefetch" href="/assets/dubbo.html-BK_2ezpk.js" as="script"><link rel="prefetch" href="/assets/es.html-Cc0ong64.js" as="script"><link rel="prefetch" href="/assets/eureka.html-Do3472Gl.js" as="script"><link rel="prefetch" href="/assets/gateway.html-lrPlHM9a.js" as="script"><link rel="prefetch" href="/assets/hystrix.html-C_-tkA95.js" as="script"><link rel="prefetch" href="/assets/kafka.html-2-kqHeIn.js" as="script"><link rel="prefetch" href="/assets/nacos.html-CH1dI2sX.js" as="script"><link rel="prefetch" href="/assets/zookeeper.html-B3hftmrJ.js" as="script"><link rel="prefetch" href="/assets/index.html-CcW0MVh0.js" as="script"><link rel="prefetch" href="/assets/cron.html-DEBIb9en.js" as="script"><link rel="prefetch" href="/assets/db.html-DTDimjmf.js" as="script"><link rel="prefetch" href="/assets/dup.html-SaHJHaHX.js" as="script"><link rel="prefetch" href="/assets/lock.html-D-jCBfU2.js" as="script"><link rel="prefetch" href="/assets/redis.html-wMGQQXCt.js" as="script"><link rel="prefetch" href="/assets/transac.html-i-gow_fg.js" as="script"><link rel="prefetch" href="/assets/walk.html-ltUpWt1A.js" as="script"><link rel="prefetch" href="/assets/index.html-BG-VdKAi.js" as="script"><link rel="prefetch" href="/assets/numpy.html-DFpDzTud.js" as="script"><link rel="prefetch" href="/assets/pandas.html-B0ghgZGo.js" as="script"><link rel="prefetch" href="/assets/index.html-DHiUkDGF.js" as="script"><link rel="prefetch" href="/assets/css.html-DPlZXza3.js" as="script"><link rel="prefetch" href="/assets/css2.html-BBTuDL6p.js" as="script"><link rel="prefetch" href="/assets/css3.html-Dd1JshDN.js" as="script"><link rel="prefetch" href="/assets/css4.html-dxClVPyX.js" as="script"><link rel="prefetch" href="/assets/html.html-C4uEhZNf.js" as="script"><link rel="prefetch" href="/assets/html5.html-DXi8zT_t.js" as="script"><link rel="prefetch" href="/assets/index.html-BjmfCjsU.js" as="script"><link rel="prefetch" href="/assets/dom.html-D6C0GmUH.js" as="script"><link rel="prefetch" href="/assets/es6.html-Dd6gGVU6.js" as="script"><link rel="prefetch" href="/assets/js.html-BKCfzT2z.js" as="script"><link rel="prefetch" href="/assets/js2.html-B0xHqbgN.js" as="script"><link rel="prefetch" href="/assets/index.html-Dnn-5Myu.js" as="script"><link rel="prefetch" href="/assets/ts.html-DLkDEW9O.js" as="script"><link rel="prefetch" href="/assets/ts2.html-iUxniJdR.js" as="script"><link rel="prefetch" href="/assets/index.html-Z2FcNKHI.js" as="script"><link rel="prefetch" href="/assets/react.html-BhMy19C9.js" as="script"><link rel="prefetch" href="/assets/ui.html-CO1yz8Tj.js" as="script"><link rel="prefetch" href="/assets/vue.html-60Q21q7v.js" as="script"><link rel="prefetch" href="/assets/index.html-i2FGAbTJ.js" as="script"><link rel="prefetch" href="/assets/backend.html-BbZVQMc0.js" as="script"><link rel="prefetch" href="/assets/nestjs.html-CWNgYskl.js" as="script"><link rel="prefetch" href="/assets/index.html--L0U4DLt.js" as="script"><link rel="prefetch" href="/assets/build.html-DDrHDtgy.js" as="script"><link rel="prefetch" href="/assets/format.html-BM91zCOx.js" as="script"><link rel="prefetch" href="/assets/node.html-CLIsFeSZ.js" as="script"><link rel="prefetch" href="/assets/index.html-GWJfLyyN.js" as="script"><link rel="prefetch" href="/assets/index.html-D2uSN1GF.js" as="script"><link rel="prefetch" href="/assets/index.html-D8rEBkRy.js" as="script"><link rel="prefetch" href="/assets/baz.html-DCoDkWxB.js" as="script"><link rel="prefetch" href="/assets/index.html-BkO9UHwJ.js" as="script"><link rel="prefetch" href="/assets/ray.html-CpD8kU-D.js" as="script"><link rel="prefetch" href="/assets/404.html-B-r8-OX6.js" as="script"><link rel="prefetch" href="/assets/index.html-CfN3Hcaw.js" as="script"><link rel="prefetch" href="/assets/index.html-Kjyi5J2A.js" as="script"><link rel="prefetch" href="/assets/index.html-DFDTwjUa.js" as="script"><link rel="prefetch" href="/assets/index.html-BfYrSWsb.js" as="script"><link rel="prefetch" href="/assets/index.html-CmVvGxuU.js" as="script"><link rel="prefetch" href="/assets/index.html-DIvrx9M_.js" as="script"><link rel="prefetch" href="/assets/index.html-DymN6sBe.js" as="script"><link rel="prefetch" href="/assets/index.html-D12kYdZ7.js" as="script"><link rel="prefetch" href="/assets/index.html-CE9-vc7S.js" as="script"><link rel="prefetch" href="/assets/index.html-R4-wXX9q.js" as="script"><link rel="prefetch" href="/assets/index.html-C5lWNcEB.js" as="script"><link rel="prefetch" href="/assets/index.html-CNBC7h0k.js" as="script"><link rel="prefetch" href="/assets/index.html-CwtCQoEq.js" as="script"><link rel="prefetch" href="/assets/index.html-FpvglhkP.js" as="script"><link rel="prefetch" href="/assets/index.html-DYewPzYK.js" as="script"><link rel="prefetch" href="/assets/index.html-DlHraM5W.js" as="script"><link rel="prefetch" href="/assets/index.html-B1U9NMIg.js" as="script"><link rel="prefetch" href="/assets/index.html-CMVjLthT.js" as="script"><link rel="prefetch" href="/assets/index.html-BAIUxd4b.js" as="script"><link rel="prefetch" href="/assets/index.html-CcXHauUc.js" as="script"><link rel="prefetch" href="/assets/index.html-DlWFhQAh.js" as="script"><link rel="prefetch" href="/assets/index.html-5Y8FuIY3.js" as="script"><link rel="prefetch" href="/assets/index.html-J1p_eGlb.js" as="script"><link rel="prefetch" href="/assets/index.html-BZCRz5gv.js" as="script"><link rel="prefetch" href="/assets/index.html-CQhckmWh.js" as="script"><link rel="prefetch" href="/assets/index.html-jHP9nIpi.js" as="script"><link rel="prefetch" href="/assets/index.html-Cm26WBxm.js" as="script"><link rel="prefetch" href="/assets/index.html-B3hg6GV3.js" as="script"><link rel="prefetch" href="/assets/index.html-BIX27Gmp.js" as="script"><link rel="prefetch" href="/assets/index.html-DVHEGjMt.js" as="script"><link rel="prefetch" href="/assets/index.html-RK-J8b_u.js" as="script"><link rel="prefetch" href="/assets/index.html-B16ztYg-.js" as="script"><link rel="prefetch" href="/assets/index.html-DDrc9TiV.js" as="script"><link rel="prefetch" href="/assets/index.html-DKjI7Y2e.js" as="script"><link rel="prefetch" href="/assets/index.html-CnwSR7Wc.js" as="script"><link rel="prefetch" href="/assets/index.html-B8nSGQOu.js" as="script"><link rel="prefetch" href="/assets/index.html-nNkowOzK.js" as="script"><link rel="prefetch" href="/assets/index.html-D1UCmhni.js" as="script"><link rel="prefetch" href="/assets/index.html-CDxMLJ1l.js" as="script"><link rel="prefetch" href="/assets/index.html-BDPZVId-.js" as="script"><link rel="prefetch" href="/assets/index.html-BcSiMV1v.js" as="script"><link rel="prefetch" href="/assets/index.html-dpHuK_DW.js" as="script"><link rel="prefetch" href="/assets/index.html-DC2uo5lk.js" as="script"><link rel="prefetch" href="/assets/index.html-id-krpAg.js" as="script"><link rel="prefetch" href="/assets/index.html-B-k9gcpd.js" as="script"><link rel="prefetch" href="/assets/index.html-Bg_WCly5.js" as="script"><link rel="prefetch" href="/assets/index.html-C_W5ueSp.js" as="script"><link rel="prefetch" href="/assets/index.html-CGs-6kN0.js" as="script"><link rel="prefetch" href="/assets/index.html-DOki0epm.js" as="script"><link rel="prefetch" href="/assets/index.html-D-NEPBbq.js" as="script"><link rel="prefetch" href="/assets/index.html-De-X1HAS.js" as="script"><link rel="prefetch" href="/assets/index.html-DL5BYvCo.js" as="script"><link rel="prefetch" href="/assets/index.html-abQVA6uc.js" as="script"><link rel="prefetch" href="/assets/index.html-jDzwgSn3.js" as="script"><link rel="prefetch" href="/assets/index.html-DOCal--h.js" as="script"><link rel="prefetch" href="/assets/index.html-BOJ9A6eV.js" as="script"><link rel="prefetch" href="/assets/index.html-CfB_E_cN.js" as="script"><link rel="prefetch" href="/assets/index.html-CxNo7H5e.js" as="script"><link rel="prefetch" href="/assets/index.html-DqVxGmUF.js" as="script"><link rel="prefetch" href="/assets/index.html-6rJ2y6ZE.js" as="script"><link rel="prefetch" href="/assets/index.html-BDCXUTNd.js" as="script"><link rel="prefetch" href="/assets/index.html-ZZMw3JNl.js" as="script"><link rel="prefetch" href="/assets/index.html-mOHm16pi.js" as="script"><link rel="prefetch" href="/assets/index.html-3Rh-0wxr.js" as="script"><link rel="prefetch" href="/assets/index.html-DJgGto4P.js" as="script"><link rel="prefetch" href="/assets/index.html-DT4XkccF.js" as="script"><link rel="prefetch" href="/assets/index.html-F0b1YsrA.js" as="script"><link rel="prefetch" href="/assets/index.html-CL83qZdD.js" as="script"><link rel="prefetch" href="/assets/index.html-ChFeFdmx.js" as="script"><link rel="prefetch" href="/assets/index.html-DoMFsb2J.js" as="script"><link rel="prefetch" href="/assets/index.html-CP1_xS0g.js" as="script"><link rel="prefetch" href="/assets/index.html-D_cKi3ai.js" as="script"><link rel="prefetch" href="/assets/index.html-CPQBrBFc.js" as="script"><link rel="prefetch" href="/assets/index.html-BBjUgv6N.js" as="script"><link rel="prefetch" href="/assets/index.html-DDN9wQxt.js" as="script"><link rel="prefetch" href="/assets/index.html-YjWLNNBB.js" as="script"><link rel="prefetch" href="/assets/index.html-CH-icHGX.js" as="script"><link rel="prefetch" href="/assets/index.html-BcHdmWER.js" as="script"><link rel="prefetch" href="/assets/index.html-GgGR4x_9.js" as="script"><link rel="prefetch" href="/assets/index.html-Br06Ugs_.js" as="script"><link rel="prefetch" href="/assets/index.html-Bs7Umwxc.js" as="script"><link rel="prefetch" href="/assets/index.html-Dbp1NkcC.js" as="script"><link rel="prefetch" href="/assets/index.html-DL4uIEZx.js" as="script"><link rel="prefetch" href="/assets/index.html-DkJeuH-O.js" as="script"><link rel="prefetch" href="/assets/flowchart-CTwbLKUk.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-B5TJVwBc.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">doc</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/AI/" aria-label="  AI  "><!--[--><span class="font-icon icon iconfont icon-ai-robot" style=""></span><!--]-->  AI  <!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Java"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span>Java<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Java开发知识体系</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/java/base/" aria-label="Java基础语法入门"><!---->Java基础语法入门<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/java/core/" aria-label="Java进阶及核心特性"><!---->Java进阶及核心特性<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/java/frame/" aria-label="JavaWeb及常用框架"><!---->JavaWeb及常用框架<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/java/database/" aria-label="数据库与ORM框架"><!---->数据库与ORM框架<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/java/service/" aria-label="分布式与微服务架构"><!---->分布式与微服务架构<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Java项目及解决方案</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/project/base/" aria-label="常见工具和环境"><!---->常见工具和环境<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/project/mall/" aria-label="电商项目综合实践"><!---->电商项目综合实践<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/project/solution/" aria-label="项目场景解决方案"><!---->项目场景解决方案<!----></a></li></ul></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/java/interview/" aria-label="Java常见面试题分析"><!--[--><span class="font-icon icon iconfont icon-microservice" style=""></span><!--]-->Java常见面试题分析<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Web"><!--[--><span class="font-icon icon iconfont icon-net" style=""></span>Web<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/web/base/" aria-label="前端基础知识"><!--[--><span class="font-icon icon iconfont icon-net" style=""></span><!--]-->前端基础知识<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/web/core/" aria-label="开发框架和工具"><!--[--><span class="font-icon icon iconfont icon-cloud" style=""></span><!--]-->开发框架和工具<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/web/security/" aria-label="性能优化与Web安全"><!--[--><span class="font-icon icon iconfont icon-project" style=""></span><!--]-->性能优化与Web安全<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Python"><!--[--><span class="font-icon icon iconfont icon-python" style=""></span>Python<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/python/base/" aria-label="开发环境和基础语法"><!--[--><span class="font-icon icon iconfont icon-python" style=""></span><!--]-->开发环境和基础语法<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/python/frame/" aria-label="常用库和框架"><!--[--><span class="font-icon icon iconfont icon-app" style=""></span><!--]-->常用库和框架<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/python/image/" aria-label="Python图像处理"><!--[--><span class="font-icon icon iconfont icon-img" style=""></span><!--]-->Python图像处理<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/python/Project/" aria-label="相关项目及应用"><!--[--><span class="font-icon icon iconfont icon-project" style=""></span><!--]-->相关项目及应用<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="C++"><!--[--><span class="font-icon icon iconfont icon-cpp" style=""></span>C++<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cpp/base/" aria-label="C/C++基础语法入门"><!---->C/C++基础语法入门<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cpp/ed/" aria-label="单片机和嵌入式开发"><!---->单片机和嵌入式开发<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Blog"><!--[--><span class="font-icon icon iconfont icon-blog" style=""></span>Blog<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog.html" aria-label="Blog HomePage"><!--[--><span class="font-icon icon iconfont icon-home" style=""></span><!--]-->Blog HomePage<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/blog/" aria-label="导航/日常博客记录"><!---->导航/日常博客记录<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/cs/" aria-label="计算机理论基础"><!---->计算机理论基础<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/java/" aria-label="Java/AI开发相关记录"><!---->Java/AI开发相关记录<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/db/" aria-label="数据库相关博客"><!---->数据库相关博客<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/om/" aria-label="运维基础及环境搭建"><!---->运维基础及环境搭建<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/ventixy/notebook" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable active"><span class="font-icon icon iconfont icon-computer" style=""></span><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/theory/cs/" aria-label="计算机网络和操作系统"><!---->计算机网络和操作系统<!----></a><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/theory/cs/interface.html" aria-label="网络接口层"><!---->网络接口层<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/theory/cs/network.html" aria-label="网络层"><!---->网络层<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/theory/cs/transport.html" aria-label="传输层"><!---->传输层<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/theory/cs/application.html" aria-label="应用层"><!---->应用层<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/theory/cs/http.html" aria-label="HTTP/HTTPS"><!---->HTTP/HTTPS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/theory/cs/os.html" aria-label="操作系统基础"><!---->操作系统基础<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/theory/cs/process.html" aria-label="进程管理"><!---->进程管理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/theory/cs/memory.html" aria-label="内存管理"><!---->内存管理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/theory/cs/io.html" aria-label="文件与IO管理"><!---->文件与IO管理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/theory/cs/call.html" aria-label="OS系统调用"><!---->OS系统调用<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->网络层（Internet Layer）</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://www.ventix.top" target="_blank" rel="noopener noreferrer">ventixy</a></span><span property="author" content="ventixy"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2025-02-06T14:43:25.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 27 min</span><meta property="timeRequired" content="PT27M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ip地址及子网划分">IP地址及子网划分</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ip地址及其分类">IP地址及其分类</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#特殊ip地址">特殊IP地址</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#子网的划分">子网的划分</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#无类别域间路由">无类别域间路由</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#internet-protocol">Internet Protocol</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ip数据报格式">IP数据报格式</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#分片与重组">分片与重组</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#路由与路路由器">路由与路路由器</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#路由表及路由转发">路由表及路由转发</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#网络地址转换">网络地址转换</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#icmp协议">ICMP协议</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#igmp协议">IGMP协议</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ipv6地址及数据报">IPv6地址及数据报</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ipv6数据报">IPv6数据报</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#与ipv4的区别">与IPv4的区别</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><p>网络层（Internet Layer）: 对应 OSI 模型的网络层，负责数据包的路由和转发</p><h2 id="ip地址及子网划分" tabindex="-1"><a class="header-anchor" href="#ip地址及子网划分"><span>IP地址及子网划分</span></a></h2><p>IPv4：目前广泛使用的版本，地址长度为32位。IPv6：下一代IP协议，地址长度为128位。</p><p>IP地址的管理与分配</p><ol><li><strong>公有地址</strong>：由ICANN统一分配，全网唯一</li><li><strong>静态IP</strong>：长期固定（如服务器使用）， <strong>动态IP</strong>：由DHCP临时分配（如家庭宽带）</li></ol><div class="hint-container tip"><p class="hint-container-title">MAC地址和IP地址的区别</p><ul><li><p>MAC地址是物理地址，嵌入在网络接口卡（<strong>NIC</strong>）中，主要用于在同一局域网（LAN）内进行设备间的直接通信，它确保了数据帧能够在同一个子网内的主机之间准确传输</p></li><li><p>MAC地址工作在数据链路层，IP地址工作在网络层</p></li><li><p>IP地址则是逻辑地址，用于标识网络中的设备，并且支持跨多个子网的路由功能，使得数据包可以在不同网络之间传输，即使这些网络并未直连。</p></li></ul></div><h3 id="ip地址及其分类" tabindex="-1"><a class="header-anchor" href="#ip地址及其分类"><span>IP地址及其分类</span></a></h3><p>IPv4地址由 <strong>32位二进制</strong> 构成，常采用 <mark>点分十进制</mark> 表示（如<code>192.168.1.1</code>），分为4个八位组</p><p>IP地址的基本结构/组成要素：</p><ul><li><strong>网络号（Network ID）</strong> ：标识设备所属的网络</li><li><strong>主机号（Host ID）</strong> ：标识网络内的具体设备</li></ul><p>IP地址最初被划分为A、B、C、D、E五类，但因地址浪费等问题已逐渐被CIDR取代</p><!-- ![](https://image.ventix.top/img02/20220208154657168.png) --><figure><img src="https://image.ventix.top/img02/20220208174338820.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><p><strong>A类</strong>：前8位为网络号，后24位为主机号，适用于超大规模网络（如国家主干网），但仅有<code>126</code>个可用A类网络，导致地址浪费。</p></li><li><p><strong>B类</strong>：前16位为网络号，后16位为主机号，适用于中型机构，但全球仅有约<code>1.6</code>万个B类网络，实际分配中仍存在浪费。</p></li><li><p><strong>C类</strong>：前24位为网络号，后8位为主机号，适用于小型网络，但每个网络仅支持<code>254</code>台主机，需大量C类地址覆盖中型需求，导致路由表膨胀。</p></li></ul><p>随着CIDR（无类域间路由）的普及，传统ABC类划分已不再重要，IP地址分配转为无类别方式，仅D/E类保留原有用途。</p><hr><p><span style="color:purple;">P地址根据其使用范围和分配方式，还可以分为 公有IP地址 和 私有IP地址</span>。公有IP地址在全球范围内是唯一的；私有IP地址在同一局域网内是唯一的，但可以在不同的局域网中重复使用。</p><div class="hint-container info"><p class="hint-container-title">公有IP地址和私有IP地址</p><p><span style="color:purple;font-weight:bold;">公有IP地址（Public IP Address）</span>：公有IP地址是全球唯一的，在互联网上用于标识特定的设备或服务。这些地址允许设备直接访问互联网，并且可以从任何地方通过互联网访问。</p><ul><li><p>分配方式：由互联网编号分配机构（如ICANN、IANA等）及其区域性的分支机构（如ARIN、RIPE NCC、APNIC等）进行管理和分配。用户或组织需要向ISP（互联网服务提供商）申请获得公有IP地址</p></li><li><p>可见性与管理：公有IP地址在全球范围内都是唯一且可路由的，这意味着它们可以直接被其他所有连接到互联网的设备访问。因此，拥有公有IP地址的服务器（例如网站服务器、邮件服务器等）可以直接接收来自外部网络的数据请求。</p></li></ul><p>由于公有IP地址可以直接从互联网访问，所以通常需要更强的安全措施来保护相关设备免受未授权访问和其他安全威胁。</p><hr><p><span style="color:purple;font-weight:bold;">私有IP地址（Private IP Address）</span>：私有IP地址是为内部网络设计的，不在互联网上公开使用。主要用于家庭、企业或其他类型的局域网（LAN），以节省有限的IPv4地址资源。这些地址可以在不同的独立网络中重复使用。</p><ul><li><p>分配方式：私有IP地址段是由IANA专门预留的一组地址范围，包括：</p><ul><li>10.0.0.0 到 10.255.255.255（A类）</li><li>172.16.0.0 到 172.31.255.255（B类）</li><li>192.168.0.0 到 192.168.255.255（C类）</li></ul></li><li><p>可见性与管理：私有IP地址仅在内部网络内有效，不能直接从互联网访问。为了使内部网络中的设备能够访问互联网，通常需要使用网络地址转换（NAT）技术，将私有IP地址转换为一个有效的公有IP地址。</p></li></ul></div><p>通过使用私有IP地址，可以显著减少对公有IP地址的需求，降低网络建设和维护的成本。此外，私有IP地址提供了更高的灵活性和控制力，便于内部网络的管理和扩展。</p><hr><h3 id="特殊ip地址" tabindex="-1"><a class="header-anchor" href="#特殊ip地址"><span>特殊IP地址</span></a></h3><p><strong>主机号全为 0 和全为 1 的情况</strong></p><ul><li>主机号全为 0（如 <code>192.168.1.0</code>）：代表该网络的<strong>网络地址</strong>，不能用作主机IP。</li><li>主机号全为 1（如 <code>192.168.1.255</code>）：传统上被视为<strong>广播地址</strong>，用于向该网络内的所有主机发送数据包。在CIDR（无类域间路由）下，可根据具体配置决定是否允许分配。</li></ul><p>一些常见的本地特殊IP：</p><ol><li>环回地址：<code>127.x.x.x</code>（如127.0.0.1），用于本地测试。</li><li>广播地址： <strong>受限广播</strong>：<code>255.255.255.255</code>，仅在本地网络生效。</li><li>私有地址： <ul><li>A类私有：<code>10.0.0.0</code> ~ <code>10.255.255.255</code></li><li>B类私有：<code>172.16.0.0</code> ~ <code>172.31.255.255</code></li><li>C类私有：<code>192.168.0.0</code> ~ <code>192.168.255.255</code></li></ul></li><li>链路本地地址（Link-Local Addresses）: <code>169.254.0.0/16</code> 当无法从DHCP服务器获取IP地址时，计算机会自动分配此类地址用于同一局域网内的通信</li></ol><p>这些地址仅在内部网络使用，需通过NAT转换访问公网</p><hr><h3 id="子网的划分" tabindex="-1"><a class="header-anchor" href="#子网的划分"><span>子网的划分</span></a></h3><p><strong>子网（Subnet）</strong> 是指从一个较大的网络中划分出的较小的逻辑网络。通过子网划分，可以将一个大的网络分割成多个较小的部分，每个部分作为一个独立的子网运作。这样做有几个好处：</p><ul><li><strong>提高地址利用率</strong>：将单一网络分割为多个子网，避免主机号浪费（如B类网络划分子网后，可为不同部门分配独立子网）。</li><li><strong>优化网络管理</strong>：隔离广播域、增强安全性、简化故障排查。</li></ul><div class="hint-container important"><p class="hint-container-title">子网划分的实现——子网掩码</p><p><strong>子网掩码（Subnet Mask）</strong> 是一种用于 <mark>区分IP地址中的网络部分和主机部分</mark> 的 <strong>32位数字</strong>，子网掩码有两种表示形式：</p><ul><li>点分十进制表示法：例如，对于一个典型的C类网络，其默认子网掩码为<code>255.255.255.0</code></li><li>前缀长度表示法（CIDR记法）：例如，上述子网掩码也可以写作<code>/24</code>，表示前<code>24</code>位是网络部分。</li></ul><p>通过子网掩码与IP地址按位 <span style="color:red;"><strong>与</strong> 运算（只有两位都为1时，结果位才为1，否则结果位为0）</span>，可得到该IP地址所在网段，示例：IP地址 <code>192.168.10.215</code>，子网掩码 <code>255.255.255.0</code></p><figure><img src="https://image.ventix.top/img02/20210208182726420.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><p><span style="color:red;">要将子网等分为 <mjx-container class="MathJax" jax="SVG" style="position:relative;"><svg style="vertical-align:0;" xmlns="http://www.w3.org/2000/svg" width="2.279ex" height="1.528ex" role="img" focusable="false" viewBox="0 -675.5 1007.3 675.5" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mi>n</mi></msup></math></mjx-assistive-mml></mjx-container> 个更小的子网，则将子网掩码右移 <mjx-container class="MathJax" jax="SVG" style="position:relative;"><svg style="vertical-align:-0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.357ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 600 453" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></mjx-assistive-mml></mjx-container> 位，每个小子网是原来子网的 <mjx-container class="MathJax" jax="SVG" style="position:relative;"><svg style="vertical-align:-0.781ex;" xmlns="http://www.w3.org/2000/svg" width="2.607ex" height="2.737ex" role="img" focusable="false" viewBox="0 -864.9 1152.2 1209.9" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mfrac"><g data-mml-node="mn" transform="translate(399.3,394) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="msup" transform="translate(220,-345) scale(0.707)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(533,289) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><rect width="912.2" height="60" x="120" y="220"></rect></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>1</mn><msup><mn>2</mn><mi>n</mi></msup></mfrac></math></mjx-assistive-mml></mjx-container></span></p><p>示例：将<code>192.168.1.0/24</code>划分为4个子网，右移 2 位后子网掩码为：<code>255.255.255.192(/26)</code>，则每个子网只剩 6 位主机号（实际可用的主机IP地址数量为 <mjx-container class="MathJax" jax="SVG" style="position:relative;"><svg style="vertical-align:-0.186ex;" xmlns="http://www.w3.org/2000/svg" width="11.295ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 4992.6 915.9" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(533,363) scale(0.707)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></g></g><g data-mml-node="mo" transform="translate(1158.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(2159,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(2936.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(3992.6,0)"><path data-c="36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(500,0)"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mn>6</mn></msup><mo>−</mo><mn>2</mn><mo>=</mo><mn>62</mn></math></mjx-assistive-mml></mjx-container> ），每个子网信息如下：</p><ul><li>子网1：<code>192.168.1.0/26</code>（主机范围：<code>192.168.1.1 - 192.168.1.62</code>）</li><li>子网2：<code>192.168.1.64/26</code>（主机范围：<code>192.168.1.65 - 192.168.1.126</code>）</li><li>子网3：<code>192.168.1.128/26</code>（主机范围：<code>192.168.1.129 - 192.168.1.190</code>）</li><li>子网4：<code>192.168.1.192/26</code>（主机范围：<code>192.168.1.193 - 192.168.1.254</code>）</li></ul><p>几个关键数字对应的二进制数：<code>64 =&gt; 0100 0000</code> ，<code>128 =&gt; 1000 0000</code>，<code>192 =&gt; 1100 0000</code></p><p>子网掩码允许网络管理员创建自定义大小的子网，不再局限于传统的A、B、C类网络的固定大小</p><hr><h3 id="无类别域间路由" tabindex="-1"><a class="header-anchor" href="#无类别域间路由"><span>无类别域间路由</span></a></h3><p>CIDR（<strong>Classless Inter-Domain Routing</strong>，无类别域间路由）是一种用于更高效分配IP地址和优化路由表的一种技术。CIDR 一定程度上解决了IPv4地址耗尽和路由表膨胀的问题。</p><p><strong>RFC 1517-1520</strong>：1993年引入CIDR，允许更灵活的地址分配和路由聚合，不再依赖固定的A、B、C类地址划分，而是使用 <mark>可变长度的子网掩码（VLSM） 和前缀表示法</mark></p><ol><li><p><strong>斜线记法（前缀表示法：Prefix Notation）</strong>：用于标识网络地址块的大小，支持灵活的地址分配和路由。格式：IP地址/前缀长度（如<code>192.168.1.0/24</code>），前缀长度表示网络部分的位数</p></li><li><p><span style="color:purple;"><strong>变长子网掩码（Variable Length Subnet Mask, VLSM）</strong></span> ：CIDR使用可变长度的子网掩码（VLSM），允许更灵活的地址划分，一个网络可以被划分为多个子网，每个子网使用不同的子网掩码。示例：假设我们有一个网络地址块：<code>192.168.1.0/24</code>，需要划分为ABCD四个子网，每个子网的主机数分别是：<code>62，30，12，6</code>，主机号位数分别是：<code>6,5,4,3</code></p></li></ol><table><thead><tr><th>子网</th><th>网络地址</th><th>子网掩码</th><th>可用地址</th><th>广播地址</th><th>n</th></tr></thead><tbody><tr><td>A</td><td>192.168.1.0/26 <br> <code>0-&gt;0000 0000</code></td><td>255.255.255.192<br> <code>192-&gt;1100 0000</code></td><td>192.168.1.1 - <br>192.168.1.62</td><td>192.168.1.63</td><td>62</td></tr><tr><td>B</td><td>192.168.1.64/27<br> <code>64-&gt;0100 0000</code></td><td>255.255.255.224<br> <code>224-&gt;1110 0000</code></td><td>192.168.1.65 - <br>192.168.1.94</td><td>192.168.1.95</td><td>30</td></tr><tr><td>C</td><td>192.168.1.96/28<br> <code>96-&gt;0110 0000</code></td><td>255.255.255.240<br> <code>240-&gt;1111 0000</code></td><td>192.168.1.97 - <br>192.168.1.110</td><td>192.168.1.111</td><td>14</td></tr><tr><td>D</td><td>192.168.1.112/29<br> <code>112-&gt;0111 0000</code></td><td>255.255.255.248<br> <code>248-&gt;1111 1000</code></td><td>192.168.1.113 -<br>192.168.1.118</td><td>192.168.1.119</td><td>6</td></tr></tbody></table><ol start="3"><li><strong>路由聚合（Route Aggregation）</strong> ：也称为：Route Summarization（路由汇总），是一种将多个连续的小地址块合并为一个更大的地址块的技术，从而减少路由表条目，示例：多个连续的子网：<code>192.168.1.0/24</code>, <code>192.168.2.0/24</code>, <code>192.168.3.0/24</code>，聚合为一个更大的地址块：<code>192.168.0.0/22</code>（覆盖<code>192.168.0.0</code>到<code>192.168.3.255</code>）</li></ol><hr><p>CIDR的实际应用：<strong>地址分配：ISP分配</strong>：互联网服务提供商（ISP）可以根据客户需求分配不同大小的地址块，例如，一个企业可能需要1000个地址，ISP可以分配一个<code>/22</code>地址块（1024个地址）</p><hr><h2 id="internet-protocol" tabindex="-1"><a class="header-anchor" href="#internet-protocol"><span>Internet Protocol</span></a></h2><p>IP（Internet Protocol，互联网协议）是TCP/IP协议族中的核心协议之一，负责在网络层实现数据包的寻址和路由。IP协议定义了数据包的格式（IP数据报）以及如何将数据包从源主机传输到目标主机。</p><ul><li><p>实现数据包的路由和转发，提供无连接、不可靠的数据传输服务</p></li><li><p>支持分片和重组以适应不同网络的最大传输单元（MTU）</p></li></ul><h3 id="ip数据报格式" tabindex="-1"><a class="header-anchor" href="#ip数据报格式"><span>IP数据报格式</span></a></h3><p>IPv4数据报由<strong>首部（Header）和数据（Payload）</strong> 两部分组成。首部长度为20字节（无选项时），最大长度为60字节（含选项），下图除了最后的 Data ，其余皆为首部：</p><figure><img src="https://image.ventix.top/img02/20210209113651363.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>以下为首部（Header）各字段详细解释：</p><ol><li><p>Version（版本）：标识IP协议的版本，IPv4：<code>0100</code>（4），IPv6：<code>0110</code>（6）</p></li><li><p>IHL（Internet Header Length，首部长度）：表示IP首部的长度，单位为 <code>4字节</code>，二进制表示的最小值为 <code>0101</code> -&gt; 5（20字节），最大值为 <code>1111</code> -&gt; 15（60字节）</p></li><li><p>Type of Service（服务类型）：指定数据报的服务质量（QoS）</p></li><li><p>Total Length（总长度）：整个IP数据报的长度（首部 + 数据），最大值：65535(字节)</p></li><li><p>Identification（标识）: 用于标识数据报的唯一性，便于分片和重组。</p></li><li><p>Flags（标志）：<mark>控制数据报的分片</mark></p></li><li><p>Fragment Offset（分片偏移）：表示当前分片在原始数据报中的位置，单位为8字节。</p></li><li><p>Time to Live（TTL，生存时间）：限制数据报在网络中的最大跳数，每经过一个路由器减1，值为0时丢弃。</p></li><li><p>Protocol（协议）：标识上层协议类型。TCP：<code>6</code> ，UDP：<code>17</code>，ICMP：<code>1</code></p></li><li><p>Header Checksum（首部校验和）：用于校验IP首部的完整性</p></li><li><p>Source IP Address（源IP地址）：发送数据报的源主机IP地址</p></li><li><p>Destination IP Address（目标IP地址）：接收数据报的目标主机IP地址</p></li><li><p>Options（选项）：提供额外的功能，如记录路由（Record Route）、时间戳（Timestamp）等</p></li></ol><hr><h3 id="分片与重组" tabindex="-1"><a class="header-anchor" href="#分片与重组"><span>分片与重组</span></a></h3><p>当一个数据报太大以至于无法在一个特定的链路层协议上传输时（例如，超过了该网络的最大传输单元MTU），就需要将其分割成较小的部分，即 分片（fragmentation）。然后，在目的地或目标网络重新组合这些分片以恢复原始数据报，这就是 重组（reassembly）的过程。</p><p>当一个IP数据报需要分片时，以下字段在IPv4头部中起重要作用：</p><div class="hint-container info"><p class="hint-container-title">分片相关首部字段</p><ul><li><strong>标识（Identification）</strong>：标识属于同一个原始数据报的所有分片，使接收方可以正确地重组</li><li><strong>标志（Flags）</strong>：包含三个比特，其中 第一位未使用（总是设置为<code>0</code>） <ul><li><span style="color:red;">第二位（DF, Don&#39;t Fragment）表示是否允许分片</span><ul><li>值为 <code>0</code> 表示允许路由器对该数据报进行分片，</li><li>值为 <code>1</code> 则表示该数据报不允许被路由器分片，如果数据报太大并且设置了DF标志，那么路由器将丢弃该数据报并向源端发送一个ICMP错误消息</li></ul></li><li><span style="color:red;">第三位（MF, More Fragments）指示是否有更多的分片跟随当前分片</span><ul><li>值为 <code>1</code>，表示该数据报不是一系列分片中的最后一个分片，还有后续的分片</li><li>值为 <code>0</code>，则意味着这是最后一个分片或是一个非分片的数据报</li></ul></li></ul></li><li><strong>片偏移（Fragment Offset）</strong>：指明了该分片在整个原始数据报中的位置，以8字节为单位。</li></ul><p>每个分片都有自己的IP头部，除了最后一个分片外，所有分片都设置了MF标志。第一个分片包含了整个IP头部和部分数据，而后续的分片则只有部分数据。</p></div><p>重组通常发生在最终的目的主机上，一旦所有的分片都到达并且按照正确的顺序排列，目的主机就可以将它们重新组装成原始的数据报并继续处理。</p><hr><p>值得注意的是，在IPv6中，只支持终端设备之间的分片操作，默认情况下 <mark>不允许路由器对数据报进行分片</mark>。IPv6依赖于源节点执行路径MTU发现来确定适当的数据报大小。如果数据报太大而不能被传输，中间路由器会丢弃它并向源节点发送ICMPv6“Packet Too Big”消息，促使源节点减小数据报尺寸重试。</p><hr><h3 id="路由与路路由器" tabindex="-1"><a class="header-anchor" href="#路由与路路由器"><span>路由与路路由器</span></a></h3><p>路由（Routing）是指在网络中选择一条路径将数据从源节点传输到目的节点的过程，路由可以是静态的，也可以是动态的</p><ul><li>静态路由：由网络管理员手动配置的固定路由条目。</li><li>动态路由：通过路由协议自动计算和更新路由表</li></ul><p><span style="color:red;"><strong>路由器（Router）</strong> 负责在不同网络之间转发数据包</span>。路由器根据路由表（Routing Table）决定数据包的转发路径。主要功能包括：</p><ul><li><strong>路径选择</strong>：根据路由协议计算最优路径。</li><li><strong>数据转发</strong>：按照路由表的指引，将数据包发送到下一跳设备。</li><li><strong>网络隔离</strong>：连接不同的子网，实现网络分段，提高安全性和效率。</li></ul><hr><p>路由器的主要类型：</p><ol><li><strong>企业级路由器</strong>：用于大型企业和数据中心，具备高吞吐量和复杂的策略管理能力，如 Cisco、华为、HPE 等品牌的高端路由器。</li><li><strong>家用路由器</strong>：适用于家庭和小型办公环境，通常集成了 NAT（网络地址转换）、DHCP、Wi-Fi AP 等功能，如 TP-Link、小米、Netgear 等。</li><li><strong>核心路由器</strong>：用于互联网骨干网，处理高速大流量转发，如思科（Cisco）和华为（Huawei）的高端设备。</li><li><strong>边界路由器</strong>：用于 ISP（互联网服务提供商）之间的连接，支持 BGP（边界网关协议）。</li></ol><hr><h3 id="路由表及路由转发" tabindex="-1"><a class="header-anchor" href="#路由表及路由转发"><span>路由表及路由转发</span></a></h3><p>路由表（Routing Table）是路由器用来决定如何转发数据包的关键数据结构。它存储了到达不同目的地的路径信息。路由表关键字段：</p><ol><li><p><strong>Destination/Mask（目标网络/子网掩码）</strong>： 指定该路由条目的目的地网络地址及其对应的子网掩码。这个组合决定了哪些数据包将匹配此条目。</p></li><li><p><strong>Gateway（网关）</strong>： 也称为下一跳（Next Hop），指定了到达目标网络需要经过的下一个路由器的IP地址。如果目标网络直接连接到本路由器，则此字段可能为空或者指向接口本身。</p></li><li><p><strong>Interface（接口）</strong>： 表示通过哪个物理或逻辑接口发送数据包以到达目标网络。</p></li><li><p><strong>Metric（度量值）</strong>： 衡量路径成本的一个数值，可以基于多种因素如跳数、带宽、延迟等。较低的度量值表示更优的路径。当有多条路径可达同一目的地时，会选择具有最低度量值的路径。</p></li><li><p><strong>Proto（协议来源）</strong>： 标识该路由条目的来源，比如直连（Direct）、静态配置（Static），或是通过某种动态路由协议（如RIP、OSPF、BGP等）学习得到。</p></li><li><p><strong>Flags（标志位）</strong>： 可能包含一些特殊标志，例如U（可用）、G（网关存在）、H（主机路由）等，具体取决于使用的操作系统和路由软件。</p></li></ol><p>并不是只有路由器才拥有路由表，个人电脑、服务器等也会有一个路由表来确定如何处理出站流量</p><p>示例：Linux中查看路由表 <code>route -n</code> ，windows命令 <code>route print</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@rocky ~]# route -n</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> routing</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Destination</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Gateway</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         Genmask</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         Flags</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Metric</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ref</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Iface</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0.0.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         192.168.16.2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0.0.0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         UG</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    100</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ens160</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">172.17.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0.0.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         255.255.0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     U</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  docker0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">192.168.16.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0.0.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         255.255.255.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   U</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     100</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ens160</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第一条路由是一个默认路由，用于所有非本地网络的数据包，它们会被转发到网关 <code>192.168.16.2</code><br> 剩余两条的Gateway均为 <code>0.0.0.0</code>，表示这是一个直连网络，不需要经过网关</p><div class="hint-container tip"><p class="hint-container-title">默认网关</p><p>默认网关可以理解为路由器，它负责接收来自本地网络的数据并将其转发到更大的互联网中去</p><p>但是网关则更广泛地指代任何能够实现网络间协议转换和通信的设备或系统。例如，一个Web代理服务器就是一个应用层网关，它可以帮助客户端访问互联网资源</p></div><hr><p><strong>路由转发 (Packet Forwarding)</strong> : 是指路由器根据路由表中的信息，将数据包正确地传递到目的地的过程。主要步骤如下：</p><ol><li>查找路由表：路由器检查数据包的目标 IP，并在路由表中查找匹配的路由条目。</li><li>选择最佳路由：如果有多个匹配项，选择度量值最低的路径。</li><li>确定下一跳：路由器根据路由表确定数据包应该转发到哪个下一跳设备。</li><li>封装与转发：数据包可能需要重新封装（如 MAC 地址变化），然后通过合适的接口发送出去。</li></ol><p>两种主要的转发方式:</p><ul><li><strong>逐跳转发（Hop-by-Hop Forwarding）</strong>：每个路由器都独立查找路由表，并决定下一跳设备。</li><li><strong>标签交换（Label Switching）</strong>：如 MPLS（多协议标签交换），通过预先建立的路径（LSP）进行快速转发。</li></ul><hr><h3 id="网络地址转换" tabindex="-1"><a class="header-anchor" href="#网络地址转换"><span>网络地址转换</span></a></h3><p>NAT（Network Address Translation，网络地址转换）主要用于修改IP数据包中的源或目的IP地址。这项技术最初是为了解决IPv4地址空间不足的问题而设计的，但随着时间的发展，它也被广泛应用于提高网络安全性和简化网络管理等方面。</p><div class="hint-container info"><p class="hint-container-title">NAT的常见工作方式</p><ul><li><strong>静态NAT</strong>：一对一映射，将一个私有IP地址固定映射到一个公共IP地址上，适用于需要从外部直接访问的服务器等场景。</li><li><strong>动态NAT</strong>：多对多映射，使用池中的公共IP地址临时分配给内部主机，适合临时连接需求。</li><li><strong>端口地址转换（PAT/NAT重载）</strong>：多对一映射，允许多个内部IP地址共享同一个公共IP地址的不同端口号。这是最常见的一种形式，极大地提高了IP地址的利用率。</li></ul></div><p>NAT通常在路由器或者防火墙上实现，它会在数据包进出网络边界时进行必要的地址和端口转换，并维护一张转换表记录这些映射关系。当响应的数据包返回时，NAT设备会根据这张表将其转换回原始的内部地址和端口。</p><hr><p>NAT的应用场景：几乎所有的家庭宽带路由器都内置了NAT功能，使得家庭内的多个设备可以共享单一的公网IP地址上网。能感知到NAT的场景最常见的就是 虚拟机NAT模式，但是VM的NAT模式与路由器NAT是有去别的：</p><table><thead><tr><th><strong>对比项</strong></th><th><strong>家庭/企业路由器 NAT</strong></th><th><strong>VM 中的 NAT</strong></th></tr></thead><tbody><tr><td><strong>作用</strong></td><td>让内网设备共享公网IP <br>(从外部网络访问内部服务，需配置端口转发规则)</td><td>让虚拟机共享宿主机网络</td></tr><tr><td><strong>NAT 设备</strong></td><td>路由器</td><td>宿主机</td></tr><tr><td><strong>IP 变换</strong></td><td>内网 IP → 公网 IP</td><td>VM 私有 IP → 宿主机 IP</td></tr><tr><td><strong>外部访问</strong></td><td>需要端口映射</td><td>需要端口映射</td></tr><tr><td><strong>应用场景</strong></td><td>互联网访问</td><td>虚拟化环境</td></tr></tbody></table><p>VM中虚拟网卡扮演 NAT 设备的角色，负责地址转换，但不进行传统的路由计算</p><hr><h3 id="icmp协议" tabindex="-1"><a class="header-anchor" href="#icmp协议"><span>ICMP协议</span></a></h3><p><strong>ICMP（Internet Control Message Protocol，互联网控制消息协议）</strong> 主要用于在网络设备之间传递控制消息。这些消息涉及请求和响应操作，帮助诊断网络问题、报告错误情况等。比如ping命令使用ICMP回显请求和响应报文来测试网络连通性。</p><p>ICMP消息通常封装在IP数据包内，作为IP层的一个辅助协议。它包含多种类型的报文，每种都有特定的目的和格式。以下是一些常见的ICMP报文类型：</p><div class="hint-container info"><p class="hint-container-title">ICMP报文类型</p><ul><li><p><strong>Echo Request &amp; Echo Reply（回声请求/回复）</strong>：用于测试目的主机是否可达以及测量往返延迟时间。典型应用：<code>ping</code>命令就是基于这两种报文来检查网络连通性的。</p></li><li><p><strong>Destination Unreachable（目标不可达）</strong>：当路由器或主机无法将数据包送达目的地时发送此消息。包括但不限于网络不可达、主机不可达、端口不可达等。</p></li><li><p><strong>Time Exceeded（超时）</strong>：当一个IP数据包的TTL（生存时间）字段减至零而未到达目的地时，中间路由器会丢弃该数据包并向源点发送一个时间超时报文。<code>traceroute</code>工具利用了这种机制来确定从源到目的地经过的所有路由器。</p></li><li><p><strong>Redirect（重定向）</strong>：当路由器发现存在更优路径到达某个目的地时，它可以向发送方发送重定向消息以建议使用更好的下一跳地址。</p></li></ul></div><p>ICMP常见使用场景：</p><ol><li><p><strong>网络诊断与故障排除</strong></p><ul><li><strong>Ping</strong>：通过发送ICMP Echo Request并等待Echo Reply来验证目标主机的可达性。</li><li><strong>Traceroute</strong>：通过设置不同的TTL值并观察ICMP Time Exceeded响应，确定数据包从源到目的地所经过的路由路径。</li></ul></li><li><p><strong>错误报告</strong>： 当发生诸如网络不通、主机不在线或者服务端口关闭等问题时，ICMP可以提供详细的错误信息给源主机，以便进行相应的调整或修复。</p></li><li><p><strong>流量控制</strong>：在某些情况下，如网络拥塞时，ICMP Source Quench（源抑制）曾被用来通知发送方降低发送速率，不过这一特性已被废弃，因为有更好的方法来管理流量。</p></li><li><p><strong>安全策略实施</strong>：防火墙和其他网络安全设备可能会根据ICMP消息的内容来决定是否允许或阻止特定类型的通信。例如，禁止外部网络对内部主机发起的ICMP Echo Requests（即禁用ping）作为一种简单的防护措施。</p></li><li><p><strong>路径MTU发现</strong>：为了找到一条路径上支持的最大传输单元(MTU)，系统可能依赖于ICMP Fragmentation Needed（需要分片）消息，这有助于避免不必要的IP分片，提高传输效率。</p></li></ol><p>虽然ICMP并不是直接负责用户数据传输的协议，但它在网络管理和维护中扮演着不可或缺的角色。</p><hr><h3 id="igmp协议" tabindex="-1"><a class="header-anchor" href="#igmp协议"><span>IGMP协议</span></a></h3><p>虽然ICMP与IGMP看起来有些像，但它们的功能和服务对象完全不同</p><p><strong>IGMP（Internet Group Management Protocol，互联网组管理协议）</strong> 是用于管理组播成员资格的协议。它允许主机表达对特定组播组的兴趣，并让路由器知道哪些主机希望接收特定组播流量。IGMP主要用于支持IP组播，这是一种允许一个发送者向多个接收者同时发送数据的技术。</p><div class="hint-container info"><p class="hint-container-title">IGMP的工作原理</p><ol><li><p><strong>加入组播组</strong>：当一台主机想要加入某个组播组时，它会发送一个IGMP成员报告消息给其直连的路由器，表明自己希望接收该组播组的数据流。</p></li><li><p><strong>维护成员关系</strong>：路由器定期发送IGMP查询消息以确认当前活跃的组播组成员。如果主机仍然对该组播组感兴趣，则会在接收到查询后回复成员报告。</p></li><li><p><strong>离开组播组</strong>：在某些版本的IGMP中（如IGMPv2及以上），当主机不再需要接收特定组播组的数据时，它可以主动发送离开组的消息通知路由器。</p></li><li><p><strong>路由更新</strong>：基于从主机收到的信息，路由器构建并更新自己的组播转发表，以便正确地转发组播数据到感兴趣的接收者。</p></li></ol></div><p>尽管单播（Unicast）和广播（Broadcast）仍然是常见的数据传输方式，但它们各有局限性：单播对于大规模分发效率不高，而广播则会占用过多带宽且不适合跨网段传输。相比之下，组播（Multicast）能够有效地将信息从一个发送者传递给多个接收者，同时减少了不必要的带宽消耗。</p><hr><h2 id="ipv6地址及数据报" tabindex="-1"><a class="header-anchor" href="#ipv6地址及数据报"><span>IPv6地址及数据报</span></a></h2><p>IPv6（Internet Protocol version 6）是下一代互联网协议，用于替代 IPv4，解决 IPv4 地址耗尽问题，并提供更高效的网络传输能力。</p><p>IPv6 地址是 <strong>128 位（16 字节）</strong>，常使用 <strong>十六进制</strong> 表示，分成 8 组，每组 16 位（4 个十六进制数），以 <strong>冒号（:）</strong> 分隔：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2001:0db8:85a3:0000:0000:8a2e:0370:7334</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">IPv6 地址简化规则</p><ol><li><strong>去掉前导 0</strong>（每组前面的 0 可以省略）：<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2001:db8:85a3:0:0:8a2e:370:7334</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><strong>连续的 0 可以用 <code>::</code> 代替（仅可使用一次）</strong>：<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2001:db8:85a3::8a2e:370:7334</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>例如：<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fe80:0000:0000:0000:1a2b:3c4d:5e6f:7g8h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> →</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fe80::1a2b:3c4d:5e6f:7g8h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol></div><p><strong>IPv6 的好处</strong>:</p><ol><li><strong>地址充足</strong>：全球唯一地址，无需 NAT。</li><li><strong>简化路由</strong>：固定 40 字节头部，提升转发效率。</li><li><strong>自动配置</strong>：支持 SLAAC，无需手动配置 IP。</li><li><strong>安全性增强</strong>：原生支持 IPSec 加密通信。</li></ol><p>IPv6 地址类型:</p><table><thead><tr><th>地址类型</th><th>范围</th><th>说明</th></tr></thead><tbody><tr><td><strong>单播地址</strong></td><td>唯一地址</td><td>直接指向某个设备</td></tr><tr><td><strong>组播地址</strong></td><td><code>ff00::/8</code></td><td>发送给多个设备</td></tr><tr><td><strong>任播地址</strong></td><td>-</td><td>发送给最近的一个设备</td></tr><tr><td><strong>链路本地地址</strong></td><td><code>fe80::/10</code></td><td>仅限本地网络，不可路由</td></tr><tr><td><strong>站点本地地址</strong></td><td><code>fc00::/7</code></td><td>内部网络使用</td></tr><tr><td><strong>回环地址</strong></td><td><code>::1</code></td><td>本机地址（类似 IPv4 <code>127.0.0.1</code>）</td></tr></tbody></table><hr><h3 id="ipv6数据报" tabindex="-1"><a class="header-anchor" href="#ipv6数据报"><span>IPv6数据报</span></a></h3><p>IPv6 基础头部（Fixed Header） <strong>固定 40 字节</strong>，相比 IPv4 头部更简单，提升了转发效率。</p><figure><img src="https://image.ventix.top/img02/20220209231058254.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>IPv6 头部关键字段：</p><table><thead><tr><th>字段</th><th>长度</th><th>作用</th></tr></thead><tbody><tr><td><strong>版本（Version）</strong></td><td>4bit</td><td>固定为 <code>6</code>，表示 IPv6</td></tr><tr><td><strong>流量分类（Traffic Class）</strong></td><td>8bit</td><td>用于 QoS（流量优先级）</td></tr><tr><td><strong>流标签（Flow Label）</strong></td><td>20bit</td><td>标记特定数据流，提高传输效率</td></tr><tr><td><strong>负载长度（Payload Length）</strong></td><td>16bit</td><td>指定数据部分的大小（不包括头部）</td></tr><tr><td><strong>下一头部（Next Header）</strong></td><td>8bit</td><td>指定下一个协议（如 TCP/UDP）</td></tr><tr><td><strong>跳数限制（Hop Limit）</strong></td><td>8bit</td><td>类似 IPv4 TTL（防止环路）</td></tr><tr><td><strong>源地址（Source Address）</strong></td><td>128bit</td><td>发送方 IPv6 地址</td></tr><tr><td><strong>目的地址（Destination Address）</strong></td><td>128bit</td><td>接收方 IPv6 地址</td></tr><tr><td>扩展头部（Extension Headers）</td><td>可变</td><td>额外的控制信息，如 IPSec</td></tr></tbody></table><p><strong>扩展头部</strong> 位于 IPv6 基础头部之后，在负载数据（如 TCP/UDP）之前。<span style="color:purple;">一般情况下，IPv6 普通数据包不会携带扩展头部，只有在 需要特定功能（如 IPSec、分片）时，才会使用扩展头部</span></p><ul><li><span style="color:orange;">IPv6 默认只解析基础头部，路由器无需处理扩展头部，减少计算量</span></li><li><span style="color:red;">只在特定情况下由特定设备解析，如端到端的额外信息（如 IPSec、分片），不像 IPv4 那样 所有路由器都要解析变长选项</span></li></ul><p>一些的 IPv6 扩展头部介绍：</p><table><thead><tr><th><strong>扩展头部类型</strong></th><th><strong>Next Header 值</strong></th><th><strong>作用</strong></th></tr></thead><tbody><tr><td><strong>Hop-by-Hop Options</strong></td><td><code>0</code></td><td>路由器逐跳处理，如 Jumbogram</td></tr><tr><td><strong>Routing Header</strong></td><td><code>43</code></td><td>规定路径（类似源路由）</td></tr><tr><td><strong>Fragment Header</strong></td><td><code>44</code></td><td>处理 IPv6 分片</td></tr><tr><td><strong>Authentication Header (AH)</strong></td><td><code>51</code></td><td>IPSec 认证</td></tr><tr><td><strong>Encapsulating Security Payload (ESP)</strong></td><td><code>50</code></td><td>IPSec 加密</td></tr><tr><td><strong>Destination Options</strong></td><td><code>60</code></td><td>仅目的端处理的信息</td></tr></tbody></table><hr><h3 id="与ipv4的区别" tabindex="-1"><a class="header-anchor" href="#与ipv4的区别"><span>与IPv4的区别</span></a></h3><table><thead><tr><th>对比项</th><th>IPv4</th><th>IPv6</th></tr></thead><tbody><tr><td><strong>地址长度</strong></td><td>32 位</td><td>128 位</td></tr><tr><td><strong>地址数量</strong></td><td>约 43 亿个</td><td>约 <mjx-container class="MathJax" jax="SVG" style="position:relative;"><svg style="vertical-align:-0.05ex;" xmlns="http://www.w3.org/2000/svg" width="9.707ex" height="2.005ex" role="img" focusable="false" viewBox="0 -864 4290.6 886" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z" transform="translate(778,0)"></path></g><g data-mml-node="mo" transform="translate(1500.2,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="msup" transform="translate(2500.4,0)"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g><g data-mml-node="TeXAtom" transform="translate(1033,393.1) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(500,0)"></path></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3.4</mn><mo>×</mo><msup><mn>10</mn><mrow data-mjx-texclass="ORD"><mn>38</mn></mrow></msup></math></mjx-assistive-mml></mjx-container></td></tr><tr><td><strong>常用地址表示方式</strong></td><td>点分十进制（192.168.1.1）</td><td>冒号十六进制（2001:db8::1）</td></tr><tr><td><strong>地址分配</strong></td><td>需要 NAT（网络地址转换）</td><td>无需 NAT，全球唯一</td></tr><tr><td><strong>自动配置</strong></td><td>DHCP 分配</td><td><strong>SLAAC</strong>（自动地址配置）</td></tr><tr><td><strong>广播</strong></td><td>有广播（Broadcast）</td><td>无广播，改为组播（Multicast）</td></tr><tr><td><strong>头部结构</strong></td><td>复杂，变长选项</td><td><strong>固定 40 字节头部，性能更好</strong></td></tr><tr><td><strong>安全性</strong></td><td>需要额外加密</td><td><strong>IPSec 内置支持</strong></td></tr></tbody></table><p><strong>IPv6 的变化和改进</strong></p><ul><li><strong>头部简化</strong>：IPv6 固定 40 字节，路由器转发更快。</li><li><strong>无 NAT</strong>：IPv6 设备可直接通信，无需 NAT 转换。</li><li><strong>无广播</strong>：IPv6 仅支持组播，减少网络负担。</li><li><strong>IPSec 强制支持</strong>：默认支持端到端加密通信。</li><li><strong>分片和重组</strong>：IPv6不允许在路由器上进行分片和重组，只能在源与目的地执行</li></ul><hr><p>IPv6 数据报与 IPv4 数据报的区别</p><table><thead><tr><th>对比项</th><th>IPv4</th><th>IPv6</th></tr></thead><tbody><tr><td><strong>头部长度</strong></td><td><strong>变长，不固定（20-60 字节）</strong></td><td><strong>固定 40 字节</strong></td></tr><tr><td><strong>地址长度</strong></td><td>32 位</td><td>128 位</td></tr><tr><td><strong>选项字段</strong></td><td>头部有选项</td><td>选项移入扩展头部</td></tr><tr><td><strong>广播支持</strong></td><td>有广播</td><td>仅支持组播</td></tr><tr><td><strong>生存时间（TTL）</strong></td><td>TTL 计数</td><td>直接改为 <strong>跳数限制（Hop Limit）</strong></td></tr><tr><td><strong>下一协议</strong></td><td>Protocol 字段</td><td><strong>Next Header 取代</strong></td></tr><tr><td><strong>安全性</strong></td><td>IPSec 可选</td><td><strong>IPSec 强制支持</strong></td></tr></tbody></table><hr><p><strong>IPv6 迁移注意事项</strong></p><ol><li><p><strong>是否支持 IPv6？</strong></p><ul><li>运营商、路由器、操作系统是否支持 IPv6？</li><li>使用 <code>ping6</code> 或 <code>ip -6 addr show</code> 检查 IPv6 连接。</li></ul></li><li><p><strong>IPv6 地址配置</strong></p><ul><li><strong>自动配置（SLAAC）</strong>：设备可自动获取 IPv6 地址。</li><li><strong>DHCPv6</strong>：类似 IPv4 DHCP，但需要路由器支持。</li></ul></li><li><p><strong>IPv6 防火墙</strong></p><ul><li>由于 IPv6 无 NAT，需要配置防火墙 <strong>防止公网 IP 暴露设备</strong>。</li></ul></li><li><p><strong>IPv6 过渡机制</strong></p><ul><li><strong>双栈（Dual Stack）</strong>：同时运行 IPv4 和 IPv6（推荐）。</li><li><strong>隧道（Teredo、6to4）</strong>：让 IPv6 运行在 IPv4 之上。</li></ul></li></ol><hr><p><strong>总结</strong></p><ul><li><strong>IPv6 解决 IPv4 地址耗尽问题</strong>，提供更大的地址空间。</li><li><strong>IPv6 头部固定 40 字节，更简洁高效</strong>，路由转发性能更好。</li><li><strong>IPv6 原生支持自动配置（SLAAC）、IPSec 加密、安全性更强</strong>。</li><li>IPv6 需要企业和运营商支持，部署时需注意防火墙和过渡机制。</li></ul></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/ventixy/notebook/edit/main/src/theory/cs/network.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: msdrizzle@outlook.com">drizzle</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/theory/cs/interface.html" aria-label="网络接口层"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->网络接口层</div></a><a class="route-link auto-link next" href="/theory/cs/transport.html" aria-label="传输层"><div class="hint">Next<span class="arrow end"></span></div><div class="link">传输层<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Default footer</div><div class="vp-copyright">Copyright © 2025 ventixy </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CYbEao8O.js" defer></script>
  </body>
</html>
